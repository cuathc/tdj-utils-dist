import{H as ce,d as Q,s as R,I as Pe,_ as J,o as f,c as $,J as j,e as s,f as U,k as ue,n as Be,K as Ze,L as we,M as xe,N as et,O as tt,P as qe,q as L,a as E,r as I,Q as Te,g as a,i as c,j as X,w as T,E as se,R as Ne,F as q,h as N,C as H,p as pe,l as ve,S as st,U as le,b as ie,T as nt,V as l,W as at,A as Re,x as ot,X as lt,Y as ut,v as Ie,Z as P,$ as it,a0 as dt,u as rt,z as ct,G as he}from"./index.js";import{_ as re}from"./lodash.js";import{u as pt}from"./useHeroes.js";import vt from"./InputNumber.js";import{d as Ce,a as mt}from"./downloadFile.js";import{s as He}from"./data.js";let Fe=0,Me=0;const ft=500;function Ae(){const e=Math.floor(new Date().getTime()/1e3);Me===e?Fe++:Fe=0,Me=e;const t=e.toString(16);return`${(ft<<16|Fe&255).toString(16)}.${t}`}async function _t(){try{return await ce.getAll("calculator")}catch{return[]}}async function ht(){try{await ce.clear("calculator")}catch(e){alert(e.message)}}async function bt(e){try{await ce.add("calculator",JSON.parse(JSON.stringify(e)))}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}async function de(e){try{await ce.put("calculator",JSON.parse(JSON.stringify(e)))}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}async function Ve(e){try{await ce.delete("calculator",e)}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}function $t(){return{w:2438,g:0,a:"403+363",c:20,x:0}}function yt(){return{a:0}}function Ft(){return{att:0,k:0}}function Oe(){return{a1:1.5,a2:0,att:"15+10+8",da:"10+10",db:"4+10+20",dc:"0",dx:"0",id:"0",cd:"30",name:"1.5\u6280\u80FD",att2:"0",da2:"0",dx2:"0",defGain:"0"}}function Ct(){return{a1:1.5,a2:0,att:0,id:0,da:0,db:0,dc:0,dx:0,cd:0,att2:0,da2:0,dx2:0,defGain:0}}function gt(){return[Oe()]}function Bt(){return{hp:"10000",def:"1872",defGain:"15+5",ra:"0",rb:"4+10"}}const wt=Q({props:{active:Boolean,label:String,dir:String,inline:Boolean,color:String,wait:{type:Number,default:500}},emits:["update:active"],setup(e,{emit:t}){const n=R(),b=R({}),_=R(e.active),v=()=>{const r=n.value.getBoundingClientRect();switch(_.value=!0,t("update:active",_.value),e.dir){case"left":b.value={top:`${r.top+r.height/2}px`,right:`${window.innerWidth-r.left-4}px`,maxWidth:"100%"};break;case"right":b.value={top:`${r.top+r.height/2}px`,left:`${r.right+4}px`,maxWidth:"100%"};break;case"top":b.value={bottom:`${window.innerHeight-r.top-4}px`,left:`${r.left+r.width/2}px`,maxWidth:"100%"};break;default:b.value={top:`${r.bottom+4}px`,left:`${r.left+r.width/2}px`,maxWidth:"100%"}}};let d;const w=()=>{d=setTimeout(v,e.wait)},k=()=>{clearTimeout(d),_.value=!1,t("update:active",_.value)};return Pe(()=>e.active,D=>{_.value=D}),{el:n,style:b,tActive:_,onEnter:w,onOut:k}}}),kt={class:"c-tooltip-label"};function Dt(e,t,n,b,_,v){return f(),$("div",{ref:"el",class:ue(["c-tooltip",{active:e.tActive,inline:e.inline}]),onMouseenter:t[0]||(t[0]=(...d)=>e.onEnter&&e.onEnter(...d)),onMouseout:t[1]||(t[1]=(...d)=>e.onOut&&e.onOut(...d))},[j(e.$slots,"label",{},()=>[s("div",kt,U(e.label),1)]),s("div",{class:ue(["c-tooltip-inner",e.dir?`c-tooltip-${e.dir}`:"c-tooltip-bottom",e.color?`c-tooltip-${e.color}`:""]),style:Be(e.style)},[j(e.$slots,"default")],6)],34)}var ke=J(wt,[["render",Dt]]);const Et=Q({components:{Divider:Ze,Tooltip:ke,CalcInput:we,IconUp:xe,IconDown:et,IconClose:tt,IconCopy:qe},props:{panel:{type:Object,required:!0},state:{type:Object,required:!0},enemyState:{type:Object,required:!0},itemState:{type:Object,required:!0},showUp:Boolean,showDown:Boolean},emits:["update:itemState","close","up","down","copy"],setup(e,{emit:t}){const n=L({editor:!1,name:""}),b=(o,C)=>{if(o==="name")return;const M=e.itemState;switch(o){case"a1":case"a2":typeof C=="number"&&(M[o]=C);break;default:typeof C=="string"&&(M[o]=C)}t("update:itemState",M)},_=L(Ct()),v=E({set:o=>b("a1",o),get:()=>e.itemState.a1}),d=E({set:o=>b("a2",o),get:()=>e.itemState.a2}),w=E({set:o=>b("att",o),get:()=>e.itemState.att}),k=E({set:o=>b("id",o),get:()=>e.itemState.id}),D=E({set:o=>b("da",o),get:()=>e.itemState.da}),r=E({set:o=>b("db",o),get:()=>e.itemState.db}),h=E({set:o=>b("dc",o),get:()=>e.itemState.dc}),V=E({set:o=>b("dx",o),get:()=>e.itemState.dx}),O=E({set:o=>b("cd",o),get:()=>e.itemState.cd}),p=E({set:o=>b("att2",o),get:()=>e.itemState.att2}),A=E({set:o=>b("da2",o),get:()=>e.itemState.da2}),K=E({set:o=>b("dx2",o),get:()=>e.itemState.dx2}),G=E({set:o=>b("defGain",o),get:()=>e.itemState.defGain}),F=L({a1:v,a2:d,att:w,da:D,db:r,dc:h,dx:V,id:k,cd:O,att2:p,da2:A,dx2:K,defGain:G}),y=E(()=>{const{state:o}=e,C=(100+_.att)/100;return Math.ceil(o.att*C)}),m=E(()=>{const{state:o}=e,C=(100+_.att+_.att2)/100;return Math.ceil(o.att*C)}),u=()=>{const{state:o,enemyState:C}=e,M=(100+o.k)/100,W=(100+_.da-C.ra)/100,te=(100+_.da+_.da2-C.ra)/100,ae=(100+_.db-C.rb)/100,oe=(100+_.dc)/100,_e=(100+_.dx)/100,ye=(100+_.dx+_.dx2)/100,De=(100+_.cd)/100,Ee=(100-_.id)/100,Ge=(100+C.defGain)/100,Qe=(100+C.defGain+_.defGain)/100,Je=Math.max(0,Math.max(0,C.def*Ge)*Ee),ze=Math.max(0,Math.max(0,C.def*Qe)*Ee),We=Math.max(1,y.value*M-Je),Le=Math.max(1,m.value*M-ze),Se=We*v.value*W*ae*_e,Xe=Math.ceil(Se*De),Ue=Le*d.value*te*ae*oe*ye,Ye=Math.ceil(Ue*De);return{r01:Math.ceil(Se),r01c:Xe,r02:Math.ceil(Ue),r02c:Ye}},B=E(()=>u().r01),z=E(()=>u().r01c),Z=E(()=>u().r02),i=E(()=>u().r02c);u();function x(){confirm(`\u786E\u8BA4\u8981\u5220\u9664\u6280\u80FD\u6A21\u677F"${e.itemState.name}"\u5417\uFF1F`)&&t("close")}function ee(){n.editor=!0,n.name=e.itemState.name}function be(){const o=n.name;if(n.editor=!1,n.name="",!o)return;const C=e.itemState;C.name=o,t("update:itemState",C)}function $e(){t("up")}function fe(){t("down")}function g(){t("copy")}return{vars:n,values:F,result:_,satt:y,r01:B,r01c:z,r02:Z,r02c:i,onClose:x,onRename:ee,onNameEnter:be,onUp:$e,onDown:fe,onCopy:g}}}),Y=e=>(pe("data-v-a928d4b0"),e=e(),ve(),e),St={class:"row"},Ut={class:"col-item"},It=Y(()=>s("div",{class:"label"},"\u6280\u80FD\u3001\u666E\u653B",-1)),Mt=H(" \u6280\u80FD\u3001\u666E\u653B\u500D\u7387 "),At={class:"input-group"},Vt=["step"],Pt=Y(()=>s("div",{class:"input-ext"},"\u500D",-1)),qt={class:"label"},Tt={class:"input-group"},Nt=Y(()=>s("div",{style:{clear:"both"}},null,-1)),Rt={class:"col-item"},Ht=Y(()=>s("div",{class:"label"},"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB",-1)),Ot=H(" \u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u500D\u7387 "),jt={class:"input-group"},Kt=["step"],Gt=Y(()=>s("div",{class:"input-ext"},"\u500D",-1)),Qt={class:"label"},Jt={class:"input-group"},zt={class:"col-item"},Wt=Y(()=>s("div",{class:"label"},"\u6700\u7EC8\u653B\u51FB",-1)),Lt={class:"static-control text-center"},Xt={class:"darkgold"},Yt=Y(()=>s("div",{style:{clear:"both"}},null,-1)),Zt={class:"label"},xt={class:"bold darkgold"},es=Y(()=>s("span",{class:"bold red"},"(\u66B4\u51FB)",-1)),ts={class:"static-control text-center"},ss={class:"bold darkgold"},ns={class:"bold red"},as={class:"label bold"},os={class:"static-control text-center"},ls={class:"bold darkgold"},us={key:0,class:"bold red"};function is(e,t,n,b,_,v){const d=I("IconCopy"),w=I("IconUp"),k=I("IconDown"),D=I("IconClose"),r=I("Divider"),h=I("Tooltip"),V=I("CalcInput"),O=Te("autofocus");return f(),$(q,null,[a(r,{orientation:"left"},{action:c(()=>[s("span",{onClick:t[4]||(t[4]=(...p)=>e.onCopy&&e.onCopy(...p))},[a(d,{class:"close"})]),e.showUp?(f(),$("span",{key:0,onClick:t[5]||(t[5]=(...p)=>e.onUp&&e.onUp(...p))},[a(w,{class:"close"})])):X("",!0),e.showDown?(f(),$("span",{key:1,onClick:t[6]||(t[6]=(...p)=>e.onDown&&e.onDown(...p))},[a(k,{class:"close"})])):X("",!0),s("span",{onClick:t[7]||(t[7]=(...p)=>e.onClose&&e.onClose(...p))},[a(D,{class:"close"})])]),default:c(()=>[e.vars.editor?T((f(),$("input",{key:0,class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>e.vars.name=p),onKeypress:t[1]||(t[1]=Ne((...p)=>e.onNameEnter&&e.onNameEnter(...p),["enter"])),onBlur:t[2]||(t[2]=(...p)=>e.onNameEnter&&e.onNameEnter(...p))},null,544)),[[se,e.vars.name],[O]]):(f(),$("span",{key:1,class:"calc-item-title",onClick:t[3]||(t[3]=(...p)=>e.onRename&&e.onRename(...p))},U(e.itemState.name||"\u6A21\u677F"),1))]),_:1}),s("div",St,[s("div",Ut,[a(h,{dir:"top"},{label:c(()=>[It]),default:c(()=>[Mt]),_:1}),s("div",At,[T(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":t[8]||(t[8]=p=>e.values.a1=p)},null,8,Vt),[[se,e.values.a1,void 0,{number:!0}]]),Pt])]),(f(),$(q,null,N([{name:"att",label:"\u653B\u51FB%",tip:"\u4F5C\u7528\u4E8E\u6240\u6709\u60C5\u51B5"},{name:"da",label:"A\u7C7B\u589E\u4F24%",tip:"\u9970\u54C1\u3001\u5404\u7C7Bbuff\u3001\u5929\u8D4B"},{name:"db",label:"B\u7C7B\u589E\u4F24%",tip:"\u661F\u8000\u3001\u661F\u76D8\u3001\u8BCD\u6761"},{name:"dx",label:"X\u7C7B\u589E\u4F24%",tip:"\u6700\u7EC8\u4FEE\u6B63\uFF0C\u5982\u4E00\u5B57\u7535\u65A9"},{name:"id",label:"\u7A7F\u900F%",tip:"\u65E0\u89C6\u9632\u5FA1"},{name:"cd",label:"\u66B4\u4F24%",tip:"\u66B4\u51FB\u4F24\u5BB3"}],p=>s("div",{class:"col-item",key:p.name},[a(h,{dir:"top"},{label:c(()=>[s("div",qt,U(p.label),1)]),default:c(()=>[H(" "+U(p.tip),1)]),_:2},1024),s("div",Tt,[a(V,{class:"input",modelValue:e.values[p.name],"onUpdate:modelValue":A=>e.values[p.name]=A,result:e.result[p.name],"onUpdate:result":A=>e.result[p.name]=A},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),Nt,s("div",Rt,[a(h,{dir:"top"},{label:c(()=>[Ht]),default:c(()=>[Ot]),_:1}),s("div",jt,[T(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":t[9]||(t[9]=p=>e.values.a2=p)},null,8,Kt),[[se,e.values.a2,void 0,{number:!0}]]),Gt])]),(f(),$(q,null,N([{name:"dc",label:"C\u7C7B\u589E\u4F24%",tip:"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u589E\u4F24"},{name:"att2",label:"\u653B\u51FB\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u653B\u51FB\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"da2",label:"\u4F24\u5BB3\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u4F24\u5BB3\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"defGain",label:"\u9632\u5FA1\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"},{name:"dx2",label:"X\u7C7B\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"}],p=>s("div",{class:"col-item",key:p.name},[a(h,{dir:"top"},{label:c(()=>[s("div",Qt,U(p.label),1)]),default:c(()=>[H(" "+U(p.tip),1)]),_:2},1024),s("div",Jt,[a(V,{class:"input",modelValue:e.values[p.name],"onUpdate:modelValue":A=>e.values[p.name]=A,result:e.result[p.name],"onUpdate:result":A=>e.result[p.name]=A},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),s("div",zt,[Wt,s("div",Lt,[s("span",Xt,U(e.satt),1)])]),Yt,(f(!0),$(q,null,N([{label:"\u4E00\u6BB5\u4F24\u5BB3",v:e.r01,v2:e.r01c},{label:"\u4E8C\u6BB5\u4F24\u5BB3",v:e.r02,v2:e.r02c}],(p,A)=>(f(),$("div",{class:"col-item",key:A},[s("div",Zt,[s("span",xt,U(p.label),1),es]),s("div",ts,[s("span",ss,U(p.v),1),s("span",ns,"("+U(p.v2)+")",1)])]))),128)),(f(!0),$(q,null,N([{label:"\u4E0D\u66B4\u51FB",value:e.r01+e.r02},{label:"\u4E00\u6BB5\u66B4\u51FB",value:e.r01c+e.r02},{label:"\u4E8C\u6BB5\u66B4\u51FB",value:e.r01+e.r02c},{label:"\u5168\u66B4\u51FB",value:e.r01c+e.r02c}],(p,A)=>(f(),$("div",{class:"col-item",key:A},[s("div",as,U(p.label),1),s("div",os,[s("span",ls,U(p.value),1),(+e.enemyState.hp||0)<=p.value?(f(),$("span",us," \u51FB\u6740 ")):X("",!0)])]))),128))])],64)}var ds=J(Et,[["render",is],["__scopeId","data-v-a928d4b0"]]);const rs=["onClick"],cs=Q({props:{pos:{default:"lt"}},setup(e){const t=R(!1),n=()=>{t.value=!0},b=()=>{t.value=!1};return window.addEventListener("click",b,!1),st(()=>{window.removeEventListener("click",b,!1)}),(_,v)=>(f(),$("div",{class:ue(["dropdown",[{active:t.value}]]),onClick:le(n,["stop"])},[j(_.$slots,"default",{},void 0,!0),s("div",{class:ue(["dropdown-popover",["dropdown-"+e.pos]]),onClick:v[0]||(v[0]=le(()=>{},["stop"]))},[j(_.$slots,"popover",{onClose:b},void 0,!0)],2)],10,rs))}});var je=J(cs,[["__scopeId","data-v-782cbcbc"]]);je.install=e=>{e.component("dropdown",Ke)};const Ke=je;const ps=Q({components:{CalcItem:ds,CalcInput:we,Tooltip:ke,Dropdown:Ke},props:{data:{type:Object,required:!0}},emits:["update:data"],setup(e,{emit:t}){const n=E(()=>e.data.basic),b=E(()=>e.data.state),_=E(()=>e.data.enemyState),v=E(()=>e.data.items),d=L(yt()),w=L({hp:0,def:0,defGain:0,ra:0,rb:0}),k=[{label:"\u9762\u677F\u653B\u51FB",name:"w",step:1,align:"right"},{label:"\u9B42\u77F3\u653B\u51FB",name:"a",step:1},{label:"\u8BCD\u6761\u653B\u51FB%",name:"c",step:1},{label:"\u661F\u4E4B\u6676\u653B\u51FB",name:"x",step:1}],D=[{label:"\u6C14\u8840",name:"hp",step:1},{label:"\u9632\u5FA1",name:"def",step:1},{label:"\u9632\u5FA1\u4FEE\u6B63%",name:"defGain",step:1},{label:"A\u7C7B\u514D\u4F24%",name:"ra",step:1},{label:"B\u7C7B\u514D\u4F24%",name:"rb",step:1}],r=()=>{const y=n.value.c/100;n.value.g=Math.ceil(d.a+n.value.w*y+n.value.x),b.value.att=n.value.w+n.value.g},h=async()=>{t("update:data",e.data)},V=(y,m)=>{m==="panel"&&r(),h()},O=(y,m)=>{const u=e.data.items;!u||(u[m]=y,h())},p=()=>{const y=e.data.items;!y||(y.push(Oe()),h())},A=y=>{const m=e.data.items;!m||(m.splice(y,1),h())},K=y=>{const m=e.data.items;if(!m)return;const u=m[y],B=m[y-1];m[y-1]=u,m[y]=B,h()},G=y=>{const m=e.data.items;if(!m)return;const u=m[y],B=m[y+1];m[y+1]=u,m[y]=B,h()},F=y=>{const m=e.data.items;if(!m)return;const u=m[y];m.push(re.cloneDeep(u)),h()};return Pe(()=>[e.data.basic.w],()=>{r()}),{panel:n,state:b,enemyState:_,panelResult:d,enemyStateResult:w,panelModels:k,enemyModels:D,update:V,items:v,updateItemState:O,addItem:p,delItem:A,upItem:K,downItem:G,copyItem:F}}}),ne=e=>(pe("data-v-793a869e"),e=e(),ve(),e),vs=ne(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u57FA\u672C\u53C2\u6570")],-1)),ms={class:"row"},fs={class:"label"},_s={class:"input-group"},hs=["step","onUpdate:modelValue","onChange"],bs=["value"],$s={class:"col-item"},ys=ne(()=>s("div",{class:"label"},"\u8FDB\u56FE\u653B\u51FB",-1)),Fs={class:"static-control text-center"},Cs={class:"darkgold"},gs={class:"col-item"},Bs=ne(()=>s("div",{class:"label"},"\u514B\u5236%",-1)),ws=H(" \u514B\u523630%"),ks=ne(()=>s("br",null,null,-1)),Ds=H("\u88AB\u514B\u5236-25%"),Es=ne(()=>s("br",null,null,-1)),Ss=H("\u6FC0\u836150% "),Us=["onClick"],Is=ne(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u654C\u4EBA\u9762\u677F")],-1)),Ms={class:"row"},As={class:"label"},Vs={class:"input-group"},Ps={key:0,class:"input-ext"},qs={class:"heading"},Ts=ne(()=>s("div",{class:"heading-title"},"\u6280\u80FD\u6A21\u677F",-1)),Ns={class:"heading-actions"};function Rs(e,t,n,b,_,v){const d=I("CalcInput"),w=I("Tooltip"),k=I("Dropdown"),D=I("CalcItem");return f(),$("div",null,[vs,s("div",ms,[(f(!0),$(q,null,N(e.panelModels,r=>(f(),$("div",{class:"col-item",key:r.name},[s("div",fs,U(r.label),1),s("div",_s,[r.name in e.panelResult?(f(),ie(d,{key:0,modelValue:e.panel[r.name],"onUpdate:modelValue":h=>e.panel[r.name]=h,result:e.panelResult[r.name],"onUpdate:result":h=>e.panelResult[r.name]=h,onChange:h=>e.update(r.name,"panel")},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"])):T((f(),$("input",{key:1,type:"number",class:"input",style:Be({textAlign:r.align}),min:"0",step:r.step,"onUpdate:modelValue":h=>e.panel[r.name]=h,onChange:h=>e.update(r.name,"panel")},null,44,hs)),[[se,e.panel[r.name],void 0,{number:!0}]]),r.name==="w"?(f(),$("input",{key:2,class:"input green",readonly:"",style:{textAlign:"left"},value:`+${e.panel.g}`},null,8,bs)):X("",!0)])]))),128)),s("div",$s,[ys,s("div",Fs,[s("span",Cs,U(e.state.att),1)])]),s("div",gs,[a(w,{dir:"top"},{label:c(()=>[Bs]),default:c(()=>[ws,ks,Ds,Es,Ss]),_:1}),s("div",null,[a(k,null,{popover:c(({onClose:r})=>[s("div",{class:"list",onClick:()=>{r(),e.update("k","state")}},[s("div",{class:"list-item",onClick:t[2]||(t[2]=h=>e.state.k=0)},"\u666E\u901A"),s("div",{class:"list-item",onClick:t[3]||(t[3]=h=>e.state.k=30)},"\u514B\u5236"),s("div",{class:"list-item",onClick:t[4]||(t[4]=h=>e.state.k=-25)},"\u88AB\u514B\u5236"),s("div",{class:"list-item",onClick:t[5]||(t[5]=h=>e.state.k=50)},"\u6FC0\u8361")],8,Us)]),default:c(()=>[T(s("input",{class:"input",type:"number","onUpdate:modelValue":t[0]||(t[0]=r=>e.state.k=r),onChange:t[1]||(t[1]=r=>e.update("k","state")),list:"d1"},null,544),[[se,e.state.k,void 0,{number:!0}]])]),_:1})])])]),Is,s("div",Ms,[(f(!0),$(q,null,N(e.enemyModels,r=>(f(),$("div",{class:"col-item",key:r.name},[s("div",As,U(r.label),1),s("div",Vs,[a(d,{modelValue:e.enemyState[r.name],"onUpdate:modelValue":h=>e.enemyState[r.name]=h,result:e.enemyStateResult[r.name],"onUpdate:result":h=>e.enemyStateResult[r.name]=h,onChange:h=>e.update(r.name)},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"]),r.precent?(f(),$("div",Ps,"%")):X("",!0)])]))),128))]),s("div",qs,[Ts,s("div",Ns,[s("div",{class:"btn btn-primary btn-sm",onClick:t[6]||(t[6]=(...r)=>e.addItem&&e.addItem(...r))},"\u6DFB\u52A0")])]),(f(!0),$(q,null,N(e.items,(r,h)=>(f(),ie(D,{key:r,panel:e.panel,state:e.state,enemyState:e.enemyStateResult,itemState:r,showUp:h>0,showDown:e.items&&h<e.items.length-1,"onUpdate:itemState":V=>e.updateItemState(V,h),onClose:V=>e.delItem(h),onUp:V=>e.upItem(h),onDown:V=>e.downItem(h),onCopy:V=>e.copyItem(h)},null,8,["panel","state","enemyState","itemState","showUp","showDown","onUpdate:itemState","onClose","onUp","onDown","onCopy"]))),128))])}var Hs=J(ps,[["render",Rs],["__scopeId","data-v-793a869e"]]);const Os=Q({props:{show:Boolean,list:Array,class:String,height:String},emits:["click","close","update:show"],setup(e,{emit:t}){return{wrapClass:E(()=>["c-action-sheet-wrapper",e.class,{show:e.show}]),onClick:(v,d)=>{t("click",{item:v,index:d}),t("close",!1)},onClose:()=>{t("update:show",!1),t("close",!1)}}}}),js={class:"c-action-sheet-section"},Ks={class:"c-action-sheet-extra"},Gs={class:"c-action-sheet-list"},Qs=["onClick"];function Js(e,t,n,b,_,v){return f(),ie(nt,{to:"body"},[s("div",{class:ue(e.wrapClass)},[s("div",{class:"c-action-sheet-mask",onClick:t[0]||(t[0]=(...d)=>e.onClose&&e.onClose(...d))}),s("div",js,[s("div",{class:"c-action-sheet-body",style:Be({maxHeight:e.height})},[s("div",Ks,[j(e.$slots,"extra")]),s("div",Gs,[(f(!0),$(q,null,N(e.list,(d,w)=>(f(),$("div",{class:"c-action-sheet-item",key:w,onClick:k=>e.onClick(d,w)},[j(e.$slots,"default",{record:d})],8,Qs))),128))])],4)])],2)])}var ge=J(Os,[["render",Js]]);ge.install=e=>{e.component("action-sheet",ge)};const zs={class:"hero-item"},Ws=["src","alt","title"],Ls={class:"hero-item-label"},Xs=Q({props:{show:{type:Boolean}},emits:["click","update:show"],setup(e,{emit:t}){const{heroes:n,getHeroIcon:b}=pt(),_=v=>{t("click",v)};return(v,d)=>(f(),ie(l(ge),{class:"hero-select",show:e.show,list:l(n),height:"80vh",onClick:_,"onUpdate:show":d[0]||(d[0]=w=>v.$emit("update:show",w))},{extra:c(()=>[j(v.$slots,"extra")]),default:c(({record:w})=>[s("div",zs,[s("img",{src:l(b)(w),alt:w.name,title:w.name,width:"128",height:"128"},null,8,Ws),s("div",Ls,U(w.name),1)])]),_:3},8,["show","list"]))}});const Ys=Q({props:{header:String,activeKey:Boolean},emits:["update:activeKey","toggle"],setup(e,{emit:t}){const n=E({get:()=>e.activeKey,set:_=>{t("update:activeKey",_)}});return{active:n,toggle:()=>{const _=!n.value;n.value=_,t("toggle",_)}}}}),Zs=e=>(pe("data-v-2b5ca870"),e=e(),ve(),e),xs=Zs(()=>s("div",{class:"panel-icon"},[s("svg",{width:"16",height:"16",viewBox:"-16 -16 32 32"},[s("path",{d:"M6 0 l-12 -12 l0 2 l10 10 l-10 10 l0 2 l12 -12z",fill:"currentColor"})])],-1)),en={class:"panel-title"},tn={class:"panel-body"},sn={class:"panel-content"};function nn(e,t,n,b,_,v){return f(),$("div",{class:ue(["panel",{active:e.active}])},[s("div",{class:"panel-header",onClick:t[1]||(t[1]=(...d)=>e.toggle&&e.toggle(...d))},[xs,s("div",en,[j(e.$slots,"header",{},()=>[H(U(e.header)+"\xA0",1)],!0)]),s("div",{class:"panel-actions",onClick:t[0]||(t[0]=le(()=>{},["stop"]))},[j(e.$slots,"actions",{},void 0,!0)])]),s("div",tn,[s("div",sn,[j(e.$slots,"default",{},void 0,!0)])])],2)}var an=J(Ys,[["render",nn],["__scopeId","data-v-2b5ca870"]]);function on(){const e="red_team",t=at(),n=R([]),b=async k=>await t.put(e,k).then(D=>{if(n.value.findIndex(r=>r._id===D)===-1){const r=re.cloneDeep(k);r._id=D,n.value.push(r)}return D}),_=async k=>await t.delete(e,k._id).then(()=>{n.value=n.value.filter(D=>D._id!==k._id)}),v=async k=>{const D=JSON.parse(await k.text());if(!Re(D)||D.type!=="red_team"){alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}const r=D.data;for(const h of r)await b(h)},d=async()=>{const k={type:"red_team",data:n.value},D=new Blob([JSON.stringify(k)],{type:"application/json"});Ce(D,"red_team.json")};return(async()=>{const k=await t.getAll(e).catch(()=>[]);console.log(k),n.value=k})(),{put:b,del:_,list:n,importData:v,exportData:d}}function ln(){const e=()=>({name:"",qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,stoneName:"",hsQixue:0,hsPatt:0,hsPdef:0,hsMatt:0,hsMdef:0,hsHuixin:0,xQixue:0,xPatt:0,xPdef:0,xMatt:0,xMdef:0,xHuixin:0,cQixue:"40+5+5+5",cPatt:"0",cPdef:"0",cMatt:"0",cMdef:"0",cHuixin:"0",rQixue:0,rPatt:0,rPdef:0,rMatt:0,rMdef:0,rHuixin:0}),t=R(e()),n=E(()=>{const v={qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0},d=He.find(k=>t.value.stoneName===k.name);d&&(v.qixue=d.t[0]+d.d[0]+d.h[0],v.patt=d.t[1]+d.d[1]+d.h[1],v.matt=d.t[2]+d.d[2]+d.h[2],v.pdef=d.t[3]+d.d[3]+d.h[3],v.mdef=d.t[4]+d.d[4]+d.h[4]);const w={qixue:t.value.hsQixue/100,patt:t.value.hsPatt/100,pdef:t.value.hsPdef/100,matt:t.value.hsMatt/100,mdef:t.value.hsMdef/100,huixin:t.value.hsHuixin/100};return{qixue:Math.round(t.value.qixue*w.qixue+v.qixue+t.value.xQixue),patt:Math.round(t.value.patt*w.patt+v.patt+t.value.xPatt),pdef:Math.round(t.value.pdef*w.pdef+v.pdef+t.value.xPdef),matt:Math.round(t.value.matt*w.matt+v.matt+t.value.xMatt),mdef:Math.round(t.value.mdef*w.mdef+v.mdef+t.value.xMdef),huixin:Math.round(t.value.huixin*w.huixin+v.huixin+t.value.xHuixin)}}),b=E(()=>{const v=n.value,d={qixue:(100+t.value.rQixue)/100,patt:(100+t.value.rPatt)/100,pdef:(100+t.value.rPdef)/100,matt:(100+t.value.rMatt)/100,mdef:(100+t.value.rMdef)/100,huixin:(100+t.value.rHuixin)/100};return{qixue:Math.round((t.value.qixue+v.qixue)*d.qixue),patt:Math.round((t.value.patt+v.patt)*d.patt),pdef:Math.round((t.value.pdef+v.pdef)*d.pdef),matt:Math.round((t.value.matt+v.matt)*d.matt),mdef:Math.round((t.value.mdef+v.mdef)*d.mdef),huixin:Math.round((t.value.huixin+v.huixin)*d.huixin)}});return{state:t,pValue:n,ckValue:b,reset:()=>{t.value=e()},defState:e}}const un={},dn={class:"c-upload"};function rn(e,t){return f(),$("div",dn,[j(e.$slots,"default",{},void 0,!0),s("input",ot({type:"file",class:"c-upload-input",accept:"application/json"},e.$attrs),null,16)])}var cn=J(un,[["render",rn],["__scopeId","data-v-07d1ead0"]]);const S=e=>(pe("data-v-52a891a8"),e=e(),ve(),e),pn={class:"transform-tools-popover"},vn={class:"transform-tools-popover-toolbar"},mn=["value"],fn=["value"],_n=S(()=>s("button",{class:"btn btn-sm btn-success"},"\u5BFC\u5165",-1)),hn={class:"transform-tools-popover-content"},bn={class:"grid-group"},$n={class:"grid-group-item"},yn={class:"input-group-title"},Fn=S(()=>s("span",null,"\u57FA\u7840",-1)),Cn={class:"grids"},gn=S(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),Bn=S(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),wn=S(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),kn=S(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),Dn=S(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),En=S(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),Sn={class:"grid-group-item"},Un={class:"input-group-title"},In=S(()=>s("span",null,"\u9B42\u77F3",-1)),Mn=S(()=>s("option",{value:""},"\u65E0",-1)),An=["value"],Vn={class:"grids"},Pn=S(()=>s("label",{class:"input-label"},"\u6C14\u8840%",-1)),qn=S(()=>s("label",{class:"input-label"},"\u7269\u653B%",-1)),Tn=S(()=>s("label",{class:"input-label"},"\u7269\u9632%",-1)),Nn=S(()=>s("label",{class:"input-label"},"\u6CD5\u653B%",-1)),Rn=S(()=>s("label",{class:"input-label"},"\u6CD5\u9632%",-1)),Hn={class:"grid-group-item"},On={class:"input-group-title"},jn=H(" \u661F\u4E4B\u6676 "),Kn=S(()=>s("div",null,"\u6781\u9650\u653B\uFF1A202\u653B\uFF0C198\u8840\uFF0C70\u9632",-1)),Gn=S(()=>s("div",null,"\u6781\u9650\u8840\uFF1A456\u8840\uFF0C98\u9632",-1)),Qn=S(()=>s("div",null,"\u6781\u9650\u9632\uFF1A150\u9632\uFF0C198\u8840\uFF0C88\u653B",-1)),Jn={class:"grids"},zn=S(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),Wn=S(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),Ln=S(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),Xn=S(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),Yn=S(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),Zn=S(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),xn={class:"grid-group-item"},ea=S(()=>s("div",{class:"input-group-title"},"\u9762\u677F",-1)),ta={class:"grids"},sa={class:"input-label"},na={class:"input-group"},aa={class:"input green"},oa={class:"grid-group-item"},la=S(()=>s("div",{class:"input-group-title"},"\u4FEE\u6B63",-1)),ua={class:"grids"},ia={class:"input-label"},da={class:"grid-group-item"},ra=S(()=>s("div",{class:"input-group-title"},"\u53C2\u8003",-1)),ca={class:"grids"},pa={class:"input-label"},va=["value"],ma=Q({props:{show:{type:Boolean}},emits:["init","reference","update:show"],setup(e,{emit:t}){const{state:n,pValue:b,ckValue:_,reset:v,defState:d}=ln(),{list:w,put:k,del:D,importData:r,exportData:h}=on(),V=[{t:"\u6C14\u8840",n:"qixue"},{t:"\u7269\u653B",n:"patt"},{t:"\u7269\u9632",n:"pdef"},{t:"\u6CD5\u653B",n:"matt"},{t:"\u6CD5\u9632",n:"mdef"},{t:"\u4F1A\u5FC3",n:"huixin"}],O=[{t:"\u6C14\u8840%",c:"cQixue",r:"rQixue"},{t:"\u7269\u653B%",c:"cPatt",r:"rPatt"},{t:"\u7269\u9632%",c:"cPdef",r:"rPdef"},{t:"\u6CD5\u653B%",c:"cMatt",r:"rMatt"},{t:"\u6CD5\u9632%",c:"cMdef",r:"rMdef"},{t:"\u4F1A\u5FC3%",c:"cHuixin",r:"rHuixin"}],p=()=>{const m=re.cloneDeep(n.value);k(m).then(u=>{n.value._id=u}).catch(()=>{alert("\u4FDD\u5B58\u5931\u8D25")})},A=()=>{!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F")||D(n.value).then(()=>{v()}).catch(()=>{alert("\u5220\u9664\u5931\u8D25")})},K=m=>{const u=m.currentTarget,B=Array.prototype.slice.call(u.files);u.value="",B[0]&&r(B[0])},G=()=>{h()},F=(m,u)=>{n.value=re.cloneDeep(n.value),delete n.value._id,n.value.name=m,n.value.qixue=u.qixue,n.value.patt=u.patt,n.value.pdef=u.pdef,n.value.matt=u.matt,n.value.mdef=u.mdef,n.value.huixin=u.huixin},y=()=>{t("reference")};return t("init",F),(m,u)=>{const B=I("c-space"),z=I("c-col"),Z=I("c-row");return T((f(),$("div",pn,[s("div",vn,[a(Z,{flex:"",middle:"",gutter:0},{default:c(()=>[a(z,{flex:"1 1 auto"},{default:c(()=>[a(B,null,{default:c(()=>[s("button",{class:"btn btn-sm btn-link",onClick:y}," \u53C2\u8003 "),T(s("select",{class:"input input-select",placeholder:"\u8BF7\u9009\u62E9\u5DF2\u6709\u6A21\u677F","onUpdate:modelValue":u[0]||(u[0]=i=>ut(n)?n.value=i:null)},[s("option",{value:l(d)()},"\u7A7A\u6A21\u7248",8,mn),(f(!0),$(q,null,N(l(w),i=>(f(),$("option",{key:i._id,value:i},U(i.name),9,fn))),128))],512),[[Ie,l(n)]]),s("button",{class:"btn btn-sm btn-primary",onClick:p},"\u4FDD\u5B58"),l(n)._id?(f(),$("button",{key:0,class:"btn btn-sm btn-danger",onClick:A}," \u5220\u9664 ")):X("",!0),a(cn,{onInput:K},{default:c(()=>[_n]),_:1}),s("button",{class:"btn btn-sm btn-success",onClick:G}," \u5BFC\u51FA ")]),_:1})]),_:1}),a(z,null,{default:c(()=>[s("span",{class:"transform-tools-popover-close",onClick:u[1]||(u[1]=i=>t("update:show",!1))}," \xD7 ")]),_:1})]),_:1})]),s("div",hn,[s("div",bn,[s("div",$n,[s("div",yn,[a(B,null,{default:c(()=>[Fn,T(s("input",{type:"text",class:"input input-text","onUpdate:modelValue":u[2]||(u[2]=i=>l(n).name=i)},null,512),[[se,l(n).name]])]),_:1})]),s("div",Cn,[a(B,null,{default:c(()=>[gn,a(l(P),{value:l(n).qixue,"onUpdate:value":u[3]||(u[3]=i=>l(n).qixue=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Bn,a(l(P),{value:l(n).patt,"onUpdate:value":u[4]||(u[4]=i=>l(n).patt=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[wn,a(l(P),{value:l(n).pdef,"onUpdate:value":u[5]||(u[5]=i=>l(n).pdef=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[kn,a(l(P),{value:l(n).matt,"onUpdate:value":u[6]||(u[6]=i=>l(n).matt=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Dn,a(l(P),{value:l(n).mdef,"onUpdate:value":u[7]||(u[7]=i=>l(n).mdef=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[En,a(l(P),{value:l(n).huixin,"onUpdate:value":u[8]||(u[8]=i=>l(n).huixin=i)},null,8,["value"])]),_:1})])]),s("div",Sn,[s("div",Un,[a(B,null,{default:c(()=>[In,T(s("select",{class:"input input-select","onUpdate:modelValue":u[9]||(u[9]=i=>l(n).stoneName=i)},[Mn,(f(!0),$(q,null,N(l(He),(i,x)=>(f(),$("option",{key:x,value:i.name},U(i.name),9,An))),128))],512),[[Ie,l(n).stoneName]])]),_:1})]),s("div",Vn,[a(B,null,{default:c(()=>[Pn,a(l(P),{value:l(n).hsQixue,"onUpdate:value":u[10]||(u[10]=i=>l(n).hsQixue=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[qn,a(l(P),{value:l(n).hsPatt,"onUpdate:value":u[11]||(u[11]=i=>l(n).hsPatt=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Tn,a(l(P),{value:l(n).hsPdef,"onUpdate:value":u[12]||(u[12]=i=>l(n).hsPdef=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Nn,a(l(P),{value:l(n).hsMatt,"onUpdate:value":u[13]||(u[13]=i=>l(n).hsMatt=i)},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Rn,a(l(P),{value:l(n).hsMdef,"onUpdate:value":u[14]||(u[14]=i=>l(n).hsMdef=i)},null,8,["value"])]),_:1})])]),s("div",Hn,[s("div",On,[jn,a(l(ke),{label:"?",inline:"",dir:"right"},{default:c(()=>[Kn,Gn,Qn]),_:1})]),s("div",Jn,[a(B,null,{default:c(()=>[zn,a(l(P),{value:l(n).xQixue,"onUpdate:value":u[15]||(u[15]=i=>l(n).xQixue=i),min:0,max:456,placeholder:"0~456"},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Wn,a(l(P),{value:l(n).xPatt,"onUpdate:value":u[16]||(u[16]=i=>l(n).xPatt=i),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Ln,a(l(P),{value:l(n).xPdef,"onUpdate:value":u[17]||(u[17]=i=>l(n).xPdef=i),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Xn,a(l(P),{value:l(n).xMatt,"onUpdate:value":u[18]||(u[18]=i=>l(n).xMatt=i),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Yn,a(l(P),{value:l(n).xMdef,"onUpdate:value":u[19]||(u[19]=i=>l(n).xMdef=i),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),a(B,null,{default:c(()=>[Zn,a(l(P),{value:l(n).xHuixin,"onUpdate:value":u[20]||(u[20]=i=>l(n).xHuixin=i),min:0,max:104,placeholder:"0~104"},null,8,["value"])]),_:1})])]),s("div",xn,[ea,s("div",ta,[(f(),$(q,null,N(V,i=>a(B,{key:i.n},{default:c(()=>[s("label",sa,U(i.t),1),s("div",na,[a(l(P),{readonly:"",value:l(n)[i.n]},null,8,["value"]),s("div",aa,"+"+U(l(b)[i.n]),1)])]),_:2},1024)),64))])]),s("div",oa,[la,s("div",ua,[(f(),$(q,null,N(O,(i,x)=>a(B,{key:x},{default:c(()=>[s("label",ia,U(i.t),1),a(l(we),{modelValue:l(n)[i.c],"onUpdate:modelValue":ee=>l(n)[i.c]=ee,result:l(n)[i.r],"onUpdate:result":ee=>l(n)[i.r]=ee},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])]),_:2},1024)),64))])]),s("div",da,[ra,s("div",ca,[(f(),$(q,null,N(V,i=>a(B,{key:i.n},{default:c(()=>[s("label",pa,U(i.t),1),s("input",{class:"input",readonly:"",value:l(_)[i.n]},null,8,va)]),_:2},1024)),64))])])])])],512)),[[lt,e.show]])}}});var fa=J(ma,[["__scopeId","data-v-52a891a8"]]);const _a=Q({components:{Calculator:Hs,CollapsePanel:an,InputNumber:vt,HeroSelect:Xs,IconCopy:qe,IconEdit:it,TransformToolsModal:fa},setup(){const e=L({index:-1,title:"",selecteds:[]}),t=R([]),n=async()=>{const o={id:Ae(),title:"\u6A21\u677F",basic:$t(),state:Ft(),enemyState:Bt(),items:gt()};await bt(o),t.value.push(o)},b=async g=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const C=t.value[g];await Ve(C.id),t.value.splice(g,1)},_=async g=>{const o=t.value[g];if(!o)return;const C=e.title;if(!C){v();return}o.title=C,v(),await de(o)},v=()=>{e.index=-1,e.title=""},d=g=>{const o={type:"calculator",data:[g]},C=new Blob([JSON.stringify(o)],{type:"application/json"});Ce(C,`${g.title}.json`)},w=async g=>{t.value=g},k=R(""),D=g=>new Promise((o,C)=>{const M=new FileReader;M.onload=()=>{o(M.result)},M.onerror=()=>{C(M.error)},M.readAsText(g)}),r=async()=>{if(!!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F")){if(e.selecteds.length>0){const o=e.selecteds.map(C=>t.value[C]);for(const C of o)await Ve(C.id)}else await ht();fe()}},h=async g=>{const o=g.currentTarget,C=Array.prototype.slice.call(o.files);if(o.value="",!C||!C[0])return;const M=C[0],W=await D(M),te=JSON.parse(W);let ae=[];if(ct(te))ae=te;else if(Re(te)&&te.type==="calculator")ae=te.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}for(const oe of ae){await de(oe);const _e=t.value.findIndex(ye=>ye.id===oe.id);_e===-1?t.value.push(oe):t.value[_e]=oe}},V=async()=>{let g="calculator.json",o=t.value;e.selecteds.length>0&&(o=e.selecteds.map(W=>t.value[W]),g="calculator-selected.json");const C={type:"calculator",data:o},M=new Blob([JSON.stringify(C)],{type:"application/json"});Ce(M,g)};async function O(g,o){!t.value[o]||(t.value[o]=g,await de(g))}const p=R(-1),A=L({input:"2283/1.35*1.39",result:0}),{translate:K,xinhun:G,xinyao:F,huazhen:y}=mt(),m=g=>Math.ceil(g),u=L({show:!1}),B=g=>{const o=K(g);z.value&&z.value(g.name,o)},z=R(),Z=R(!1),i=R(-1),x=R(null),ee=g=>{Z.value=!0,i.value=g},be=({item:g})=>{Z.value=!1;const o=i.value;if(o===-1)B(g);else{const M=t.value[o],W=K(g);M.title==="\u6A21\u677F"&&(M.title=g.name),M.basic.w=Math.max(W.patt,W.matt),de(M)}},$e=g=>{const o=re.cloneDeep(g);o.id=Ae(),console.log(o),t.value.push(o),de(o)};async function fe(){const g=await _t();e.selecteds=[],w(g)}return dt(()=>{fe()}),{vars:e,activeKey:p,quick:A,list:t,add:n,rename:_,renameClose:v,remove:b,itemExport:d,download:k,onUpdateData:O,clearAll:r,importData:h,exportData:V,heroes:rt,max:Math.max,modal:u,ceilResult:m,selectTpl:B,updateBasic:z,selectShow:Z,selectIndex:i,selectValue:x,openSelect:ee,selectHero:be,copyItem:$e,xinhun:G,xinyao:F,huazhen:y}}}),me=e=>(pe("data-v-285ba97e"),e=e(),ve(),e),ha={class:"wrapper"},ba={class:"toolbar"},$a={style:{padding:"6px 16px"}},ya=H("\u4F24\u5BB3\u8BA1\u7B97\u5668"),Fa={class:"c-upload"},Ca=me(()=>s("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),ga={style:{padding:"6px 16px"}},Ba={class:"input-group"},wa=me(()=>s("div",{class:"input-ext"},"=",-1)),ka={class:"content"},Da={class:"container"},Ea=["value"],Sa=H(" \u2007 "),Ua=["onKeypress"],Ia={key:1},Ma=["onClick"],Aa=["onClick"],Va=["onClick"],Pa=H(" \u91CD\u547D\u540D "),qa=["onClick"],Ta=H(" \u590D\u5236 "),Na=["onClick"],Ra=["onClick"],Ha={style:{"text-align":"center"}},Oa=me(()=>s("span",null,"\u661F\u8000",-1)),ja=me(()=>s("span",null,"\u5316\u81FB",-1)),Ka=me(()=>s("span",null,"\u661F\u9B42",-1));function Ga(e,t,n,b,_,v){const d=I("c-col"),w=I("c-row"),k=I("transform-tools-modal"),D=I("calc-input"),r=I("input-number"),h=I("IconEdit"),V=I("IconCopy"),O=I("Calculator",!0),p=I("CollapsePanel"),A=I("c-space"),K=I("HeroSelect"),G=Te("autofocus");return f(),$("div",ha,[s("div",ba,[s("div",$a,[a(w,{flex:"",middle:"",gutter:16},{default:c(()=>[a(d,{flex:"0 0 auto"},{default:c(()=>[ya]),_:1}),a(d,{flex:"0 0 auto"},{default:c(()=>[s("button",{class:"btn btn-sm btn-link",onClick:t[0]||(t[0]=F=>e.modal.show=!e.modal.show)}," \u9762\u677F "),e.vars.selecteds.length>0?(f(),$("button",{key:0,class:"btn btn-success",onClick:t[1]||(t[1]=F=>e.vars.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):X("",!0)]),_:1}),a(d,{flex:"1 1 0"}),a(d,{flex:"0 0 auto"},{default:c(()=>[s("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...F)=>e.clearAll&&e.clearAll(...F))},U(e.vars.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),s("div",Fa,[Ca,s("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:t[3]||(t[3]=(...F)=>e.importData&&e.importData(...F))},null,32)]),s("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...F)=>e.exportData&&e.exportData(...F))},U(e.vars.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),s("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=F=>e.add())},"\u6DFB\u52A0")]),_:1})]),_:1}),a(k,{show:e.modal.show,"onUpdate:show":t[6]||(t[6]=F=>e.modal.show=F),onReference:t[7]||(t[7]=F=>e.openSelect(-1)),onInit:t[8]||(t[8]=F=>e.updateBasic=F)},null,8,["show"])]),s("div",ga,[s("div",Ba,[a(D,{modelValue:e.quick.input,"onUpdate:modelValue":t[9]||(t[9]=F=>e.quick.input=F),result:e.quick.result,"onUpdate:result":t[10]||(t[10]=F=>e.quick.result=F),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),wa,a(r,{readonly:"",value:e.ceilResult(e.quick.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),s("div",ka,[s("div",Da,[(f(!0),$(q,null,N(e.list,(F,y)=>(f(),ie(p,{key:F.id,activeKey:y===e.activeKey,onToggle:m=>e.activeKey=m?y:-1},{header:c(()=>[a(w,{flex:"",middle:""},{default:c(()=>[a(d,null,{default:c(()=>[T(s("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=m=>e.vars.selecteds=m),value:y,onClick:t[12]||(t[12]=le(()=>{},["stop"]))},null,8,Ea),[[he,e.vars.selecteds]]),Sa]),_:2},1024),a(d,null,{default:c(()=>[e.vars.index===y?T((f(),$("input",{key:0,type:"text",class:"input","onUpdate:modelValue":t[13]||(t[13]=m=>e.vars.title=m),onClick:t[14]||(t[14]=le(()=>{},["stop"])),onKeypress:Ne(m=>e.rename(y),["enter"])},null,40,Ua)),[[se,e.vars.title],[G]]):(f(),$("span",Ia,U(F.title),1))]),_:2},1024),a(d,{class:"ml-4",onClick:t[15]||(t[15]=le(()=>{},["stop"]))},{default:c(()=>[e.vars.index===y?(f(),$("button",{key:0,class:"btn btn-sm btn-link",onClick:m=>e.rename(y)}," \u786E\u8BA4 ",8,Ma)):(f(),$(q,{key:1},[s("button",{class:"btn btn-sm btn-link",onClick:m=>e.openSelect(y)}," \u9009\u62E9 ",8,Aa),s("button",{class:"btn btn-sm btn-link",onClick:m=>{e.vars.index=y,e.vars.title=F.title}},[a(h,{class:"svg-icon"}),Pa],8,Va),s("button",{class:"btn btn-sm btn-link",onClick:m=>e.copyItem(F)},[a(V,{class:"svg-icon"}),Ta],8,qa)],64))]),_:2},1024)]),_:2},1024)]),actions:c(()=>[s("button",{class:"btn btn-sm btn-success-outline",onClick:m=>e.itemExport(F)}," \u5BFC\u51FA ",8,Na),s("button",{class:"btn btn-sm btn-danger-outline",onClick:m=>e.remove(y)}," \u5220\u9664 ",8,Ra)]),default:c(()=>[y===e.activeKey?(f(),ie(O,{key:0,data:F,"onUpdate:data":m=>e.onUpdateData(m,y)},null,8,["data","onUpdate:data"])):X("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),a(K,{show:e.selectShow,"onUpdate:show":t[19]||(t[19]=F=>e.selectShow=F),onClick:e.selectHero},{extra:c(()=>[s("div",Ha,[a(A,null,{default:c(()=>[s("label",null,[Oa,T(s("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=F=>e.xinyao=F)},null,512),[[he,e.xinyao]])]),s("label",null,[ja,T(s("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=F=>e.huazhen=F)},null,512),[[he,e.huazhen]])]),s("label",null,[Ka,T(s("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=F=>e.xinhun=F)},null,512),[[he,e.xinhun]])])]),_:1})])]),_:1},8,["show","onClick"])])}var Ya=J(_a,[["render",Ga],["__scopeId","data-v-285ba97e"]]);export{Ya as default};
