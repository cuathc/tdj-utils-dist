import{_ as j,E as te,o as f,c as b,e,G as ee,H as se,I as ne,J as oe,K as nt,d as Z,s as K,L as Pt,M as L,f as S,j as dt,n as Dt,N as ae,O as Et,q as et,a as E,g as l,h as p,i as st,w as P,B as X,P as Bt,F as R,r as q,A as O,k as x,Q as Tt,p as ft,l as ht,R as le,S as it,b as ct,T as ue,U as o,V as ie,z as de,W as ce,X as mt,v as Vt,Y as V,Z as re,C as _t}from"./index.js";import{_ as gt}from"./lodash.js";import{u as pe}from"./useHeroes.js";import ve from"./InputNumber.js";import{b as Rt,d as wt,a as _e,i as me}from"./shared.js";import{s as Nt}from"./data.js";const fe=["width","height"],he=e("path",{d:"M13 16 l-10 -10 l3 -3 l10 10 l10 -10 l3 3 l-10 10 l10 10 l-3 3 l-10 -10 l-10 10 l-3 -3 z"},null,-1),be=[he];function $e(t,s,n,_,m,h){return f(),b("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},be,8,fe)}const ge=j(te,[["render",$e]]),Fe=["width","height"],ye=e("path",{d:"M16 3 l-14 14 l0 6 l14 -14 l14 14 l0 -6 l-14 -14 z"},null,-1),Ce=[ye];function Be(t,s,n,_,m,h){return f(),b("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},Ce,8,Fe)}const we=j(ee,[["render",Be]]),ke=["width","height"],De=e("path",{d:"M16 27 l-14 -14 l0 -6 l14 14 l14 -14 l0 6 l-14 14 z"},null,-1),Ee=[De];function Se(t,s,n,_,m,h){return f(),b("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},Ee,8,ke)}const Me=j(se,[["render",Se]]),Ue=["width","height"],Ae=e("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,-1),Ie=[Ae];function Ve(t,s,n,_,m,h){return f(),b("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24"},Ie,8,Ue)}const qt=j(ne,[["render",Ve]]),xe=["width","height"],He=e("path",{d:"M18 12.13V10H20V10.3C19.78 10.42 19.57 10.56 19.39 10.74L18 12.13M9.5 11C9.22 11 9 11.22 9 11.5V13H15V11.5C15 11.22 14.78 11 14.5 11H9.5M6 10H4V21H11V19.13L11.13 19H6V10M21 9H3V3H21V9M19 5H5V7H19V5M13 19.96V22H15.04L21.17 15.88L19.13 13.83L13 19.96M22.85 13.47L21.53 12.15C21.33 11.95 21 11.95 20.81 12.15L19.83 13.13L21.87 15.17L22.85 14.19C23.05 14 23.05 13.67 22.85 13.47Z"},null,-1),Pe=[He];function Te(t,s,n,_,m,h){return f(),b("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24"},Pe,8,xe)}const Re=j(oe,[["render",Te]]);let Ct=0,xt=0;const Ne=500;function Ht(){const t=Math.floor(new Date().getTime()/1e3);xt===t?Ct++:Ct=0,xt=t;const s=t.toString(16);return`${(Ne<<16|Ct&255).toString(16)}.${s}`}async function qe(){try{return await nt.getAll("calculator")}catch{return[]}}async function Oe(t){try{await nt.add("calculator",JSON.parse(JSON.stringify(t)))}catch(s){s instanceof Error?console.log(s.message):console.log(s)}}async function $t(t){try{await nt.put("calculator",JSON.parse(JSON.stringify(t)))}catch(s){s instanceof Error?console.log(s.message):console.log(s)}}async function je(t){try{await nt.delete("calculator",t)}catch(s){s instanceof Error?console.log(s.message):console.log(s)}}async function Ge(t){try{const _=(await nt.connect()).transaction("calculator","readwrite").objectStore("calculator");for(const m of t)await nt.wrap(_.put(m))}catch(s){s instanceof Error?console.log(s.message):console.log(s)}}async function Ke(t){try{const _=(await nt.connect()).transaction("calculator","readwrite").objectStore("calculator");for(const m of t)await nt.wrap(_.delete(m))}catch(s){s instanceof Error?console.log(s.message):console.log(s)}}function Le(){return{w:2438,g:0,a:"403+363",c:20,x:0}}function Qe(){return{a:0}}function Je(){return{att:0,k:0}}function Ot(){return{name:"1.5\u6280\u80FD",desc:"",a1:1.5,a2:0,att:"15+10+8",da:"10+10",db:"4+10+20",dc:"0",dx:"0",id:"0",cd:"30",att2:"0",da2:"0",dx2:"0",defGain:"0"}}function ze(){return{a1:1.5,a2:0,att:0,id:0,da:0,db:0,dc:0,dx:0,cd:0,att2:0,da2:0,dx2:0,defGain:0}}function We(){return[Ot()]}function Xe(){return{hp:"10000",def:"1872",defGain:"15+5",ra:"0",rb:"4+10"}}const Ze=Z({props:{active:Boolean,label:String,dir:String,inline:Boolean,color:String,wait:{type:Number,default:500}},emits:["update:active"],setup(t,{emit:s}){const n=K(),_=K({}),m=K(t.active),h=()=>{const c=n.value.getBoundingClientRect();switch(m.value=!0,s("update:active",m.value),t.dir){case"left":_.value={top:`${c.top+c.height/2}px`,right:`${window.innerWidth-c.left-4}px`,maxWidth:"100%"};break;case"right":_.value={top:`${c.top+c.height/2}px`,left:`${c.right+4}px`,maxWidth:"100%"};break;case"top":_.value={bottom:`${window.innerHeight-c.top-4}px`,left:`${c.left+c.width/2}px`,maxWidth:"100%"};break;default:_.value={top:`${c.bottom+4}px`,left:`${c.left+c.width/2}px`,maxWidth:"100%"}}};let r;const B=()=>{r=setTimeout(h,t.wait)},D=()=>{clearTimeout(r),m.value=!1,s("update:active",m.value)};return Pt(()=>t.active,U=>{m.value=U}),{el:n,style:_,tActive:m,onEnter:B,onOut:D}}});const Ye={class:"c-tooltip-label"};function ts(t,s,n,_,m,h){return f(),b("div",{ref:"el",class:dt(["c-tooltip",{active:t.tActive,inline:t.inline}]),onMouseenter:s[0]||(s[0]=(...r)=>t.onEnter&&t.onEnter(...r)),onMouseout:s[1]||(s[1]=(...r)=>t.onOut&&t.onOut(...r))},[L(t.$slots,"label",{},()=>[e("div",Ye,S(t.label),1)]),e("div",{class:dt(["c-tooltip-inner",t.dir?`c-tooltip-${t.dir}`:"c-tooltip-bottom",t.color?`c-tooltip-${t.color}`:""]),style:Dt(t.style)},[L(t.$slots,"default")],6)],34)}const St=j(Ze,[["render",ts]]),es=Z({components:{Divider:ae,Tooltip:St,CalcInput:Et,IconUp:we,IconDown:Me,IconClose:ge,IconCopy:qt},props:{panel:{type:Object,required:!0},state:{type:Object,required:!0},enemyState:{type:Object,required:!0},itemState:{type:Object,required:!0},showUp:Boolean,showDown:Boolean},emits:["update:itemState","close","up","down","copy"],setup(t,{emit:s}){const n=et({editor:!1,name:"",desc:{f:!1,v:""}}),_=(a,$)=>{if(a==="name")return;const A=t.itemState;switch(a){case"a1":case"a2":typeof $=="number"&&(A[a]=$);break;default:typeof $=="string"&&(A[a]=$)}s("update:itemState",A)},m=et(ze()),h=E({set:a=>_("a1",a),get:()=>t.itemState.a1}),r=E({set:a=>_("a2",a),get:()=>t.itemState.a2}),B=E({set:a=>_("att",a),get:()=>t.itemState.att}),D=E({set:a=>_("id",a),get:()=>t.itemState.id}),U=E({set:a=>_("da",a),get:()=>t.itemState.da}),c=E({set:a=>_("db",a),get:()=>t.itemState.db}),g=E({set:a=>_("dc",a),get:()=>t.itemState.dc}),H=E({set:a=>_("dx",a),get:()=>t.itemState.dx}),Q=E({set:a=>_("cd",a),get:()=>t.itemState.cd}),v=E({set:a=>_("att2",a),get:()=>t.itemState.att2}),I=E({set:a=>_("da2",a),get:()=>t.itemState.da2}),G=E({set:a=>_("dx2",a),get:()=>t.itemState.dx2}),Y=E({set:a=>_("defGain",a),get:()=>t.itemState.defGain}),z=et({a1:h,a2:r,att:B,da:U,db:c,dc:g,dx:H,id:D,cd:Q,att2:v,da2:I,dx2:G,defGain:Y}),w=E(()=>{const{state:a}=t,$=(100+m.att)/100;return Math.ceil(a.att*$)}),C=E(()=>{const{state:a}=t,$=(100+m.att+m.att2)/100;return Math.ceil(a.att*$)}),u=()=>{const{state:a,enemyState:$}=t,A=(100+a.k)/100,W=(100+m.da-$.ra)/100,at=(100+m.da+m.da2-$.ra)/100,y=(100+m.db-$.rb)/100,lt=(100+m.dc)/100,T=(100+m.dx)/100,Kt=(100+m.dx+m.dx2)/100,Mt=(100+m.cd)/100,Ut=(100-m.id)/100,Lt=(100+$.defGain)/100,Qt=(100+$.defGain+m.defGain)/100,Jt=Math.max(0,Math.max(0,$.def*Lt)*Ut),zt=Math.max(0,Math.max(0,$.def*Qt)*Ut),Wt=Math.max(1,w.value*A-Jt),Xt=Math.max(1,C.value*A-zt),At=Wt*h.value*W*y*T,Zt=Math.ceil(At*Mt),It=Xt*r.value*at*y*lt*Kt,Yt=Math.ceil(It*Mt);return{r01:Math.ceil(At),r01c:Zt,r02:Math.ceil(It),r02c:Yt}},N=E(()=>u().r01),k=E(()=>u().r01c),pt=E(()=>u().r02),d=E(()=>u().r02c);u();function J(){confirm(`\u786E\u8BA4\u8981\u5220\u9664\u6280\u80FD\u6A21\u677F"${t.itemState.name}"\u5417\uFF1F`)&&s("close")}function tt(){n.editor=!0,n.name=t.itemState.name}function bt(){const a=n.name;if(n.editor=!1,n.name="",!a)return;const $=t.itemState;$.name=a,s("update:itemState",$)}function Ft(){n.desc.f=!0,n.desc.v=t.itemState.desc}function yt(){const a=n.desc.v;if(n.desc.f=!1,n.desc.v="",!a)return;const $=t.itemState;$.desc=a,s("update:itemState",$)}function vt(){s("up")}function F(){s("down")}function i(){s("copy")}return{vars:n,values:z,result:m,satt:w,r01:N,r01c:k,r02:pt,r02c:d,onClose:J,onRename:tt,onNameEnter:bt,onEditDesc:Ft,onDescEnter:yt,onUp:vt,onDown:F,onCopy:i}}});const ot=t=>(ft("data-v-42477edf"),t=t(),ht(),t),ss={class:"row"},ns={class:"col-item"},os=ot(()=>e("div",{class:"label"},"\u6280\u80FD\u3001\u666E\u653B",-1)),as=O(" \u6280\u80FD\u3001\u666E\u653B\u500D\u7387 "),ls={class:"input-group"},us=["step"],is=ot(()=>e("div",{class:"input-ext"},"\u500D",-1)),ds={class:"label"},cs={class:"input-group"},rs=ot(()=>e("div",{style:{clear:"both"}},null,-1)),ps={class:"col-item"},vs=ot(()=>e("div",{class:"label"},"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB",-1)),_s=O(" \u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u500D\u7387 "),ms={class:"input-group"},fs=["step"],hs=ot(()=>e("div",{class:"input-ext"},"\u500D",-1)),bs={class:"label"},$s={class:"input-group"},gs={class:"col-item"},Fs=ot(()=>e("div",{class:"label"},"\u6700\u7EC8\u653B\u51FB",-1)),ys={class:"static-control text-center"},Cs={class:"darkgold"},Bs=ot(()=>e("div",{style:{clear:"both"}},null,-1)),ws={class:"label"},ks={class:"bold darkgold"},Ds=ot(()=>e("span",{class:"bold red"},"(\u66B4\u51FB)",-1)),Es={class:"static-control text-center"},Ss={class:"bold darkgold"},Ms={class:"bold red"},Us={class:"label bold"},As={class:"static-control text-center"},Is={class:"bold darkgold"},Vs={key:0,class:"bold red"};function xs(t,s,n,_,m,h){const r=x("IconCopy"),B=x("IconUp"),D=x("IconDown"),U=x("IconClose"),c=x("Divider"),g=x("Tooltip"),H=x("CalcInput"),Q=Tt("autofocus");return f(),b(R,null,[l(c,{orientation:"left"},{action:p(()=>[e("span",{onClick:s[8]||(s[8]=(...v)=>t.onCopy&&t.onCopy(...v))},[l(r,{class:"close"})]),t.showUp?(f(),b("span",{key:0,onClick:s[9]||(s[9]=(...v)=>t.onUp&&t.onUp(...v))},[l(B,{class:"close"})])):st("",!0),t.showDown?(f(),b("span",{key:1,onClick:s[10]||(s[10]=(...v)=>t.onDown&&t.onDown(...v))},[l(D,{class:"close"})])):st("",!0),e("span",{onClick:s[11]||(s[11]=(...v)=>t.onClose&&t.onClose(...v))},[l(U,{class:"close"})])]),default:p(()=>[t.vars.editor?P((f(),b("input",{key:0,class:"input",type:"text","onUpdate:modelValue":s[0]||(s[0]=v=>t.vars.name=v),onKeypress:s[1]||(s[1]=Bt((...v)=>t.onNameEnter&&t.onNameEnter(...v),["enter"])),onBlur:s[2]||(s[2]=(...v)=>t.onNameEnter&&t.onNameEnter(...v))},null,544)),[[X,t.vars.name],[Q]]):(f(),b("span",{key:1,class:"calc-item-title",onClick:s[3]||(s[3]=(...v)=>t.onRename&&t.onRename(...v))},S(t.itemState.name||"\u6A21\u677F"),1)),t.vars.desc.f?P((f(),b("input",{key:2,class:"input",type:"text","onUpdate:modelValue":s[4]||(s[4]=v=>t.vars.desc.v=v),onKeypress:s[5]||(s[5]=Bt((...v)=>t.onDescEnter&&t.onDescEnter(...v),["enter"])),onBlur:s[6]||(s[6]=(...v)=>t.onDescEnter&&t.onDescEnter(...v))},null,544)),[[X,t.vars.desc.v],[Q]]):(f(),b("span",{key:3,class:"calc-item-desc",onClick:s[7]||(s[7]=(...v)=>t.onEditDesc&&t.onEditDesc(...v))},S(t.itemState.desc||"\u6CA1\u6709\u63CF\u8FF0"),1))]),_:1}),e("div",ss,[e("div",ns,[l(g,{dir:"top"},{label:p(()=>[os]),default:p(()=>[as]),_:1}),e("div",ls,[P(e("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":s[12]||(s[12]=v=>t.values.a1=v)},null,8,us),[[X,t.values.a1,void 0,{number:!0}]]),is])]),(f(),b(R,null,q([{name:"att",label:"\u653B\u51FB%",tip:"\u4F5C\u7528\u4E8E\u6240\u6709\u60C5\u51B5"},{name:"da",label:"A\u7C7B\u589E\u4F24%",tip:"\u9970\u54C1\u3001\u5404\u7C7Bbuff\u3001\u5929\u8D4B"},{name:"db",label:"B\u7C7B\u589E\u4F24%",tip:"\u661F\u8000\u3001\u661F\u76D8\u3001\u8BCD\u6761"},{name:"dx",label:"X\u7C7B\u589E\u4F24%",tip:"\u6700\u7EC8\u4FEE\u6B63\uFF0C\u5982\u4E00\u5B57\u7535\u65A9"},{name:"id",label:"\u7A7F\u900F%",tip:"\u65E0\u89C6\u9632\u5FA1"},{name:"cd",label:"\u66B4\u4F24%",tip:"\u66B4\u51FB\u4F24\u5BB3"}],v=>e("div",{class:"col-item",key:v.name},[l(g,{dir:"top"},{label:p(()=>[e("div",ds,S(v.label),1)]),default:p(()=>[O(" "+S(v.tip),1)]),_:2},1024),e("div",cs,[l(H,{class:"input",modelValue:t.values[v.name],"onUpdate:modelValue":I=>t.values[v.name]=I,result:t.result[v.name],"onUpdate:result":I=>t.result[v.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),rs,e("div",ps,[l(g,{dir:"top"},{label:p(()=>[vs]),default:p(()=>[_s]),_:1}),e("div",ms,[P(e("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":s[13]||(s[13]=v=>t.values.a2=v)},null,8,fs),[[X,t.values.a2,void 0,{number:!0}]]),hs])]),(f(),b(R,null,q([{name:"dc",label:"C\u7C7B\u589E\u4F24%",tip:"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u589E\u4F24"},{name:"att2",label:"\u653B\u51FB\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u653B\u51FB\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"da2",label:"\u4F24\u5BB3\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u4F24\u5BB3\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"defGain",label:"\u9632\u5FA1\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"},{name:"dx2",label:"X\u7C7B\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"}],v=>e("div",{class:"col-item",key:v.name},[l(g,{dir:"top"},{label:p(()=>[e("div",bs,S(v.label),1)]),default:p(()=>[O(" "+S(v.tip),1)]),_:2},1024),e("div",$s,[l(H,{class:"input",modelValue:t.values[v.name],"onUpdate:modelValue":I=>t.values[v.name]=I,result:t.result[v.name],"onUpdate:result":I=>t.result[v.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),e("div",gs,[Fs,e("div",ys,[e("span",Cs,S(t.satt),1)])]),Bs,(f(!0),b(R,null,q([{label:"\u4E00\u6BB5\u4F24\u5BB3",v:t.r01,v2:t.r01c},{label:"\u4E8C\u6BB5\u4F24\u5BB3",v:t.r02,v2:t.r02c}],(v,I)=>(f(),b("div",{class:"col-item",key:I},[e("div",ws,[e("span",ks,S(v.label),1),Ds]),e("div",Es,[e("span",Ss,S(v.v),1),e("span",Ms,"("+S(v.v2)+")",1)])]))),128)),(f(!0),b(R,null,q([{label:"\u4E0D\u66B4\u51FB",value:t.r01+t.r02},{label:"\u4E00\u6BB5\u66B4\u51FB",value:t.r01c+t.r02},{label:"\u4E8C\u6BB5\u66B4\u51FB",value:t.r01+t.r02c},{label:"\u5168\u66B4\u51FB",value:t.r01c+t.r02c}],(v,I)=>(f(),b("div",{class:"col-item",key:I},[e("div",Us,S(v.label),1),e("div",As,[e("span",Is,S(v.value),1),(+t.enemyState.hp||0)<=v.value?(f(),b("span",Vs," \u51FB\u6740 ")):st("",!0)])]))),128))])],64)}const Hs=j(es,[["render",xs],["__scopeId","data-v-42477edf"]]),Ps=["onClick"],Ts=Z({__name:"dropdown",props:{pos:{default:"lt"}},setup(t){const s=K(!1),n=()=>{s.value=!0},_=()=>{s.value=!1};return window.addEventListener("click",_,!1),le(()=>{window.removeEventListener("click",_,!1)}),(m,h)=>(f(),b("div",{class:dt(["dropdown",[{active:s.value}]]),onClick:it(n,["stop"])},[L(m.$slots,"default",{},void 0,!0),e("div",{class:dt(["dropdown-popover",["dropdown-"+t.pos]]),onClick:h[0]||(h[0]=it(()=>{},["stop"]))},[L(m.$slots,"popover",{onClose:_},void 0,!0)],2)],10,Ps))}});const jt=j(Ts,[["__scopeId","data-v-3bf2fdb0"]]);jt.install=t=>{t.component("dropdown",Gt)};const Gt=jt,Rs=Z({components:{CalcItem:Hs,CalcInput:Et,Tooltip:St,Dropdown:Gt},props:{data:{type:Object,required:!0}},emits:["update:data"],setup(t,{emit:s}){const n=E(()=>t.data.basic),_=E(()=>t.data.state),m=E(()=>t.data.enemyState),h=E(()=>t.data.items),r=et(Qe()),B=et({hp:0,def:0,defGain:0,ra:0,rb:0}),D=[{label:"\u9762\u677F\u653B\u51FB",name:"w",step:1,align:"right"},{label:"\u9B42\u77F3\u653B\u51FB",name:"a",step:1},{label:"\u8BCD\u6761\u653B\u51FB%",name:"c",step:1},{label:"\u661F\u4E4B\u6676\u653B\u51FB",name:"x",step:1}],U=[{label:"\u6C14\u8840",name:"hp",step:1},{label:"\u9632\u5FA1",name:"def",step:1},{label:"\u9632\u5FA1\u4FEE\u6B63%",name:"defGain",step:1},{label:"A\u7C7B\u514D\u4F24%",name:"ra",step:1},{label:"B\u7C7B\u514D\u4F24%",name:"rb",step:1}],c=()=>{const w=n.value.c/100;n.value.g=Math.ceil(r.a+n.value.w*w+n.value.x),_.value.att=n.value.w+n.value.g},g=async()=>{s("update:data",t.data)},H=(w,C)=>{C==="panel"&&c(),g()},Q=(w,C)=>{const u=t.data.items;!u||(u[C]=w,g())},v=()=>{const w=t.data.items;!w||(w.push(Ot()),g())},I=w=>{const C=t.data.items;!C||(C.splice(w,1),g())},G=w=>{const C=t.data.items;if(!C)return;const u=C[w],N=C[w-1];C[w-1]=u,C[w]=N,g()},Y=w=>{const C=t.data.items;if(!C)return;const u=C[w],N=C[w+1];C[w+1]=u,C[w]=N,g()},z=w=>{const C=t.data.items;if(!C)return;const u=C[w];C.push(gt.cloneDeep(u)),g()};return Pt(()=>[t.data.basic.w],()=>{c()}),{panel:n,state:_,enemyState:m,panelResult:r,enemyStateResult:B,panelModels:D,enemyModels:U,update:H,items:h,updateItemState:Q,addItem:v,delItem:I,upItem:G,downItem:Y,copyItem:z}}});const ut=t=>(ft("data-v-910b1719"),t=t(),ht(),t),Ns=ut(()=>e("div",{class:"heading"},[e("div",{class:"heading-title"},"\u57FA\u672C\u53C2\u6570")],-1)),qs={class:"row"},Os={class:"label"},js={class:"input-group"},Gs=["step","onUpdate:modelValue","onChange"],Ks=["value"],Ls={class:"col-item"},Qs=ut(()=>e("div",{class:"label"},"\u8FDB\u56FE\u653B\u51FB",-1)),Js={class:"static-control text-center"},zs={class:"darkgold"},Ws={class:"col-item"},Xs=ut(()=>e("div",{class:"label"},"\u514B\u5236%",-1)),Zs=O(" \u514B\u523630%"),Ys=ut(()=>e("br",null,null,-1)),tn=O("\u88AB\u514B\u5236-25%"),en=ut(()=>e("br",null,null,-1)),sn=O("\u6FC0\u836150% "),nn=["onClick"],on=ut(()=>e("div",{class:"heading"},[e("div",{class:"heading-title"},"\u654C\u4EBA\u9762\u677F")],-1)),an={class:"row"},ln={class:"label"},un={class:"input-group"},dn={key:0,class:"input-ext"},cn={class:"heading"},rn=ut(()=>e("div",{class:"heading-title"},"\u6280\u80FD\u6A21\u677F",-1)),pn={class:"heading-actions"};function vn(t,s,n,_,m,h){const r=x("CalcInput"),B=x("Tooltip"),D=x("Dropdown"),U=x("CalcItem");return f(),b("div",null,[Ns,e("div",qs,[(f(!0),b(R,null,q(t.panelModels,c=>(f(),b("div",{class:"col-item",key:c.name},[e("div",Os,S(c.label),1),e("div",js,[c.name in t.panelResult?(f(),ct(r,{key:0,modelValue:t.panel[c.name],"onUpdate:modelValue":g=>t.panel[c.name]=g,result:t.panelResult[c.name],"onUpdate:result":g=>t.panelResult[c.name]=g,onChange:g=>t.update(c.name,"panel")},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"])):P((f(),b("input",{key:1,type:"number",class:"input",style:Dt({textAlign:c.align}),min:"0",step:c.step,"onUpdate:modelValue":g=>t.panel[c.name]=g,onChange:g=>t.update(c.name,"panel")},null,44,Gs)),[[X,t.panel[c.name],void 0,{number:!0}]]),c.name==="w"?(f(),b("input",{key:2,class:"input green",readonly:"",style:{textAlign:"left"},value:`+${t.panel.g}`},null,8,Ks)):st("",!0)])]))),128)),e("div",Ls,[Qs,e("div",Js,[e("span",zs,S(t.state.att),1)])]),e("div",Ws,[l(B,{dir:"top"},{label:p(()=>[Xs]),default:p(()=>[Zs,Ys,tn,en,sn]),_:1}),e("div",null,[l(D,null,{popover:p(({onClose:c})=>[e("div",{class:"list",onClick:()=>{c(),t.update("k","state")}},[e("div",{class:"list-item",onClick:s[2]||(s[2]=g=>t.state.k=0)},"\u666E\u901A"),e("div",{class:"list-item",onClick:s[3]||(s[3]=g=>t.state.k=30)},"\u514B\u5236"),e("div",{class:"list-item",onClick:s[4]||(s[4]=g=>t.state.k=-25)},"\u88AB\u514B\u5236"),e("div",{class:"list-item",onClick:s[5]||(s[5]=g=>t.state.k=50)},"\u6FC0\u8361")],8,nn)]),default:p(()=>[P(e("input",{class:"input",type:"number","onUpdate:modelValue":s[0]||(s[0]=c=>t.state.k=c),onChange:s[1]||(s[1]=c=>t.update("k","state")),list:"d1"},null,544),[[X,t.state.k,void 0,{number:!0}]])]),_:1})])])]),on,e("div",an,[(f(!0),b(R,null,q(t.enemyModels,c=>(f(),b("div",{class:"col-item",key:c.name},[e("div",ln,S(c.label),1),e("div",un,[l(r,{modelValue:t.enemyState[c.name],"onUpdate:modelValue":g=>t.enemyState[c.name]=g,result:t.enemyStateResult[c.name],"onUpdate:result":g=>t.enemyStateResult[c.name]=g,onChange:g=>t.update(c.name)},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"]),c.precent?(f(),b("div",dn,"%")):st("",!0)])]))),128))]),e("div",cn,[rn,e("div",pn,[e("div",{class:"btn btn-primary btn-sm",onClick:s[6]||(s[6]=(...c)=>t.addItem&&t.addItem(...c))},"\u6DFB\u52A0")])]),(f(!0),b(R,null,q(t.items,(c,g)=>(f(),ct(U,{key:c,panel:t.panel,state:t.state,enemyState:t.enemyStateResult,itemState:c,showUp:g>0,showDown:t.items&&g<t.items.length-1,"onUpdate:itemState":H=>t.updateItemState(H,g),onClose:H=>t.delItem(g),onUp:H=>t.upItem(g),onDown:H=>t.downItem(g),onCopy:H=>t.copyItem(g)},null,8,["panel","state","enemyState","itemState","showUp","showDown","onUpdate:itemState","onClose","onUp","onDown","onCopy"]))),128))])}const _n=j(Rs,[["render",vn],["__scopeId","data-v-910b1719"]]),mn=Z({props:{show:Boolean,list:Array,class:String,height:String},emits:["click","close","update:show"],setup(t,{emit:s}){return{wrapClass:E(()=>["c-action-sheet-wrapper",t.class,{show:t.show}]),onClick:(h,r)=>{s("click",{item:h,index:r}),s("close",!1)},onClose:()=>{s("update:show",!1),s("close",!1)}}}});const fn={class:"c-action-sheet-section"},hn={class:"c-action-sheet-extra"},bn={class:"c-action-sheet-list"},$n=["onClick"];function gn(t,s,n,_,m,h){return f(),ct(ue,{to:"body"},[e("div",{class:dt(t.wrapClass)},[e("div",{class:"c-action-sheet-mask",onClick:s[0]||(s[0]=(...r)=>t.onClose&&t.onClose(...r))}),e("div",fn,[e("div",{class:"c-action-sheet-body",style:Dt({maxHeight:t.height})},[e("div",hn,[L(t.$slots,"extra")]),e("div",bn,[(f(!0),b(R,null,q(t.list,(r,B)=>(f(),b("div",{class:"c-action-sheet-item",key:B,onClick:D=>t.onClick(r,B)},[L(t.$slots,"default",{record:r})],8,$n))),128))])],4)])],2)])}const kt=j(mn,[["render",gn]]);kt.install=t=>{t.component("action-sheet",kt)};const Fn={class:"hero-item"},yn=["src","alt","title"],Cn={class:"hero-item-label"},Bn=Z({__name:"HeroSelect",props:{show:{type:Boolean}},emits:["click","update:show"],setup(t,{emit:s}){const{heroes:n,getHeroIcon:_}=pe(),m=h=>{s("click",h)};return(h,r)=>(f(),ct(o(kt),{class:"hero-select",show:t.show,list:o(n),height:"80vh",onClick:m,"onUpdate:show":r[0]||(r[0]=B=>h.$emit("update:show",B))},{extra:p(()=>[L(h.$slots,"extra")]),default:p(({record:B})=>[e("div",Fn,[e("img",{src:o(_)(B),alt:B.name,title:B.name,width:"128",height:"128"},null,8,yn),e("div",Cn,S(B.name),1)])]),_:3},8,["show","list"]))}});const wn=Z({props:{header:String,activeKey:Boolean},emits:["update:activeKey","toggle"],setup(t,{emit:s}){const n=E({get:()=>t.activeKey,set:m=>{s("update:activeKey",m)}});return{active:n,toggle:()=>{const m=!n.value;n.value=m,s("toggle",m)}}}});const kn=t=>(ft("data-v-829ec263"),t=t(),ht(),t),Dn=kn(()=>e("div",{class:"panel-icon"},[e("svg",{width:"16",height:"16",viewBox:"-16 -16 32 32"},[e("path",{d:"M6 0 l-12 -12 l0 2 l10 10 l-10 10 l0 2 l12 -12z",fill:"currentColor"})])],-1)),En={class:"panel-title"},Sn={class:"panel-body"},Mn={class:"panel-content"};function Un(t,s,n,_,m,h){return f(),b("div",{class:dt(["panel",{active:t.active}])},[e("div",{class:"panel-header",onClick:s[1]||(s[1]=(...r)=>t.toggle&&t.toggle(...r))},[Dn,e("div",En,[L(t.$slots,"header",{},()=>[O(S(t.header)+"\xA0",1)],!0)]),e("div",{class:"panel-actions",onClick:s[0]||(s[0]=it(()=>{},["stop"]))},[L(t.$slots,"actions",{},void 0,!0)])]),e("div",Sn,[e("div",Mn,[L(t.$slots,"default",{},void 0,!0)])])],2)}const An=j(wn,[["render",Un],["__scopeId","data-v-829ec263"]]);function In(){const t="red_team",s=ie(),n=K([]),_=async D=>await s.put(t,D).then(U=>{if(n.value.findIndex(c=>c._id===U)===-1){const c=gt.cloneDeep(D);c._id=U,n.value.push(c)}return U}),m=async D=>await s.delete(t,D._id).then(()=>{n.value=n.value.filter(U=>U._id!==D._id)}),h=async D=>{const U=JSON.parse(await D.text());if(!Rt(U)||U.type!=="red_team"){alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}const c=U.data;for(const g of c)await _(g)},r=async()=>{const D={type:"red_team",data:n.value},U=new Blob([JSON.stringify(D)],{type:"application/json"});wt(U,"red_team.json")};return(async()=>{const D=await s.getAll(t).catch(()=>[]);console.log(D),n.value=D})(),{put:_,del:m,list:n,importData:h,exportData:r}}function Vn(){const t=()=>({name:"",qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,stoneName:"",hsQixue:0,hsPatt:0,hsPdef:0,hsMatt:0,hsMdef:0,hsHuixin:0,xQixue:0,xPatt:0,xPdef:0,xMatt:0,xMdef:0,xHuixin:0,cQixue:"40+5+5+5",cPatt:"0",cPdef:"0",cMatt:"0",cMdef:"0",cHuixin:"0",rQixue:0,rPatt:0,rPdef:0,rMatt:0,rMdef:0,rHuixin:0}),s=K(t()),n=E(()=>{const h={qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0},r=Nt.find(D=>s.value.stoneName===D.name);r&&(h.qixue=r.t[0]+r.d[0]+r.h[0],h.patt=r.t[1]+r.d[1]+r.h[1],h.matt=r.t[2]+r.d[2]+r.h[2],h.pdef=r.t[3]+r.d[3]+r.h[3],h.mdef=r.t[4]+r.d[4]+r.h[4]);const B={qixue:s.value.hsQixue/100,patt:s.value.hsPatt/100,pdef:s.value.hsPdef/100,matt:s.value.hsMatt/100,mdef:s.value.hsMdef/100,huixin:s.value.hsHuixin/100};return{qixue:Math.round(s.value.qixue*B.qixue+h.qixue+s.value.xQixue),patt:Math.round(s.value.patt*B.patt+h.patt+s.value.xPatt),pdef:Math.round(s.value.pdef*B.pdef+h.pdef+s.value.xPdef),matt:Math.round(s.value.matt*B.matt+h.matt+s.value.xMatt),mdef:Math.round(s.value.mdef*B.mdef+h.mdef+s.value.xMdef),huixin:Math.round(s.value.huixin*B.huixin+h.huixin+s.value.xHuixin)}}),_=E(()=>{const h=n.value,r={qixue:(100+s.value.rQixue)/100,patt:(100+s.value.rPatt)/100,pdef:(100+s.value.rPdef)/100,matt:(100+s.value.rMatt)/100,mdef:(100+s.value.rMdef)/100,huixin:(100+s.value.rHuixin)/100};return{qixue:Math.round((s.value.qixue+h.qixue)*r.qixue),patt:Math.round((s.value.patt+h.patt)*r.patt),pdef:Math.round((s.value.pdef+h.pdef)*r.pdef),matt:Math.round((s.value.matt+h.matt)*r.matt),mdef:Math.round((s.value.mdef+h.mdef)*r.mdef),huixin:Math.round((s.value.huixin+h.huixin)*r.huixin)}});return{state:s,pValue:n,ckValue:_,reset:()=>{s.value=t()},defState:t}}const xn={},Hn={class:"c-upload"};function Pn(t,s){return f(),b("div",Hn,[L(t.$slots,"default",{},void 0,!0),e("input",de({type:"file",class:"c-upload-input",accept:"application/json"},t.$attrs),null,16)])}const Tn=j(xn,[["render",Pn],["__scopeId","data-v-b3879154"]]),M=t=>(ft("data-v-65f1a23b"),t=t(),ht(),t),Rn={class:"transform-tools-popover"},Nn={class:"transform-tools-popover-toolbar"},qn=["value"],On=["value"],jn=M(()=>e("button",{class:"btn btn-sm btn-success"},"\u5BFC\u5165",-1)),Gn={class:"transform-tools-popover-content"},Kn={class:"grid-group"},Ln={class:"grid-group-item"},Qn={class:"input-group-title"},Jn=M(()=>e("span",null,"\u57FA\u7840",-1)),zn={class:"grids"},Wn=M(()=>e("label",{class:"input-label"},"\u6C14\u8840",-1)),Xn=M(()=>e("label",{class:"input-label"},"\u7269\u653B",-1)),Zn=M(()=>e("label",{class:"input-label"},"\u7269\u9632",-1)),Yn=M(()=>e("label",{class:"input-label"},"\u6CD5\u653B",-1)),to=M(()=>e("label",{class:"input-label"},"\u6CD5\u9632",-1)),eo=M(()=>e("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),so={class:"grid-group-item"},no={class:"input-group-title"},oo=M(()=>e("span",null,"\u9B42\u77F3",-1)),ao=M(()=>e("option",{value:""},"\u65E0",-1)),lo=["value"],uo={class:"grids"},io=M(()=>e("label",{class:"input-label"},"\u6C14\u8840%",-1)),co=M(()=>e("label",{class:"input-label"},"\u7269\u653B%",-1)),ro=M(()=>e("label",{class:"input-label"},"\u7269\u9632%",-1)),po=M(()=>e("label",{class:"input-label"},"\u6CD5\u653B%",-1)),vo=M(()=>e("label",{class:"input-label"},"\u6CD5\u9632%",-1)),_o={class:"grid-group-item"},mo={class:"input-group-title"},fo=O(" \u661F\u4E4B\u6676 "),ho=M(()=>e("div",null,"\u6781\u9650\u653B\uFF1A202\u653B\uFF0C198\u8840\uFF0C70\u9632",-1)),bo=M(()=>e("div",null,"\u6781\u9650\u8840\uFF1A456\u8840\uFF0C70\u9632\uFF0C88\u653B",-1)),$o=M(()=>e("div",null,"\u6781\u9650\u9632\uFF1A150\u9632\uFF0C198\u8840\uFF0C88\u653B",-1)),go={class:"grids"},Fo=M(()=>e("label",{class:"input-label"},"\u6C14\u8840",-1)),yo=M(()=>e("label",{class:"input-label"},"\u7269\u653B",-1)),Co=M(()=>e("label",{class:"input-label"},"\u7269\u9632",-1)),Bo=M(()=>e("label",{class:"input-label"},"\u6CD5\u653B",-1)),wo=M(()=>e("label",{class:"input-label"},"\u6CD5\u9632",-1)),ko=M(()=>e("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),Do={class:"grid-group-item"},Eo=M(()=>e("div",{class:"input-group-title"},"\u9762\u677F",-1)),So={class:"grids"},Mo={class:"input-label"},Uo={class:"input-group"},Ao={class:"input green"},Io={class:"grid-group-item"},Vo=M(()=>e("div",{class:"input-group-title"},"\u4FEE\u6B63",-1)),xo={class:"grids"},Ho={class:"input-label"},Po={class:"grid-group-item"},To=M(()=>e("div",{class:"input-group-title"},"\u53C2\u8003",-1)),Ro={class:"grids"},No={class:"input-label"},qo=["value"],Oo=Z({__name:"transform-tools-modal",props:{show:{type:Boolean}},emits:["init","reference","update:show"],setup(t,{emit:s}){const{state:n,pValue:_,ckValue:m,reset:h,defState:r}=Vn(),{list:B,put:D,del:U,importData:c,exportData:g}=In(),H=[{t:"\u6C14\u8840",n:"qixue"},{t:"\u7269\u653B",n:"patt"},{t:"\u7269\u9632",n:"pdef"},{t:"\u6CD5\u653B",n:"matt"},{t:"\u6CD5\u9632",n:"mdef"},{t:"\u4F1A\u5FC3",n:"huixin"}],Q=[{t:"\u6C14\u8840%",c:"cQixue",r:"rQixue"},{t:"\u7269\u653B%",c:"cPatt",r:"rPatt"},{t:"\u7269\u9632%",c:"cPdef",r:"rPdef"},{t:"\u6CD5\u653B%",c:"cMatt",r:"rMatt"},{t:"\u6CD5\u9632%",c:"cMdef",r:"rMdef"},{t:"\u4F1A\u5FC3%",c:"cHuixin",r:"rHuixin"}],v=()=>{const C=gt.cloneDeep(n.value);D(C).then(u=>{n.value._id=u,alert("\u5DF2\u4FDD\u5B58")}).catch(()=>{alert("\u4FDD\u5B58\u5931\u8D25")})},I=()=>{!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F")||U(n.value).then(()=>{h()}).catch(()=>{alert("\u5220\u9664\u5931\u8D25")})},G=C=>{const u=C.currentTarget,N=Array.prototype.slice.call(u.files);u.value="",N[0]&&c(N[0])},Y=()=>{g()},z=(C,u)=>{n.value.name=C,n.value.qixue=u.qixue,n.value.patt=u.patt,n.value.pdef=u.pdef,n.value.matt=u.matt,n.value.mdef=u.mdef,n.value.huixin=u.huixin},w=()=>{s("reference")};return s("init",z),(C,u)=>{const N=x("c-col"),k=x("c-space"),pt=x("c-row");return P((f(),b("div",Rn,[e("div",Nn,[l(pt,{flex:"",middle:"",gutter:8},{default:p(()=>[l(N,null,{default:p(()=>[e("button",{class:"btn btn-sm btn-link",onClick:w}," \u53C2\u8003 ")]),_:1}),l(N,null,{default:p(()=>[O("ID: "+S(o(n)._id),1)]),_:1}),l(N,{flex:"1 1 auto"},{default:p(()=>[l(k,null,{default:p(()=>[P(e("select",{class:"input input-select",placeholder:"\u8BF7\u9009\u62E9\u5DF2\u6709\u6A21\u677F","onUpdate:modelValue":u[0]||(u[0]=d=>mt(n)?n.value=d:null)},[e("option",{value:o(r)()},"\u7A7A\u6A21\u7248",8,qn),(f(!0),b(R,null,q(o(B),d=>(f(),b("option",{key:d._id,value:d},S(d.name),9,On))),128))],512),[[Vt,o(n)]]),e("button",{class:"btn btn-sm btn-primary",onClick:v},"\u4FDD\u5B58"),o(n)._id?(f(),b("button",{key:0,class:"btn btn-sm btn-danger",onClick:I}," \u5220\u9664 ")):st("",!0),l(Tn,{onInput:G},{default:p(()=>[jn]),_:1}),e("button",{class:"btn btn-sm btn-success",onClick:Y}," \u5BFC\u51FA ")]),_:1})]),_:1}),l(N,null,{default:p(()=>[e("span",{class:"transform-tools-popover-close",onClick:u[1]||(u[1]=d=>s("update:show",!1))}," \xD7 ")]),_:1})]),_:1})]),e("div",Gn,[e("div",Kn,[e("div",Ln,[e("div",Qn,[l(k,null,{default:p(()=>[Jn,P(e("input",{type:"text",class:"input input-text","onUpdate:modelValue":u[2]||(u[2]=d=>o(n).name=d)},null,512),[[X,o(n).name]])]),_:1})]),e("div",zn,[l(k,null,{default:p(()=>[Wn,l(o(V),{value:o(n).qixue,"onUpdate:value":u[3]||(u[3]=d=>o(n).qixue=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[Xn,l(o(V),{value:o(n).patt,"onUpdate:value":u[4]||(u[4]=d=>o(n).patt=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[Zn,l(o(V),{value:o(n).pdef,"onUpdate:value":u[5]||(u[5]=d=>o(n).pdef=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[Yn,l(o(V),{value:o(n).matt,"onUpdate:value":u[6]||(u[6]=d=>o(n).matt=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[to,l(o(V),{value:o(n).mdef,"onUpdate:value":u[7]||(u[7]=d=>o(n).mdef=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[eo,l(o(V),{value:o(n).huixin,"onUpdate:value":u[8]||(u[8]=d=>o(n).huixin=d)},null,8,["value"])]),_:1})])]),e("div",so,[e("div",no,[l(k,null,{default:p(()=>[oo,P(e("select",{class:"input input-select","onUpdate:modelValue":u[9]||(u[9]=d=>o(n).stoneName=d)},[ao,(f(!0),b(R,null,q(o(Nt),(d,J)=>(f(),b("option",{key:J,value:d.name},S(d.name),9,lo))),128))],512),[[Vt,o(n).stoneName]])]),_:1})]),e("div",uo,[l(k,null,{default:p(()=>[io,l(o(V),{value:o(n).hsQixue,"onUpdate:value":u[10]||(u[10]=d=>o(n).hsQixue=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[co,l(o(V),{value:o(n).hsPatt,"onUpdate:value":u[11]||(u[11]=d=>o(n).hsPatt=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[ro,l(o(V),{value:o(n).hsPdef,"onUpdate:value":u[12]||(u[12]=d=>o(n).hsPdef=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[po,l(o(V),{value:o(n).hsMatt,"onUpdate:value":u[13]||(u[13]=d=>o(n).hsMatt=d)},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[vo,l(o(V),{value:o(n).hsMdef,"onUpdate:value":u[14]||(u[14]=d=>o(n).hsMdef=d)},null,8,["value"])]),_:1})])]),e("div",_o,[e("div",mo,[fo,l(o(St),{label:"?",inline:"",dir:"right"},{default:p(()=>[ho,bo,$o]),_:1})]),e("div",go,[l(k,null,{default:p(()=>[Fo,l(o(V),{value:o(n).xQixue,"onUpdate:value":u[15]||(u[15]=d=>o(n).xQixue=d),min:0,max:456,placeholder:"0~456"},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[yo,l(o(V),{value:o(n).xPatt,"onUpdate:value":u[16]||(u[16]=d=>o(n).xPatt=d),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[Co,l(o(V),{value:o(n).xPdef,"onUpdate:value":u[17]||(u[17]=d=>o(n).xPdef=d),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[Bo,l(o(V),{value:o(n).xMatt,"onUpdate:value":u[18]||(u[18]=d=>o(n).xMatt=d),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[wo,l(o(V),{value:o(n).xMdef,"onUpdate:value":u[19]||(u[19]=d=>o(n).xMdef=d),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),l(k,null,{default:p(()=>[ko,l(o(V),{value:o(n).xHuixin,"onUpdate:value":u[20]||(u[20]=d=>o(n).xHuixin=d),min:0,max:104,placeholder:"0~104"},null,8,["value"])]),_:1})])]),e("div",Do,[Eo,e("div",So,[(f(),b(R,null,q(H,d=>l(k,{key:d.n},{default:p(()=>[e("label",Mo,S(d.t),1),e("div",Uo,[l(o(V),{readonly:"",value:o(n)[d.n]},null,8,["value"]),e("div",Ao,"+"+S(o(_)[d.n]),1)])]),_:2},1024)),64))])]),e("div",Io,[Vo,e("div",xo,[(f(),b(R,null,q(Q,(d,J)=>l(k,{key:J},{default:p(()=>[e("label",Ho,S(d.t),1),l(o(Et),{modelValue:o(n)[d.c],"onUpdate:modelValue":tt=>o(n)[d.c]=tt,result:o(n)[d.r],"onUpdate:result":tt=>o(n)[d.r]=tt},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])]),_:2},1024)),64))])]),e("div",Po,[To,e("div",Ro,[(f(),b(R,null,q(H,d=>l(k,{key:d.n},{default:p(()=>[e("label",No,S(d.t),1),e("input",{class:"input",readonly:"",value:o(m)[d.n]},null,8,qo)]),_:2},1024)),64))])])])])],512)),[[ce,t.show]])}}});const jo=j(Oo,[["__scopeId","data-v-65f1a23b"]]),rt=t=>(ft("data-v-25bbe4ad"),t=t(),ht(),t),Go={class:"wrapper"},Ko={class:"toolbar"},Lo={style:{padding:"6px 16px"}},Qo=O("\u4F24\u5BB3\u8BA1\u7B97\u5668"),Jo={class:"c-upload"},zo=rt(()=>e("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),Wo={style:{padding:"6px 16px"}},Xo={class:"input-group"},Zo=rt(()=>e("div",{class:"input-ext"},"=",-1)),Yo={class:"content"},ta={class:"container"},ea=["value"],sa=O(" \u2007 "),na=["onKeypress"],oa={key:1},aa=["onClick"],la=["onClick"],ua=["onClick"],ia=O(" \u91CD\u547D\u540D "),da=["onClick"],ca=O(" \u590D\u5236 "),ra=["onClick"],pa=["onClick"],va={style:{"text-align":"center"}},_a=rt(()=>e("span",null,"\u661F\u8000",-1)),ma=rt(()=>e("span",null,"\u5316\u81FB",-1)),fa=rt(()=>e("span",null,"\u661F\u9B42",-1)),ha=rt(()=>e("span",null,"\u661F\u8F89",-1)),ba=Z({__name:"Calculator",setup(t){const s=et({id:"",title:"",selecteds:[],search:""}),n=K([]),_=E(()=>n.value.filter(F=>F.title.indexOf(s.search)>-1)),m=async()=>{const i={id:Ht(),title:"\u6A21\u677F",basic:Le(),state:Je(),enemyState:Xe(),items:We()};await Oe(i),n.value.push(i)},h=async F=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const a=n.value.findIndex($=>$.id===F);a!==-1&&(await je(n.value[a].id),n.value.splice(a,1))},r=async F=>{const i=s.title;if(!i){B();return}const a=n.value.findIndex(A=>A.id===F);if(a===-1)return;const $=n.value[a];$.title=i,B(),await $t($)},B=()=>{s.id="",s.title=""},D=F=>{const i={type:"calculator",data:[F]},a=new Blob([JSON.stringify(i)],{type:"application/json"});wt(a,`${F.title}.json`)},U=async F=>{n.value=F},c=F=>new Promise((i,a)=>{const $=new FileReader;$.onload=()=>{i($.result)},$.onerror=()=>{a($.error)},$.readAsText(F)}),g=async()=>{if(!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F"))return;let i=_.value;s.selecteds.length>0&&(i=s.selecteds.map(a=>_.value[a]).filter(a=>a)),await Ke(i.map(a=>a.id)),vt()},H=async F=>{const i=F.currentTarget,a=Array.prototype.slice.call(i.files);if(i.value="",!a||!a[0])return;const $=a[0],A=await c($),W=JSON.parse(A);let at=[];if(me(W))at=W;else if(Rt(W)&&W.type==="calculator")at=W.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}await Ge(at),vt()},Q=async()=>{let F="calculator.json",i=_.value;s.selecteds.length>0&&(i=s.selecteds.map(A=>_.value[A]).filter(A=>A),F="calculator-selected.json");const a={type:"calculator",data:i},$=new Blob([JSON.stringify(a)],{type:"application/json"});wt($,F)};async function v(F,i){const a=n.value.findIndex(A=>A.id===i);a===-1||!n.value[a]||(n.value[a]=F,await $t(F))}const I=K(-1),G=et({input:"2283/1.35*1.39",result:0}),{translate:Y,xingyao:z,huazhen:w,xinghun:C,xinghui:u}=_e(),N=F=>Math.ceil(F),k=et({show:!1}),pt=F=>{const i=Y(F);d.value&&d.value(F.name,i)},d=K(),J=K(!1),tt=K(-1),bt=F=>{J.value=!0,tt.value=F},Ft=({item:F})=>{J.value=!1;const i=tt.value;if(i===-1)pt(F);else{const $=n.value[i],A=Y(F);$.title==="\u6A21\u677F"&&($.title=F.name),$.basic.w=Math.max(A.patt,A.matt),$t($)}},yt=F=>{const i=gt.cloneDeep(F);i.id=Ht(),console.log(i),n.value.push(i),$t(i)};async function vt(){const F=await qe();s.selecteds=[],U(F)}return re(()=>{vt()}),(F,i)=>{const a=x("c-col"),$=x("c-row"),A=x("calc-input"),W=x("c-space"),at=Tt("autofocus");return f(),b("div",Go,[e("div",Ko,[e("div",Lo,[l($,{flex:"",middle:"",gutter:16},{default:p(()=>[l(a,{flex:"0 0 auto"},{default:p(()=>[Qo]),_:1}),l(a,{flex:"0 0 auto"},{default:p(()=>[e("button",{class:"btn btn-sm btn-link",onClick:i[0]||(i[0]=y=>k.show=!k.show)}," \u9762\u677F "),s.selecteds.length>0?(f(),b("button",{key:0,class:"btn btn-success",onClick:i[1]||(i[1]=y=>s.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):st("",!0)]),_:1}),l(a,{flex:"1 1 0"},{default:p(()=>[P(e("input",{type:"text",class:"input",placeholder:"\u540D\u79F0\u8FC7\u6EE4","onUpdate:modelValue":i[2]||(i[2]=y=>s.search=y)},null,512),[[X,s.search]])]),_:1}),l(a,{flex:"0 0 auto"},{default:p(()=>[e("button",{class:"btn btn-danger",onClick:g},S(s.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),e("div",Jo,[zo,e("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:H},null,32)]),e("button",{class:"btn btn-success",onClick:Q},S(s.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),e("button",{class:"btn btn-primary",onClick:i[3]||(i[3]=y=>m())},"\u6DFB\u52A0")]),_:1})]),_:1}),l(jo,{show:k.show,"onUpdate:show":i[4]||(i[4]=y=>k.show=y),onReference:i[5]||(i[5]=y=>bt(-1)),onInit:i[6]||(i[6]=y=>d.value=y)},null,8,["show"])]),e("div",Wo,[e("div",Xo,[l(A,{modelValue:G.input,"onUpdate:modelValue":i[7]||(i[7]=y=>G.input=y),result:G.result,"onUpdate:result":i[8]||(i[8]=y=>G.result=y),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),Zo,l(ve,{readonly:"",value:N(G.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),e("div",Yo,[e("div",ta,[(f(!0),b(R,null,q(o(_),(y,lt)=>(f(),ct(o(An),{key:y.id,activeKey:lt===I.value,onToggle:T=>I.value=T?lt:-1},{header:p(()=>[l($,{flex:"",middle:""},{default:p(()=>[l(a,null,{default:p(()=>[P(e("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":i[9]||(i[9]=T=>s.selecteds=T),value:lt,onClick:i[10]||(i[10]=it(()=>{},["stop"]))},null,8,ea),[[_t,s.selecteds]]),sa]),_:2},1024),l(a,null,{default:p(()=>[s.id===y.id?P((f(),b("input",{key:0,type:"text",class:"input","onUpdate:modelValue":i[11]||(i[11]=T=>s.title=T),onClick:i[12]||(i[12]=it(()=>{},["stop"])),onKeypress:Bt(T=>r(y.id),["enter"])},null,40,na)),[[X,s.title],[at]]):(f(),b("span",oa,S(y.title),1))]),_:2},1024),l(a,{class:"ml-4",onClick:i[13]||(i[13]=it(()=>{},["stop"]))},{default:p(()=>[s.id===y.id?(f(),b("button",{key:0,class:"btn btn-sm btn-link",onClick:T=>r(y.id)}," \u786E\u8BA4 ",8,aa)):(f(),b(R,{key:1},[e("button",{class:"btn btn-sm btn-link",onClick:T=>bt(lt)}," \u9009\u62E9 ",8,la),e("button",{class:"btn btn-sm btn-link",onClick:T=>{s.id=y.id,s.title=y.title}},[l(o(Re),{class:"svg-icon"}),ia],8,ua),e("button",{class:"btn btn-sm btn-link",onClick:T=>yt(y)},[l(o(qt),{class:"svg-icon"}),ca],8,da)],64))]),_:2},1024)]),_:2},1024)]),actions:p(()=>[e("button",{class:"btn btn-sm btn-success-outline",onClick:T=>D(y)}," \u5BFC\u51FA ",8,ra),e("button",{class:"btn btn-sm btn-danger-outline",onClick:T=>h(y.id)}," \u5220\u9664 ",8,pa)]),default:p(()=>[lt===I.value?(f(),ct(o(_n),{key:0,data:y,"onUpdate:data":T=>v(T,y.id)},null,8,["data","onUpdate:data"])):st("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),l(o(Bn),{show:J.value,"onUpdate:show":i[18]||(i[18]=y=>J.value=y),onClick:Ft},{extra:p(()=>[e("div",va,[l(W,null,{default:p(()=>[e("label",null,[_a,P(e("input",{type:"checkbox","onUpdate:modelValue":i[14]||(i[14]=y=>mt(z)?z.value=y:null)},null,512),[[_t,o(z)]])]),e("label",null,[ma,P(e("input",{type:"checkbox","onUpdate:modelValue":i[15]||(i[15]=y=>mt(w)?w.value=y:null)},null,512),[[_t,o(w)]])]),e("label",null,[fa,P(e("input",{type:"checkbox","onUpdate:modelValue":i[16]||(i[16]=y=>mt(C)?C.value=y:null)},null,512),[[_t,o(C)]])]),e("label",null,[ha,P(e("input",{type:"checkbox","onUpdate:modelValue":i[17]||(i[17]=y=>mt(u)?u.value=y:null)},null,512),[[_t,o(u)]])])]),_:1})])]),_:1},8,["show"])])}}});const wa=j(ba,[["__scopeId","data-v-25bbe4ad"]]);export{wa as default};
