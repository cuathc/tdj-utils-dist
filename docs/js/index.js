var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);import{d as n,o,c as r,a as s,w as i,r as a,b as l,e as c,f as u,g as d,K as p,h,i as f,j as g,k as m,l as v,m as w,n as y,p as b,q as _,s as S,t as x,u as N,v as j}from"./vendor.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var A=n({name:"Nav",props:{msg:String}});const E={class:"c-main-nav"},k=l("人物列表"),V=l("伤害计算器"),I=l("幻境积分"),B=l("五内"),L=l("魂石"),P=l("魂石模拟");A.render=function(e,t,n,l,c,u){const d=a("router-link");return o(),r("div",E,[s(d,{to:"/heroes"},{default:i((()=>[k])),_:1}),s(d,{to:"/calculator"},{default:i((()=>[V])),_:1}),s(d,{to:"/huanjing"},{default:i((()=>[I])),_:1}),s(d,{to:"/wunei"},{default:i((()=>[B])),_:1}),s(d,{to:"/stone"},{default:i((()=>[L])),_:1}),s(d,{to:"/stone-emulator"},{default:i((()=>[P])),_:1})])};var O=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const C=s("path",{d:"M13 16 l-10 -10 l3 -3 l10 10 l10 -10 l3 3 l-10 10 l10 10 l-3 3 l-10 -10 l-10 10 l-3 -3 z"},null,-1);O.render=function(e,t,n,s,i,a){return o(),r("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[C],8,["width","height"])};var D=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const H=s("path",{d:"M4 4 l24 0 l0 4 l-24 0z M4 14 l24 0 l0 4 l-24 0z M4 24 l24 0 l0 4 l-24 0z"},null,-1);D.render=function(e,t,n,s,i,a){return o(),r("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[H],8,["width","height"])};var M=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const T=s("path",{d:"M16 3 l-14 14 l0 6 l14 -14 l14 14 l0 -6 l-14 -14 z"},null,-1);M.render=function(e,t,n,s,i,a){return o(),r("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[T],8,["width","height"])};var $=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const R=s("path",{d:"M16 27 l-14 -14 l0 -6 l14 14 l14 -14 l0 6 l-14 14 z"},null,-1);$.render=function(e,t,n,s,i,a){return o(),r("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[R],8,["width","height"])};var z=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const q=s("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,-1);z.render=function(e,t,n,s,i,a){return o(),r("svg",{width:e.width,height:e.height,viewBox:"0 0 24 24"},[q],8,["width","height"])};var K=n({props:{orientation:{type:String,default:()=>"center"}},setup:()=>({})});const W=s("div",{class:"c-divider__start c-divider__spring"},null,-1),F={class:"c-divider__inner"},J=s("div",{class:"c-divider__end c-divider__spring"},null,-1),X={class:"c-divider__inner"};K.render=function(e,t,n,i,a,l){return o(),r("div",{class:["c-divider",{"with-left":"left"===e.orientation,"with-center":"left"!==e.orientation&&"right"!==e.orientation,"with-right":"right"===e.orientation}]},[W,s("div",F,[c(e.$slots,"default")]),J,s("div",X,[c(e.$slots,"action")])],2)};var Z=n({components:{Nav:A,IconList:D,Divider:K},setup(){const e=u(!1);return{active:e,toggle:()=>{e.value=!e.value}}}});const G={class:"c-application--wrap"},Q={class:"c-navigation-drawer c-navigation-drawer--fixed"},U={class:"c-navigation-drawer--content"},Y=d('<div class="c-list"><div class="c-list-item"><div class="c-list-item--content"><div class="c-list-item--title">天地劫工具箱</div><div class="c-list-item--subtitle">by cuathc</div></div></div></div>',1),ee=s("div",{class:"c-navigation-drawer--border"},null,-1),te={class:"c-app-bar c-app-bar--fixed"},ne={class:"page-header"},oe=s("div",{class:"page-header--content"},null,-1),re={class:"c-main"},se={class:"c-main--wrap"},ie={class:"c-container"};Z.render=function(e,t,n,l,c,u){const d=a("Divider"),f=a("Nav"),g=a("IconList"),m=a("router-view");return o(),r("div",{class:["c-application",{"c-application--collapsed":e.active}]},[s("div",{class:"c-app-overlay",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))}),s("div",G,[s("div",Q,[s("div",U,[Y,s(d),s(f)]),ee]),s("header",te,[s("div",ne,[s("span",{class:"nav-menu",onClick:t[2]||(t[2]=(...t)=>e.toggle&&e.toggle(...t))},[s(g,{width:"16",height:"16"})]),oe])]),s("main",re,[s("div",se,[s("div",ie,[s(m,null,{default:i((({Component:e})=>[(o(),r(p,null,[(o(),r(h(e)))],1024))])),_:1})])])])])],2)},f("./service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const ae={},le=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in ae)return;ae[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};var ce=n({name:"Home",components:{}});ce.render=function(e,t,n,s,i,a){return o(),r("div")};const ue=[{path:"/",name:"Home",component:ce},{path:"/heroes",name:"Heroes",component:()=>le((()=>import("./Heroes.js")),["js/Heroes.js","js/vendor.js","js/lodash.js"])},{path:"/calculator",name:"Calculator",component:()=>le((()=>import("./Calculator.js")),["js/Calculator.js","js/vendor.js","js/lodash.js","js/InputNumber.js","js/data.js"])},{path:"/huanjing",name:"HuanJing",component:()=>le((()=>import("./HuanJing.js")),["js/HuanJing.js","js/vendor.js"])},{path:"/wunei",name:"WuNei",component:()=>le((()=>import("./WuNei.js")),["js/WuNei.js","js/vendor.js"])},{path:"/stone",name:"Stone",component:()=>le((()=>import("./Stone.js")),["js/Stone.js","js/vendor.js","js/data.js","js/data2.js"])},{path:"/stone-emulator",name:"StoneEmulator",component:()=>le((()=>import("./StoneEmulator.js")),["js/StoneEmulator.js","js/vendor.js","js/data2.js"])}],de=g({history:m("./"),routes:ue});var pe=v({state:{},mutations:{},actions:{},modules:{}});function he(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}const fe=new class{constructor(){t(this,"console"),t(this,"labelStyle"),t(this,"infoStyle"),this.console=window.console,this.labelStyle="padding:0.25em 0.4em;color: #fff;background: #606060;border-radius:3px 0 0 3px;",this.infoStyle="padding:0.25em 0.4em;color: #fff;background: #1475B2;border-radius:0 3px 3px 0;"}info(e,t,...n){this.console.log("%c%s%c%s",this.labelStyle,e,this.infoStyle,t,...n)}log(...e){this.console.log(...e)}},ge=new class{constructor(e,n){t(this,"db"),t(this,"upgrade"),t(this,"wait"),this.name=e,this.version=n}open(){return window.indexedDB?(this.wait=new Promise(((e,t)=>{const n=window.indexedDB.open(this.name,this.version);n.onsuccess=()=>{this.db=n.result,e(n.result),this.wait=void 0},n.onupgradeneeded=e=>{this.upgrade&&this.upgrade(n.result,e.oldVersion,e.newVersion,n.transaction)},n.onerror=()=>{t(n.error),this.wait=void 0}})),this.wait):Promise.reject(new Error("Not support IndexedDB."))}connect(){return this.db?Promise.resolve(this.db):this.wait?this.wait:this.open()}async add(e,t,n){const o=he(),r=(await this.connect()).transaction(e,"readwrite").objectStore(e).add(t,n);return r.onsuccess=()=>{o.resolve(r.result)},r.onerror=()=>{o.reject(r.error)},await o.promise}async delete(e,t){const n=he(),o=(await this.connect()).transaction(e,"readwrite").objectStore(e).delete(t);return o.onsuccess=()=>{n.resolve()},o.onerror=()=>{n.reject(o.error)},await n.promise}async put(e,t,n){const o=he(),r=(await this.connect()).transaction(e,"readwrite").objectStore(e).put(t,n);return r.onsuccess=()=>{o.resolve(r.result)},r.onerror=()=>{o.reject(r.error)},await o.promise}async clear(e){const t=he(),n=(await this.connect()).transaction(e,"readwrite").objectStore(e).clear();return n.onsuccess=()=>{t.resolve()},n.onerror=()=>{t.reject(n.error)},await t.promise}async get(e,t,n){const o=he(),r=(await this.connect()).transaction(e,"readonly").objectStore(e),s=(n?r.index(n):r).get(t);return s.onsuccess=()=>{o.resolve(s.result)},s.onerror=()=>{o.reject(s.error)},await o.promise}async getKey(e,t,n){const o=he(),r=(await this.connect()).transaction(e,"readonly").objectStore(e),s=(n?r.index(n):r).getKey(t);return s.onsuccess=()=>{o.resolve(s.result)},s.onerror=()=>{o.reject(s.error)},await o.promise}async getAll(e,t,n,o){const r=he(),s=(await this.connect()).transaction(e,"readonly").objectStore(e),i=(o?s.index(o):s).getAll(t,n);return i.onsuccess=()=>{r.resolve(i.result)},i.onerror=()=>{r.reject(i.error)},await r.promise}async getAllKeys(e,t,n,o){const r=he(),s=(await this.connect()).transaction(e,"readonly").objectStore(e),i=(o?s.index(o):s).getAllKeys(t,n);return i.onsuccess=()=>{r.resolve(i.result)},i.onerror=()=>{r.reject(i.error)},await r.promise}}("tdj_tools",4);ge.upgrade=(e,t,n,o)=>{if(fe.info("oldVersion",t),fe.info("newVersion",n),e.objectStoreNames.contains("calculator")||e.createObjectStore("calculator",{keyPath:"id"}),!e.objectStoreNames.contains("heroes")){e.createObjectStore("heroes",{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!0})}if(e.objectStoreNames.contains("abilities")||e.createObjectStore("abilities",{keyPath:"key",autoIncrement:!0}),o){const e=o.objectStore("heroes");e.indexNames.contains("name")||e.createIndex("name","name",{unique:!0})}},ge.open();const me=Symbol("");const ve=w((()=>le((()=>import("./InputText.js")),["js/InputText.js","js/vendor.js"])));ve.install=function(e){e.component("c-input-text",ve)};const we=w((()=>le((()=>import("./InputNumber.js")),["js/InputNumber.js","js/vendor.js"])));we.install=function(e){e.component("c-input-number",we)};const ye={"#":0,"+":10,"-":10,"*":20,"/":20,"^":30};function be(e){return e&&ye[e]?ye[e]:0}function _e(e){return e[e.length-1]}function Se(e){return"number"!=typeof e&&"+-*/^".indexOf(e)>-1}function xe(e){return"("===e}function Ne(e){return")"===e}const je={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"^":(e,t)=>Math.pow(e,t)};function Ae(e){return function(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(Se(o)){const e=t[t.length-2],n=t[t.length-1];"number"==typeof e&&"number"==typeof n&&(t.pop(),t.pop(),t.push(je[o](e,n)))}else t.push(o)}return Number(t[0])}(function(e){const t=[],n=[],o=function(e){const t=[];let n=!1,o="#",r="";for(let s=0;s<e.length;s++){const i=e.charAt(s),a=e.charCodeAt(s),l=e.charCodeAt(s+1);if(a>47&&a<58||46===a){if(r+=i,l>47&&l<58||46===l)continue;t.push(n?-r:+r),n=!1,o="",r=""}else{if(-1==="()+-*/^".indexOf(i))continue;if("#(+-*/^".indexOf(o)>-1){if("-"===i){n=!n;continue}if("+"===i)continue}t.push(i)}o=i}return t}(e);for(let r=0;r<o.length;r++){const e=o[r];if("number"==typeof e)t.push(e);else if(0===n.length)n.push(e);else if(xe(e))n.push(e);else if(Ne(e))for(;n.length>0;){const e=n.pop();if("("===e)break;t.push(e)}else if(Se(e)){const o=be(e);if(o>be(_e(n)))n.push(e);else{for(;n.length>0&&o<=be(_e(n));)t.push(n.pop());n.push(e)}}}for(;n.length>0;)t.push(n.pop());return t}(e))}var Ee=n({props:{modelValue:String,result:Number,modelModifiers:{default:()=>({})},resultModifiers:{default:()=>({})}},emits:["update:modelValue","update:result","change"],setup(e,{emit:t}){const n=u(),o=u(!1),r=e=>{const n=Ae(e);o.value=isNaN(n),t("update:result",n),t("change")};return y((()=>e.modelValue),(e=>{r(e||"")})),b((()=>{r(e.modelValue||"")})),{dom:n,keypress:e=>{/[0-9.+\-*/()^]/i.test(e.key)||e.preventDefault()},onInput:e=>{const n=e.currentTarget.value;t("update:modelValue",n)},onChange:e=>{const n=e.currentTarget.value;t("update:modelValue",n)},err:o}}});Ee.render=function(e,t,n,s,i,a){return o(),r("input",{class:["input",{"was-error":e.err}],ref:t=>e.dom=t,type:"text",value:e.modelValue,title:e.result,onKeypress:t[1]||(t[1]=(...t)=>e.keypress&&e.keypress(...t)),onInput:t[2]||(t[2]=(...t)=>e.onInput&&e.onInput(...t)),onChange:t[3]||(t[3]=(...t)=>e.onChange&&e.onChange(...t))},null,42,["value","title"])},Ee.install=e=>{e.component("calc-input",Ee)};var ke=n({props:{flex:Boolean,top:Boolean,middle:Boolean,bottom:Boolean,left:Boolean,center:Boolean,right:Boolean,around:Boolean,between:Boolean,evenly:Boolean,gutter:[Number,String]},setup(e){const t=_((()=>{let t="",n="";const o=[];return e.top?t+="-top":e.middle?t+="-middle":e.bottom&&(t+="-bottom"),e.left?n+="-left":e.center?n+="-center":e.right?n+="-right":e.around?n+="-around":e.between?n+="-between":e.evenly&&(n+="-evenly"),t&&o.push("c-flex"+t),n&&o.push("c-flex"+n),o})),n=_((()=>e.gutter?"string"==typeof e.gutter?+e.gutter:e.gutter:0));return S("row-gutter",n),{flexClasses:t}}});ke.render=function(e,t,n,s,i,a){return o(),r("div",{class:[{"c-row":!e.flex,"c-flex":e.flex},...e.flexClasses],style:{marginLeft:-e.gutter/2+"px",marginRight:-e.gutter/2+"px"}},[c(e.$slots,"default")],6)},ke.install=e=>{e.component("c-row",ke)};var Ve=n({props:{span:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],flex:String},setup:e=>({className:_((()=>{const t=["c-col"];return e.span&&t.push(`c-col-${e.span}`),e.offset&&t.push(`c-col-offset-${e.offset}`),e.push&&t.push(`c-col-push-${e.push}`),e.pull&&t.push(`c-col-pull-${e.pull}`),t})),gutter:x("row-gutter")})});Ve.render=function(e,t,n,s,i,a){return o(),r("div",{class:e.className,style:{flex:e.flex,paddingLeft:e.gutter/2+"px",paddingRight:e.gutter/2+"px"}},[c(e.$slots,"default")],6)},Ve.install=e=>{e.component("c-col",Ve)};var Ie=n({props:{size:[String,Number],wrap:Boolean},setup:(e,{slots:t})=>()=>{const n=t.default?t.default():[],o=Number(e.size||4);return N("div",{class:["c-space",{wrap:e.wrap}],style:{"--space-size":isNaN(o)?e.size:`${o}px`}},n.map((e=>N("div",{class:"c-space-item"},[e]))))}});Ie.__scopeId="data-v-26d19f55",Ie.install=e=>{e.component("c-space",Ie)};console.log("0.0.1");const Be=u([]);function Le(){return new Promise(((e,t)=>{console.log("载入默认数据");const n=new XMLHttpRequest;n.open("get","./data/hero-details.json"),n.responseType="json",n.onerror=()=>{t(new Error("Load Error"))},n.onload=async()=>{try{const t=function(e){const t=[];for(let n=0;n<e.data.length;n++){const o=e.data[n],r={};for(let t=0;t<o.length;t++)r[e.columns[t]]=o[t];t.push(r)}return t}(n.response);await ge.clear("heroes");for(const e of t)e.id=Number(e.weight),await ge.put("heroes",e);e(),Pe()}catch(o){t(o)}},n.send()}))}async function Pe(){Be.value=await ge.getAll("heroes")}const Oe=u([]);j(Z).use(pe).use(de).use((function(e){e.provide(me,ge)})).use((()=>{Pe();const{initAbility:e}={abilities:Oe,initAbility:async()=>{try{Oe.value=await ge.getAll("abilities")}catch(e){console.log(e)}},addAbility:async e=>{try{await ge.add("abilities",e)}catch(t){console.log(t)}},updateAbility:async e=>{try{await ge.put("abilities",e)}catch(t){console.log(t)}},removeAbility:async e=>{try{await ge.delete("abilities",e.key)}catch(t){console.log(t)}}};e()})).use(ve).use(we).use(Ee).use(ke).use(Ve).use(Ie).mount("#app");export{me as D,K as _,ge as a,Ee as b,M as c,$ as d,O as e,z as f,Le as g,Pe as i,Be as s};
