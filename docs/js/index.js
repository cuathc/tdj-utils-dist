var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{d as n,o as r,c as o,a as s,w as i,r as a,b as l,e as c,f as u,g as d,K as p,h,i as f,j as g,k as m,l as v,m as w,n as y,p as b,q as _,s as S,t as x,u as j,v as N}from"./vendor.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var A=n({name:"Nav",props:{msg:String}});const E={class:"c-main-nav"},V=l("人物列表"),k=l("伤害计算器"),I=l("幻境积分"),B=l("五内"),L=l("魂石"),P=l("魂石模拟"),O=l("网格工具");A.render=function(e,t,n,l,c,u){const d=a("router-link");return r(),o("div",E,[s(d,{to:"/heroes"},{default:i((()=>[V])),_:1}),s(d,{to:"/calculator"},{default:i((()=>[k])),_:1}),s(d,{to:"/huanjing"},{default:i((()=>[I])),_:1}),s(d,{to:"/wunei"},{default:i((()=>[B])),_:1}),s(d,{to:"/stone"},{default:i((()=>[L])),_:1}),s(d,{to:"/stone-emulator"},{default:i((()=>[P])),_:1}),s(d,{to:"/grids"},{default:i((()=>[O])),_:1})])};var D=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const C=s("path",{d:"M13 16 l-10 -10 l3 -3 l10 10 l10 -10 l3 3 l-10 10 l10 10 l-3 3 l-10 -10 l-10 10 l-3 -3 z"},null,-1);D.render=function(e,t,n,s,i,a){return r(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[C],8,["width","height"])};var H=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const M=s("path",{d:"M4 4 l24 0 l0 4 l-24 0z M4 14 l24 0 l0 4 l-24 0z M4 24 l24 0 l0 4 l-24 0z"},null,-1);H.render=function(e,t,n,s,i,a){return r(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[M],8,["width","height"])};var T=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const R=s("path",{d:"M16 3 l-14 14 l0 6 l14 -14 l14 14 l0 -6 l-14 -14 z"},null,-1);T.render=function(e,t,n,s,i,a){return r(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[R],8,["width","height"])};var $=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const z=s("path",{d:"M16 27 l-14 -14 l0 -6 l14 14 l14 -14 l0 6 l-14 14 z"},null,-1);$.render=function(e,t,n,s,i,a){return r(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},[z],8,["width","height"])};var q=n({props:{width:{type:[Number,String],default:()=>16},height:{type:[Number,String],default:()=>16}},setup:()=>({})});const K=s("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,-1);q.render=function(e,t,n,s,i,a){return r(),o("svg",{width:e.width,height:e.height,viewBox:"0 0 24 24"},[K],8,["width","height"])};var W=n({props:{orientation:{type:String,default:()=>"center"}},setup:()=>({})});const F=s("div",{class:"c-divider__start c-divider__spring"},null,-1),G={class:"c-divider__inner"},J=s("div",{class:"c-divider__end c-divider__spring"},null,-1),X={class:"c-divider__inner"};W.render=function(e,t,n,i,a,l){return r(),o("div",{class:["c-divider",{"with-left":"left"===e.orientation,"with-center":"left"!==e.orientation&&"right"!==e.orientation,"with-right":"right"===e.orientation}]},[F,s("div",G,[c(e.$slots,"default")]),J,s("div",X,[c(e.$slots,"action")])],2)};var Z=n({components:{Nav:A,IconList:H,Divider:W},setup(){const e=u(!1);return{active:e,toggle:()=>{e.value=!e.value}}}});const Q={class:"c-application--wrap"},U={class:"c-navigation-drawer c-navigation-drawer--fixed"},Y={class:"c-navigation-drawer--content"},ee=d('<div class="c-list"><div class="c-list-item"><div class="c-list-item--content"><div class="c-list-item--title">天地劫工具箱</div><div class="c-list-item--subtitle">by cuathc</div></div></div></div>',1),te=s("div",{class:"c-navigation-drawer--border"},null,-1),ne={class:"c-app-bar c-app-bar--fixed"},re={class:"page-header"},oe=s("div",{class:"page-header--content"},null,-1),se={class:"c-main"},ie={class:"c-main--wrap"},ae={class:"c-container"};Z.render=function(e,t,n,l,c,u){const d=a("Divider"),f=a("Nav"),g=a("IconList"),m=a("router-view");return r(),o("div",{class:["c-application",{"c-application--collapsed":e.active}]},[s("div",{class:"c-app-overlay",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))}),s("div",Q,[s("div",U,[s("div",Y,[ee,s(d),s(f)]),te]),s("header",ne,[s("div",re,[s("span",{class:"nav-menu",onClick:t[2]||(t[2]=(...t)=>e.toggle&&e.toggle(...t))},[s(g,{width:"16",height:"16"})]),oe])]),s("main",se,[s("div",ie,[s("div",ae,[s(m,null,{default:i((({Component:e})=>[(r(),o(p,null,[(r(),o(h(e)))],1024))])),_:1})])])])])],2)},f("./service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const le={},ce=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in le)return;le[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};var ue=n({name:"Home",components:{}});ue.render=function(e,t,n,s,i,a){return r(),o("div")};const de=[{path:"/",name:"Home",component:ue},{path:"/heroes",name:"Heroes",component:()=>ce((()=>import("./Heroes.js")),["js/Heroes.js","js/vendor.js","js/lodash.js"])},{path:"/calculator",name:"Calculator",component:()=>ce((()=>import("./Calculator.js")),["js/Calculator.js","js/vendor.js","js/lodash.js","js/InputNumber.js","js/data.js"])},{path:"/huanjing",name:"HuanJing",component:()=>ce((()=>import("./HuanJing.js")),["js/HuanJing.js","js/vendor.js"])},{path:"/wunei",name:"WuNei",component:()=>ce((()=>import("./WuNei.js")),["js/WuNei.js","js/vendor.js"])},{path:"/stone",name:"Stone",component:()=>ce((()=>import("./Stone.js")),["js/Stone.js","js/vendor.js","js/data.js","js/data2.js"])},{path:"/stone-emulator",name:"StoneEmulator",component:()=>ce((()=>import("./StoneEmulator.js")),["js/StoneEmulator.js","js/vendor.js","js/data2.js"])},{path:"/grids",name:"Grids",component:()=>ce((()=>import("./Grids.js")),["js/Grids.js","js/vendor.js"])}],pe=g({history:m("./"),routes:de});var he=v({state:{},mutations:{},actions:{},modules:{}});function fe(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}const ge=new class{constructor(){t(this,"console"),t(this,"labelStyle"),t(this,"infoStyle"),this.console=window.console,this.labelStyle="padding:0.25em 0.4em;color: #fff;background: #606060;border-radius:3px 0 0 3px;",this.infoStyle="padding:0.25em 0.4em;color: #fff;background: #1475B2;border-radius:0 3px 3px 0;"}info(e,t,...n){this.console.log("%c%s%c%s",this.labelStyle,e,this.infoStyle,t,...n)}log(...e){this.console.log(...e)}},me=new class{constructor(e,n){t(this,"db"),t(this,"upgrade"),t(this,"wait"),this.name=e,this.version=n}open(){return window.indexedDB?(this.wait=new Promise(((e,t)=>{const n=window.indexedDB.open(this.name,this.version);n.onsuccess=()=>{this.db=n.result,e(n.result),this.wait=void 0},n.onupgradeneeded=e=>{this.upgrade&&this.upgrade(n.result,e.oldVersion,e.newVersion,n.transaction)},n.onerror=()=>{t(n.error),this.wait=void 0}})),this.wait):Promise.reject(new Error("Not support IndexedDB."))}connect(){return this.db?Promise.resolve(this.db):this.wait?this.wait:this.open()}async add(e,t,n){const r=fe(),o=(await this.connect()).transaction(e,"readwrite").objectStore(e).add(t,n);return o.onsuccess=()=>{r.resolve(o.result)},o.onerror=()=>{r.reject(o.error)},await r.promise}async delete(e,t){const n=fe(),r=(await this.connect()).transaction(e,"readwrite").objectStore(e).delete(t);return r.onsuccess=()=>{n.resolve()},r.onerror=()=>{n.reject(r.error)},await n.promise}async put(e,t,n){const r=fe(),o=(await this.connect()).transaction(e,"readwrite").objectStore(e).put(t,n);return o.onsuccess=()=>{r.resolve(o.result)},o.onerror=()=>{r.reject(o.error)},await r.promise}async clear(e){const t=fe(),n=(await this.connect()).transaction(e,"readwrite").objectStore(e).clear();return n.onsuccess=()=>{t.resolve()},n.onerror=()=>{t.reject(n.error)},await t.promise}async get(e,t,n){const r=fe(),o=(await this.connect()).transaction(e,"readonly").objectStore(e),s=(n?o.index(n):o).get(t);return s.onsuccess=()=>{r.resolve(s.result)},s.onerror=()=>{r.reject(s.error)},await r.promise}async getKey(e,t,n){const r=fe(),o=(await this.connect()).transaction(e,"readonly").objectStore(e),s=(n?o.index(n):o).getKey(t);return s.onsuccess=()=>{r.resolve(s.result)},s.onerror=()=>{r.reject(s.error)},await r.promise}async getAll(e,t,n,r){const o=fe(),s=(await this.connect()).transaction(e,"readonly").objectStore(e),i=(r?s.index(r):s).getAll(t,n);return i.onsuccess=()=>{o.resolve(i.result)},i.onerror=()=>{o.reject(i.error)},await o.promise}async getAllKeys(e,t,n,r){const o=fe(),s=(await this.connect()).transaction(e,"readonly").objectStore(e),i=(r?s.index(r):s).getAllKeys(t,n);return i.onsuccess=()=>{o.resolve(i.result)},i.onerror=()=>{o.reject(i.error)},await o.promise}}("tdj_tools",4);me.upgrade=(e,t,n,r)=>{if(ge.info("oldVersion",t),ge.info("newVersion",n),e.objectStoreNames.contains("calculator")||e.createObjectStore("calculator",{keyPath:"id"}),!e.objectStoreNames.contains("heroes")){e.createObjectStore("heroes",{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!0})}if(e.objectStoreNames.contains("abilities")||e.createObjectStore("abilities",{keyPath:"key",autoIncrement:!0}),r){const e=r.objectStore("heroes");e.indexNames.contains("name")||e.createIndex("name","name",{unique:!0})}},me.open();const ve=Symbol("");const we=w((()=>ce((()=>import("./InputText.js")),["js/InputText.js","js/vendor.js"])));we.install=function(e){e.component("c-input-text",we)};const ye=w((()=>ce((()=>import("./InputNumber.js")),["js/InputNumber.js","js/vendor.js"])));ye.install=function(e){e.component("c-input-number",ye)};const be={"#":0,"+":10,"-":10,"*":20,"/":20,"^":30};function _e(e){return e&&be[e]?be[e]:0}function Se(e){return e[e.length-1]}function xe(e){return"number"!=typeof e&&"+-*/^".indexOf(e)>-1}function je(e){return"("===e}function Ne(e){return")"===e}const Ae={"+":(e,t)=>e+t,"-":(e,t)=>e-t,"*":(e,t)=>e*t,"/":(e,t)=>e/t,"^":(e,t)=>Math.pow(e,t)};function Ee(e){return function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(xe(r)){const e=t[t.length-2],n=t[t.length-1];"number"==typeof e&&"number"==typeof n&&(t.pop(),t.pop(),t.push(Ae[r](e,n)))}else t.push(r)}return Number(t[0])}(function(e){const t=[],n=[],r=function(e){const t=[];let n=!1,r="#",o="";for(let s=0;s<e.length;s++){const i=e.charAt(s),a=e.charCodeAt(s),l=e.charCodeAt(s+1);if(a>47&&a<58||46===a){if(o+=i,l>47&&l<58||46===l)continue;t.push(n?-o:+o),n=!1,r="",o=""}else{if(-1==="()+-*/^".indexOf(i))continue;if("#(+-*/^".indexOf(r)>-1){if("-"===i){n=!n;continue}if("+"===i)continue}t.push(i)}r=i}return t}(e);for(let o=0;o<r.length;o++){const e=r[o];if("number"==typeof e)t.push(e);else if(0===n.length)n.push(e);else if(je(e))n.push(e);else if(Ne(e))for(;n.length>0;){const e=n.pop();if("("===e)break;t.push(e)}else if(xe(e)){const r=_e(e);if(r>_e(Se(n)))n.push(e);else{for(;n.length>0&&r<=_e(Se(n));)t.push(n.pop());n.push(e)}}}for(;n.length>0;)t.push(n.pop());return t}(e))}var Ve=n({props:{modelValue:String,result:Number,modelModifiers:{default:()=>({})},resultModifiers:{default:()=>({})}},emits:["update:modelValue","update:result","change"],setup(e,{emit:t}){const n=u(),r=u(!1),o=e=>{if("number"==typeof e)return t("update:result",e),void t("change");const n=Ee(e=e||"");r.value=isNaN(n),t("update:result",n),t("change")};return y((()=>e.modelValue),(e=>{o(e)})),b((()=>{o(e.modelValue)})),{dom:n,keypress:e=>{/[0-9.+\-*/()^]/i.test(e.key)||e.preventDefault()},onInput:e=>{const n=e.currentTarget.value;t("update:modelValue",n)},onChange:e=>{const n=e.currentTarget.value;t("update:modelValue",n)},err:r}}});Ve.render=function(e,t,n,s,i,a){return r(),o("input",{class:["input",{"was-error":e.err}],ref:t=>e.dom=t,type:"text",value:e.modelValue,title:e.result,onKeypress:t[1]||(t[1]=(...t)=>e.keypress&&e.keypress(...t)),onInput:t[2]||(t[2]=(...t)=>e.onInput&&e.onInput(...t)),onChange:t[3]||(t[3]=(...t)=>e.onChange&&e.onChange(...t))},null,42,["value","title"])},Ve.install=e=>{e.component("calc-input",Ve)};var ke=n({props:{flex:Boolean,top:Boolean,middle:Boolean,bottom:Boolean,left:Boolean,center:Boolean,right:Boolean,around:Boolean,between:Boolean,evenly:Boolean,gutter:[Number,String]},setup(e){const t=_((()=>{let t="",n="";const r=[];return e.top?t+="-top":e.middle?t+="-middle":e.bottom&&(t+="-bottom"),e.left?n+="-left":e.center?n+="-center":e.right?n+="-right":e.around?n+="-around":e.between?n+="-between":e.evenly&&(n+="-evenly"),t&&r.push("c-flex"+t),n&&r.push("c-flex"+n),r})),n=_((()=>e.gutter?"string"==typeof e.gutter?+e.gutter:e.gutter:0));return S("row-gutter",n),{flexClasses:t}}});ke.render=function(e,t,n,s,i,a){return r(),o("div",{class:[{"c-row":!e.flex,"c-flex":e.flex},...e.flexClasses],style:{marginLeft:-e.gutter/2+"px",marginRight:-e.gutter/2+"px"}},[c(e.$slots,"default")],6)},ke.install=e=>{e.component("c-row",ke)};var Ie=n({props:{span:[Number,String],offset:[Number,String],push:[Number,String],pull:[Number,String],flex:String},setup:e=>({className:_((()=>{const t=["c-col"];return e.span&&t.push(`c-col-${e.span}`),e.offset&&t.push(`c-col-offset-${e.offset}`),e.push&&t.push(`c-col-push-${e.push}`),e.pull&&t.push(`c-col-pull-${e.pull}`),t})),gutter:x("row-gutter")})});Ie.render=function(e,t,n,s,i,a){return r(),o("div",{class:e.className,style:{flex:e.flex,paddingLeft:e.gutter/2+"px",paddingRight:e.gutter/2+"px"}},[c(e.$slots,"default")],6)},Ie.install=e=>{e.component("c-col",Ie)};var Be=n({props:{size:[String,Number],wrap:Boolean},setup:(e,{slots:t})=>()=>{const n=t.default?t.default():[],r=Number(e.size||4);return j("div",{class:["c-space",{wrap:e.wrap}],style:{"--space-size":isNaN(r)?e.size:`${r}px`}},n.map((e=>j("div",{class:"c-space-item"},[e]))))}});Be.__scopeId="data-v-26d19f55",Be.install=e=>{e.component("c-space",Be)};console.log("0.0.1");const Le=u([]);function Pe(){return new Promise(((e,t)=>{console.log("载入默认数据");const n=new XMLHttpRequest;n.open("get","./data/hero-details.json"),n.responseType="json",n.onerror=()=>{t(new Error("Load Error"))},n.onload=async()=>{try{const t=function(e){const t=[];for(let n=0;n<e.data.length;n++){const r=e.data[n],o={};for(let t=0;t<r.length;t++)o[e.columns[t]]=r[t];t.push(o)}return t}(n.response);await me.clear("heroes");for(const e of t)e.id=2e8-1e3*Number(e.weight),await me.put("heroes",e);e(),Oe()}catch(r){t(r)}},n.send()}))}async function Oe(){Le.value=await me.getAll("heroes")}const De=u([]);N(Z).use(he).use(pe).use((function(e){e.provide(ve,me)})).use((()=>{Oe();const{initAbility:e}={abilities:De,initAbility:async()=>{try{De.value=await me.getAll("abilities")}catch(e){console.log(e)}},addAbility:async e=>{try{await me.add("abilities",e)}catch(t){console.log(t)}},updateAbility:async e=>{try{await me.put("abilities",e)}catch(t){console.log(t)}},removeAbility:async e=>{try{await me.delete("abilities",e.key)}catch(t){console.log(t)}}};e()})).use(we).use(ye).use(Ve).use(ke).use(Ie).use(Be).mount("#app");export{ve as D,W as _,me as a,Ve as b,T as c,$ as d,D as e,q as f,Pe as g,Oe as i,Le as s};
