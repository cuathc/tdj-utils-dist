import{_ as O,E as Yt,o as v,c as $,e as s,G as xt,H as te,I as ee,J as se,K as pt,d as J,s as j,L as Ht,M as G,j as lt,n as wt,f as S,N as ne,O as kt,q as Z,a as E,g as o,h as c,w as T,B as st,F as P,r as N,k as U,i as Y,P as Pt,A as R,p as vt,l as mt,Q as qt,R as oe,S as at,b as ut,T as ae,U as l,V as le,z as ue,W as ie,X as de,v as Ut,Y as V,Z as re,u as ce,C as rt}from"./index.js";import{_ as bt}from"./lodash.js";import{u as pe}from"./useHeroes.js";import ve from"./InputNumber.js";import{b as Tt,d as Ct,a as me,i as _e}from"./shared.js";import{s as Nt}from"./data.js";const fe=["width","height"],he=s("path",{d:"M13 16 l-10 -10 l3 -3 l10 10 l10 -10 l3 3 l-10 10 l10 10 l-3 3 l-10 -10 l-10 10 l-3 -3 z"},null,-1),be=[he];function $e(t,e,n,h,m,p){return v(),$("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},be,8,fe)}const ge=O(Yt,[["render",$e]]),Fe=["width","height"],ye=s("path",{d:"M16 3 l-14 14 l0 6 l14 -14 l14 14 l0 -6 l-14 -14 z"},null,-1),Ce=[ye];function Be(t,e,n,h,m,p){return v(),$("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},Ce,8,Fe)}const we=O(xt,[["render",Be]]),ke=["width","height"],De=s("path",{d:"M16 27 l-14 -14 l0 -6 l14 14 l14 -14 l0 6 l-14 14 z"},null,-1),Ee=[De];function Se(t,e,n,h,m,p){return v(),$("svg",{width:t.width,height:t.height,viewBox:"0 0 32 32"},Ee,8,ke)}const Me=O(te,[["render",Se]]),Ue=["width","height"],Ie=s("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,-1),Ae=[Ie];function Ve(t,e,n,h,m,p){return v(),$("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24"},Ae,8,Ue)}const Rt=O(ee,[["render",Ve]]),He=["width","height"],Pe=s("path",{d:"M18 12.13V10H20V10.3C19.78 10.42 19.57 10.56 19.39 10.74L18 12.13M9.5 11C9.22 11 9 11.22 9 11.5V13H15V11.5C15 11.22 14.78 11 14.5 11H9.5M6 10H4V21H11V19.13L11.13 19H6V10M21 9H3V3H21V9M19 5H5V7H19V5M13 19.96V22H15.04L21.17 15.88L19.13 13.83L13 19.96M22.85 13.47L21.53 12.15C21.33 11.95 21 11.95 20.81 12.15L19.83 13.13L21.87 15.17L22.85 14.19C23.05 14 23.05 13.67 22.85 13.47Z"},null,-1),qe=[Pe];function Te(t,e,n,h,m,p){return v(),$("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24"},qe,8,He)}const Ne=O(se,[["render",Te]]);let yt=0,It=0;const Re=500;function At(){const t=Math.floor(new Date().getTime()/1e3);It===t?yt++:yt=0,It=t;const e=t.toString(16);return`${(Re<<16|yt&255).toString(16)}.${e}`}async function Oe(){try{return await pt.getAll("calculator")}catch{return[]}}async function je(){try{await pt.clear("calculator")}catch(t){alert(t.message)}}async function Ke(t){try{await pt.add("calculator",JSON.parse(JSON.stringify(t)))}catch(e){e instanceof Error?console.log(e.message):console.log(e)}}async function ct(t){try{await pt.put("calculator",JSON.parse(JSON.stringify(t)))}catch(e){e instanceof Error?console.log(e.message):console.log(e)}}async function Vt(t){try{await pt.delete("calculator",t)}catch(e){e instanceof Error?console.log(e.message):console.log(e)}}function Ge(){return{w:2438,g:0,a:"403+363",c:20,x:0}}function Le(){return{a:0}}function Qe(){return{att:0,k:0}}function Ot(){return{a1:1.5,a2:0,att:"15+10+8",da:"10+10",db:"4+10+20",dc:"0",dx:"0",id:"0",cd:"30",name:"1.5\u6280\u80FD",att2:"0",da2:"0",dx2:"0",defGain:"0"}}function ze(){return{a1:1.5,a2:0,att:0,id:0,da:0,db:0,dc:0,dx:0,cd:0,att2:0,da2:0,dx2:0,defGain:0}}function Je(){return[Ot()]}function We(){return{hp:"10000",def:"1872",defGain:"15+5",ra:"0",rb:"4+10"}}const Xe=J({props:{active:Boolean,label:String,dir:String,inline:Boolean,color:String,wait:{type:Number,default:500}},emits:["update:active"],setup(t,{emit:e}){const n=j(),h=j({}),m=j(t.active),p=()=>{const r=n.value.getBoundingClientRect();switch(m.value=!0,e("update:active",m.value),t.dir){case"left":h.value={top:`${r.top+r.height/2}px`,right:`${window.innerWidth-r.left-4}px`,maxWidth:"100%"};break;case"right":h.value={top:`${r.top+r.height/2}px`,left:`${r.right+4}px`,maxWidth:"100%"};break;case"top":h.value={bottom:`${window.innerHeight-r.top-4}px`,left:`${r.left+r.width/2}px`,maxWidth:"100%"};break;default:h.value={top:`${r.bottom+4}px`,left:`${r.left+r.width/2}px`,maxWidth:"100%"}}};let d;const C=()=>{d=setTimeout(p,t.wait)},B=()=>{clearTimeout(d),m.value=!1,e("update:active",m.value)};return Ht(()=>t.active,k=>{m.value=k}),{el:n,style:h,tActive:m,onEnter:C,onOut:B}}});const Ze={class:"c-tooltip-label"};function Ye(t,e,n,h,m,p){return v(),$("div",{ref:"el",class:lt(["c-tooltip",{active:t.tActive,inline:t.inline}]),onMouseenter:e[0]||(e[0]=(...d)=>t.onEnter&&t.onEnter(...d)),onMouseout:e[1]||(e[1]=(...d)=>t.onOut&&t.onOut(...d))},[G(t.$slots,"label",{},()=>[s("div",Ze,S(t.label),1)]),s("div",{class:lt(["c-tooltip-inner",t.dir?`c-tooltip-${t.dir}`:"c-tooltip-bottom",t.color?`c-tooltip-${t.color}`:""]),style:wt(t.style)},[G(t.$slots,"default")],6)],34)}const Dt=O(Xe,[["render",Ye]]),xe=J({components:{Divider:ne,Tooltip:Dt,CalcInput:kt,IconUp:we,IconDown:Me,IconClose:ge,IconCopy:Rt},props:{panel:{type:Object,required:!0},state:{type:Object,required:!0},enemyState:{type:Object,required:!0},itemState:{type:Object,required:!0},showUp:Boolean,showDown:Boolean},emits:["update:itemState","close","up","down","copy"],setup(t,{emit:e}){const n=Z({editor:!1,name:""}),h=(a,f)=>{if(a==="name")return;const w=t.itemState;switch(a){case"a1":case"a2":typeof f=="number"&&(w[a]=f);break;default:typeof f=="string"&&(w[a]=f)}e("update:itemState",w)},m=Z(ze()),p=E({set:a=>h("a1",a),get:()=>t.itemState.a1}),d=E({set:a=>h("a2",a),get:()=>t.itemState.a2}),C=E({set:a=>h("att",a),get:()=>t.itemState.att}),B=E({set:a=>h("id",a),get:()=>t.itemState.id}),k=E({set:a=>h("da",a),get:()=>t.itemState.da}),r=E({set:a=>h("db",a),get:()=>t.itemState.db}),g=E({set:a=>h("dc",a),get:()=>t.itemState.dc}),A=E({set:a=>h("dx",a),get:()=>t.itemState.dx}),K=E({set:a=>h("cd",a),get:()=>t.itemState.cd}),_=E({set:a=>h("att2",a),get:()=>t.itemState.att2}),I=E({set:a=>h("da2",a),get:()=>t.itemState.da2}),L=E({set:a=>h("dx2",a),get:()=>t.itemState.dx2}),Q=E({set:a=>h("defGain",a),get:()=>t.itemState.defGain}),F=Z({a1:p,a2:d,att:C,da:k,db:r,dc:g,dx:A,id:B,cd:K,att2:_,da2:I,dx2:L,defGain:Q}),y=E(()=>{const{state:a}=t,f=(100+m.att)/100;return Math.ceil(a.att*f)}),b=E(()=>{const{state:a}=t,f=(100+m.att+m.att2)/100;return Math.ceil(a.att*f)}),u=()=>{const{state:a,enemyState:f}=t,w=(100+a.k)/100,H=(100+m.da-f.ra)/100,W=(100+m.da+m.da2-f.ra)/100,X=(100+m.db-f.rb)/100,dt=(100+m.dc)/100,ot=(100+m.dx)/100,ft=(100+m.dx+m.dx2)/100,ht=(100+m.cd)/100,Et=(100-m.id)/100,Gt=(100+f.defGain)/100,Lt=(100+f.defGain+m.defGain)/100,Qt=Math.max(0,Math.max(0,f.def*Gt)*Et),zt=Math.max(0,Math.max(0,f.def*Lt)*Et),Jt=Math.max(1,y.value*w-Qt),Wt=Math.max(1,b.value*w-zt),St=Jt*p.value*H*X*ot,Xt=Math.ceil(St*ht),Mt=Wt*d.value*W*X*dt*ft,Zt=Math.ceil(Mt*ht);return{r01:Math.ceil(St),r01c:Xt,r02:Math.ceil(Mt),r02c:Zt}},q=E(()=>u().r01),D=E(()=>u().r01c),tt=E(()=>u().r02),i=E(()=>u().r02c);u();function z(){confirm(`\u786E\u8BA4\u8981\u5220\u9664\u6280\u80FD\u6A21\u677F"${t.itemState.name}"\u5417\uFF1F`)&&e("close")}function et(){n.editor=!0,n.name=t.itemState.name}function $t(){const a=n.name;if(n.editor=!1,n.name="",!a)return;const f=t.itemState;f.name=a,e("update:itemState",f)}function gt(){e("up")}function Ft(){e("down")}function _t(){e("copy")}return{vars:n,values:F,result:m,satt:y,r01:q,r01c:D,r02:tt,r02c:i,onClose:z,onRename:et,onNameEnter:$t,onUp:gt,onDown:Ft,onCopy:_t}}});const x=t=>(vt("data-v-51aeb895"),t=t(),mt(),t),ts={class:"row"},es={class:"col-item"},ss=x(()=>s("div",{class:"label"},"\u6280\u80FD\u3001\u666E\u653B",-1)),ns=R(" \u6280\u80FD\u3001\u666E\u653B\u500D\u7387 "),os={class:"input-group"},as=["step"],ls=x(()=>s("div",{class:"input-ext"},"\u500D",-1)),us={class:"label"},is={class:"input-group"},ds=x(()=>s("div",{style:{clear:"both"}},null,-1)),rs={class:"col-item"},cs=x(()=>s("div",{class:"label"},"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB",-1)),ps=R(" \u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u500D\u7387 "),vs={class:"input-group"},ms=["step"],_s=x(()=>s("div",{class:"input-ext"},"\u500D",-1)),fs={class:"label"},hs={class:"input-group"},bs={class:"col-item"},$s=x(()=>s("div",{class:"label"},"\u6700\u7EC8\u653B\u51FB",-1)),gs={class:"static-control text-center"},Fs={class:"darkgold"},ys=x(()=>s("div",{style:{clear:"both"}},null,-1)),Cs={class:"label"},Bs={class:"bold darkgold"},ws=x(()=>s("span",{class:"bold red"},"(\u66B4\u51FB)",-1)),ks={class:"static-control text-center"},Ds={class:"bold darkgold"},Es={class:"bold red"},Ss={class:"label bold"},Ms={class:"static-control text-center"},Us={class:"bold darkgold"},Is={key:0,class:"bold red"};function As(t,e,n,h,m,p){const d=U("IconCopy"),C=U("IconUp"),B=U("IconDown"),k=U("IconClose"),r=U("Divider"),g=U("Tooltip"),A=U("CalcInput"),K=qt("autofocus");return v(),$(P,null,[o(r,{orientation:"left"},{action:c(()=>[s("span",{onClick:e[4]||(e[4]=(..._)=>t.onCopy&&t.onCopy(..._))},[o(d,{class:"close"})]),t.showUp?(v(),$("span",{key:0,onClick:e[5]||(e[5]=(..._)=>t.onUp&&t.onUp(..._))},[o(C,{class:"close"})])):Y("",!0),t.showDown?(v(),$("span",{key:1,onClick:e[6]||(e[6]=(..._)=>t.onDown&&t.onDown(..._))},[o(B,{class:"close"})])):Y("",!0),s("span",{onClick:e[7]||(e[7]=(..._)=>t.onClose&&t.onClose(..._))},[o(k,{class:"close"})])]),default:c(()=>[t.vars.editor?T((v(),$("input",{key:0,class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=_=>t.vars.name=_),onKeypress:e[1]||(e[1]=Pt((..._)=>t.onNameEnter&&t.onNameEnter(..._),["enter"])),onBlur:e[2]||(e[2]=(..._)=>t.onNameEnter&&t.onNameEnter(..._))},null,544)),[[st,t.vars.name],[K]]):(v(),$("span",{key:1,class:"calc-item-title",onClick:e[3]||(e[3]=(..._)=>t.onRename&&t.onRename(..._))},S(t.itemState.name||"\u6A21\u677F"),1))]),_:1}),s("div",ts,[s("div",es,[o(g,{dir:"top"},{label:c(()=>[ss]),default:c(()=>[ns]),_:1}),s("div",os,[T(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":e[8]||(e[8]=_=>t.values.a1=_)},null,8,as),[[st,t.values.a1,void 0,{number:!0}]]),ls])]),(v(),$(P,null,N([{name:"att",label:"\u653B\u51FB%",tip:"\u4F5C\u7528\u4E8E\u6240\u6709\u60C5\u51B5"},{name:"da",label:"A\u7C7B\u589E\u4F24%",tip:"\u9970\u54C1\u3001\u5404\u7C7Bbuff\u3001\u5929\u8D4B"},{name:"db",label:"B\u7C7B\u589E\u4F24%",tip:"\u661F\u8000\u3001\u661F\u76D8\u3001\u8BCD\u6761"},{name:"dx",label:"X\u7C7B\u589E\u4F24%",tip:"\u6700\u7EC8\u4FEE\u6B63\uFF0C\u5982\u4E00\u5B57\u7535\u65A9"},{name:"id",label:"\u7A7F\u900F%",tip:"\u65E0\u89C6\u9632\u5FA1"},{name:"cd",label:"\u66B4\u4F24%",tip:"\u66B4\u51FB\u4F24\u5BB3"}],_=>s("div",{class:"col-item",key:_.name},[o(g,{dir:"top"},{label:c(()=>[s("div",us,S(_.label),1)]),default:c(()=>[R(" "+S(_.tip),1)]),_:2},1024),s("div",is,[o(A,{class:"input",modelValue:t.values[_.name],"onUpdate:modelValue":I=>t.values[_.name]=I,result:t.result[_.name],"onUpdate:result":I=>t.result[_.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),ds,s("div",rs,[o(g,{dir:"top"},{label:c(()=>[cs]),default:c(()=>[ps]),_:1}),s("div",vs,[T(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":e[9]||(e[9]=_=>t.values.a2=_)},null,8,ms),[[st,t.values.a2,void 0,{number:!0}]]),_s])]),(v(),$(P,null,N([{name:"dc",label:"C\u7C7B\u589E\u4F24%",tip:"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u589E\u4F24"},{name:"att2",label:"\u653B\u51FB\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u653B\u51FB\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"da2",label:"\u4F24\u5BB3\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u4F24\u5BB3\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"defGain",label:"\u9632\u5FA1\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"},{name:"dx2",label:"X\u7C7B\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"}],_=>s("div",{class:"col-item",key:_.name},[o(g,{dir:"top"},{label:c(()=>[s("div",fs,S(_.label),1)]),default:c(()=>[R(" "+S(_.tip),1)]),_:2},1024),s("div",hs,[o(A,{class:"input",modelValue:t.values[_.name],"onUpdate:modelValue":I=>t.values[_.name]=I,result:t.result[_.name],"onUpdate:result":I=>t.result[_.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),s("div",bs,[$s,s("div",gs,[s("span",Fs,S(t.satt),1)])]),ys,(v(!0),$(P,null,N([{label:"\u4E00\u6BB5\u4F24\u5BB3",v:t.r01,v2:t.r01c},{label:"\u4E8C\u6BB5\u4F24\u5BB3",v:t.r02,v2:t.r02c}],(_,I)=>(v(),$("div",{class:"col-item",key:I},[s("div",Cs,[s("span",Bs,S(_.label),1),ws]),s("div",ks,[s("span",Ds,S(_.v),1),s("span",Es,"("+S(_.v2)+")",1)])]))),128)),(v(!0),$(P,null,N([{label:"\u4E0D\u66B4\u51FB",value:t.r01+t.r02},{label:"\u4E00\u6BB5\u66B4\u51FB",value:t.r01c+t.r02},{label:"\u4E8C\u6BB5\u66B4\u51FB",value:t.r01+t.r02c},{label:"\u5168\u66B4\u51FB",value:t.r01c+t.r02c}],(_,I)=>(v(),$("div",{class:"col-item",key:I},[s("div",Ss,S(_.label),1),s("div",Ms,[s("span",Us,S(_.value),1),(+t.enemyState.hp||0)<=_.value?(v(),$("span",Is," \u51FB\u6740 ")):Y("",!0)])]))),128))])],64)}const Vs=O(xe,[["render",As],["__scopeId","data-v-51aeb895"]]),Hs=["onClick"],Ps=J({__name:"dropdown",props:{pos:{default:"lt"}},setup(t){const e=j(!1),n=()=>{e.value=!0},h=()=>{e.value=!1};return window.addEventListener("click",h,!1),oe(()=>{window.removeEventListener("click",h,!1)}),(m,p)=>(v(),$("div",{class:lt(["dropdown",[{active:e.value}]]),onClick:at(n,["stop"])},[G(m.$slots,"default",{},void 0,!0),s("div",{class:lt(["dropdown-popover",["dropdown-"+t.pos]]),onClick:p[0]||(p[0]=at(()=>{},["stop"]))},[G(m.$slots,"popover",{onClose:h},void 0,!0)],2)],10,Hs))}});const jt=O(Ps,[["__scopeId","data-v-3bf2fdb0"]]);jt.install=t=>{t.component("dropdown",Kt)};const Kt=jt,qs=J({components:{CalcItem:Vs,CalcInput:kt,Tooltip:Dt,Dropdown:Kt},props:{data:{type:Object,required:!0}},emits:["update:data"],setup(t,{emit:e}){const n=E(()=>t.data.basic),h=E(()=>t.data.state),m=E(()=>t.data.enemyState),p=E(()=>t.data.items),d=Z(Le()),C=Z({hp:0,def:0,defGain:0,ra:0,rb:0}),B=[{label:"\u9762\u677F\u653B\u51FB",name:"w",step:1,align:"right"},{label:"\u9B42\u77F3\u653B\u51FB",name:"a",step:1},{label:"\u8BCD\u6761\u653B\u51FB%",name:"c",step:1},{label:"\u661F\u4E4B\u6676\u653B\u51FB",name:"x",step:1}],k=[{label:"\u6C14\u8840",name:"hp",step:1},{label:"\u9632\u5FA1",name:"def",step:1},{label:"\u9632\u5FA1\u4FEE\u6B63%",name:"defGain",step:1},{label:"A\u7C7B\u514D\u4F24%",name:"ra",step:1},{label:"B\u7C7B\u514D\u4F24%",name:"rb",step:1}],r=()=>{const y=n.value.c/100;n.value.g=Math.ceil(d.a+n.value.w*y+n.value.x),h.value.att=n.value.w+n.value.g},g=async()=>{e("update:data",t.data)},A=(y,b)=>{b==="panel"&&r(),g()},K=(y,b)=>{const u=t.data.items;!u||(u[b]=y,g())},_=()=>{const y=t.data.items;!y||(y.push(Ot()),g())},I=y=>{const b=t.data.items;!b||(b.splice(y,1),g())},L=y=>{const b=t.data.items;if(!b)return;const u=b[y],q=b[y-1];b[y-1]=u,b[y]=q,g()},Q=y=>{const b=t.data.items;if(!b)return;const u=b[y],q=b[y+1];b[y+1]=u,b[y]=q,g()},F=y=>{const b=t.data.items;if(!b)return;const u=b[y];b.push(bt.cloneDeep(u)),g()};return Ht(()=>[t.data.basic.w],()=>{r()}),{panel:n,state:h,enemyState:m,panelResult:d,enemyStateResult:C,panelModels:B,enemyModels:k,update:A,items:p,updateItemState:K,addItem:_,delItem:I,upItem:L,downItem:Q,copyItem:F}}});const nt=t=>(vt("data-v-910b1719"),t=t(),mt(),t),Ts=nt(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u57FA\u672C\u53C2\u6570")],-1)),Ns={class:"row"},Rs={class:"label"},Os={class:"input-group"},js=["step","onUpdate:modelValue","onChange"],Ks=["value"],Gs={class:"col-item"},Ls=nt(()=>s("div",{class:"label"},"\u8FDB\u56FE\u653B\u51FB",-1)),Qs={class:"static-control text-center"},zs={class:"darkgold"},Js={class:"col-item"},Ws=nt(()=>s("div",{class:"label"},"\u514B\u5236%",-1)),Xs=R(" \u514B\u523630%"),Zs=nt(()=>s("br",null,null,-1)),Ys=R("\u88AB\u514B\u5236-25%"),xs=nt(()=>s("br",null,null,-1)),tn=R("\u6FC0\u836150% "),en=["onClick"],sn=nt(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u654C\u4EBA\u9762\u677F")],-1)),nn={class:"row"},on={class:"label"},an={class:"input-group"},ln={key:0,class:"input-ext"},un={class:"heading"},dn=nt(()=>s("div",{class:"heading-title"},"\u6280\u80FD\u6A21\u677F",-1)),rn={class:"heading-actions"};function cn(t,e,n,h,m,p){const d=U("CalcInput"),C=U("Tooltip"),B=U("Dropdown"),k=U("CalcItem");return v(),$("div",null,[Ts,s("div",Ns,[(v(!0),$(P,null,N(t.panelModels,r=>(v(),$("div",{class:"col-item",key:r.name},[s("div",Rs,S(r.label),1),s("div",Os,[r.name in t.panelResult?(v(),ut(d,{key:0,modelValue:t.panel[r.name],"onUpdate:modelValue":g=>t.panel[r.name]=g,result:t.panelResult[r.name],"onUpdate:result":g=>t.panelResult[r.name]=g,onChange:g=>t.update(r.name,"panel")},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"])):T((v(),$("input",{key:1,type:"number",class:"input",style:wt({textAlign:r.align}),min:"0",step:r.step,"onUpdate:modelValue":g=>t.panel[r.name]=g,onChange:g=>t.update(r.name,"panel")},null,44,js)),[[st,t.panel[r.name],void 0,{number:!0}]]),r.name==="w"?(v(),$("input",{key:2,class:"input green",readonly:"",style:{textAlign:"left"},value:`+${t.panel.g}`},null,8,Ks)):Y("",!0)])]))),128)),s("div",Gs,[Ls,s("div",Qs,[s("span",zs,S(t.state.att),1)])]),s("div",Js,[o(C,{dir:"top"},{label:c(()=>[Ws]),default:c(()=>[Xs,Zs,Ys,xs,tn]),_:1}),s("div",null,[o(B,null,{popover:c(({onClose:r})=>[s("div",{class:"list",onClick:()=>{r(),t.update("k","state")}},[s("div",{class:"list-item",onClick:e[2]||(e[2]=g=>t.state.k=0)},"\u666E\u901A"),s("div",{class:"list-item",onClick:e[3]||(e[3]=g=>t.state.k=30)},"\u514B\u5236"),s("div",{class:"list-item",onClick:e[4]||(e[4]=g=>t.state.k=-25)},"\u88AB\u514B\u5236"),s("div",{class:"list-item",onClick:e[5]||(e[5]=g=>t.state.k=50)},"\u6FC0\u8361")],8,en)]),default:c(()=>[T(s("input",{class:"input",type:"number","onUpdate:modelValue":e[0]||(e[0]=r=>t.state.k=r),onChange:e[1]||(e[1]=r=>t.update("k","state")),list:"d1"},null,544),[[st,t.state.k,void 0,{number:!0}]])]),_:1})])])]),sn,s("div",nn,[(v(!0),$(P,null,N(t.enemyModels,r=>(v(),$("div",{class:"col-item",key:r.name},[s("div",on,S(r.label),1),s("div",an,[o(d,{modelValue:t.enemyState[r.name],"onUpdate:modelValue":g=>t.enemyState[r.name]=g,result:t.enemyStateResult[r.name],"onUpdate:result":g=>t.enemyStateResult[r.name]=g,onChange:g=>t.update(r.name)},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"]),r.precent?(v(),$("div",ln,"%")):Y("",!0)])]))),128))]),s("div",un,[dn,s("div",rn,[s("div",{class:"btn btn-primary btn-sm",onClick:e[6]||(e[6]=(...r)=>t.addItem&&t.addItem(...r))},"\u6DFB\u52A0")])]),(v(!0),$(P,null,N(t.items,(r,g)=>(v(),ut(k,{key:r,panel:t.panel,state:t.state,enemyState:t.enemyStateResult,itemState:r,showUp:g>0,showDown:t.items&&g<t.items.length-1,"onUpdate:itemState":A=>t.updateItemState(A,g),onClose:A=>t.delItem(g),onUp:A=>t.upItem(g),onDown:A=>t.downItem(g),onCopy:A=>t.copyItem(g)},null,8,["panel","state","enemyState","itemState","showUp","showDown","onUpdate:itemState","onClose","onUp","onDown","onCopy"]))),128))])}const pn=O(qs,[["render",cn],["__scopeId","data-v-910b1719"]]),vn=J({props:{show:Boolean,list:Array,class:String,height:String},emits:["click","close","update:show"],setup(t,{emit:e}){return{wrapClass:E(()=>["c-action-sheet-wrapper",t.class,{show:t.show}]),onClick:(p,d)=>{e("click",{item:p,index:d}),e("close",!1)},onClose:()=>{e("update:show",!1),e("close",!1)}}}});const mn={class:"c-action-sheet-section"},_n={class:"c-action-sheet-extra"},fn={class:"c-action-sheet-list"},hn=["onClick"];function bn(t,e,n,h,m,p){return v(),ut(ae,{to:"body"},[s("div",{class:lt(t.wrapClass)},[s("div",{class:"c-action-sheet-mask",onClick:e[0]||(e[0]=(...d)=>t.onClose&&t.onClose(...d))}),s("div",mn,[s("div",{class:"c-action-sheet-body",style:wt({maxHeight:t.height})},[s("div",_n,[G(t.$slots,"extra")]),s("div",fn,[(v(!0),$(P,null,N(t.list,(d,C)=>(v(),$("div",{class:"c-action-sheet-item",key:C,onClick:B=>t.onClick(d,C)},[G(t.$slots,"default",{record:d})],8,hn))),128))])],4)])],2)])}const Bt=O(vn,[["render",bn]]);Bt.install=t=>{t.component("action-sheet",Bt)};const $n={class:"hero-item"},gn=["src","alt","title"],Fn={class:"hero-item-label"},yn=J({__name:"HeroSelect",props:{show:{type:Boolean}},emits:["click","update:show"],setup(t,{emit:e}){const{heroes:n,getHeroIcon:h}=pe(),m=p=>{e("click",p)};return(p,d)=>(v(),ut(l(Bt),{class:"hero-select",show:t.show,list:l(n),height:"80vh",onClick:m,"onUpdate:show":d[0]||(d[0]=C=>p.$emit("update:show",C))},{extra:c(()=>[G(p.$slots,"extra")]),default:c(({record:C})=>[s("div",$n,[s("img",{src:l(h)(C),alt:C.name,title:C.name,width:"128",height:"128"},null,8,gn),s("div",Fn,S(C.name),1)])]),_:3},8,["show","list"]))}});const Cn=J({props:{header:String,activeKey:Boolean},emits:["update:activeKey","toggle"],setup(t,{emit:e}){const n=E({get:()=>t.activeKey,set:m=>{e("update:activeKey",m)}});return{active:n,toggle:()=>{const m=!n.value;n.value=m,e("toggle",m)}}}});const Bn=t=>(vt("data-v-829ec263"),t=t(),mt(),t),wn=Bn(()=>s("div",{class:"panel-icon"},[s("svg",{width:"16",height:"16",viewBox:"-16 -16 32 32"},[s("path",{d:"M6 0 l-12 -12 l0 2 l10 10 l-10 10 l0 2 l12 -12z",fill:"currentColor"})])],-1)),kn={class:"panel-title"},Dn={class:"panel-body"},En={class:"panel-content"};function Sn(t,e,n,h,m,p){return v(),$("div",{class:lt(["panel",{active:t.active}])},[s("div",{class:"panel-header",onClick:e[1]||(e[1]=(...d)=>t.toggle&&t.toggle(...d))},[wn,s("div",kn,[G(t.$slots,"header",{},()=>[R(S(t.header)+"\xA0",1)],!0)]),s("div",{class:"panel-actions",onClick:e[0]||(e[0]=at(()=>{},["stop"]))},[G(t.$slots,"actions",{},void 0,!0)])]),s("div",Dn,[s("div",En,[G(t.$slots,"default",{},void 0,!0)])])],2)}const Mn=O(Cn,[["render",Sn],["__scopeId","data-v-829ec263"]]);function Un(){const t="red_team",e=le(),n=j([]),h=async B=>await e.put(t,B).then(k=>{if(n.value.findIndex(r=>r._id===k)===-1){const r=bt.cloneDeep(B);r._id=k,n.value.push(r)}return k}),m=async B=>await e.delete(t,B._id).then(()=>{n.value=n.value.filter(k=>k._id!==B._id)}),p=async B=>{const k=JSON.parse(await B.text());if(!Tt(k)||k.type!=="red_team"){alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}const r=k.data;for(const g of r)await h(g)},d=async()=>{const B={type:"red_team",data:n.value},k=new Blob([JSON.stringify(B)],{type:"application/json"});Ct(k,"red_team.json")};return(async()=>{const B=await e.getAll(t).catch(()=>[]);console.log(B),n.value=B})(),{put:h,del:m,list:n,importData:p,exportData:d}}function In(){const t=()=>({name:"",qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,stoneName:"",hsQixue:0,hsPatt:0,hsPdef:0,hsMatt:0,hsMdef:0,hsHuixin:0,xQixue:0,xPatt:0,xPdef:0,xMatt:0,xMdef:0,xHuixin:0,cQixue:"40+5+5+5",cPatt:"0",cPdef:"0",cMatt:"0",cMdef:"0",cHuixin:"0",rQixue:0,rPatt:0,rPdef:0,rMatt:0,rMdef:0,rHuixin:0}),e=j(t()),n=E(()=>{const p={qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0},d=Nt.find(B=>e.value.stoneName===B.name);d&&(p.qixue=d.t[0]+d.d[0]+d.h[0],p.patt=d.t[1]+d.d[1]+d.h[1],p.matt=d.t[2]+d.d[2]+d.h[2],p.pdef=d.t[3]+d.d[3]+d.h[3],p.mdef=d.t[4]+d.d[4]+d.h[4]);const C={qixue:e.value.hsQixue/100,patt:e.value.hsPatt/100,pdef:e.value.hsPdef/100,matt:e.value.hsMatt/100,mdef:e.value.hsMdef/100,huixin:e.value.hsHuixin/100};return{qixue:Math.round(e.value.qixue*C.qixue+p.qixue+e.value.xQixue),patt:Math.round(e.value.patt*C.patt+p.patt+e.value.xPatt),pdef:Math.round(e.value.pdef*C.pdef+p.pdef+e.value.xPdef),matt:Math.round(e.value.matt*C.matt+p.matt+e.value.xMatt),mdef:Math.round(e.value.mdef*C.mdef+p.mdef+e.value.xMdef),huixin:Math.round(e.value.huixin*C.huixin+p.huixin+e.value.xHuixin)}}),h=E(()=>{const p=n.value,d={qixue:(100+e.value.rQixue)/100,patt:(100+e.value.rPatt)/100,pdef:(100+e.value.rPdef)/100,matt:(100+e.value.rMatt)/100,mdef:(100+e.value.rMdef)/100,huixin:(100+e.value.rHuixin)/100};return{qixue:Math.round((e.value.qixue+p.qixue)*d.qixue),patt:Math.round((e.value.patt+p.patt)*d.patt),pdef:Math.round((e.value.pdef+p.pdef)*d.pdef),matt:Math.round((e.value.matt+p.matt)*d.matt),mdef:Math.round((e.value.mdef+p.mdef)*d.mdef),huixin:Math.round((e.value.huixin+p.huixin)*d.huixin)}});return{state:e,pValue:n,ckValue:h,reset:()=>{e.value=t()},defState:t}}const An={},Vn={class:"c-upload"};function Hn(t,e){return v(),$("div",Vn,[G(t.$slots,"default",{},void 0,!0),s("input",ue({type:"file",class:"c-upload-input",accept:"application/json"},t.$attrs),null,16)])}const Pn=O(An,[["render",Hn],["__scopeId","data-v-b3879154"]]),M=t=>(vt("data-v-65f1a23b"),t=t(),mt(),t),qn={class:"transform-tools-popover"},Tn={class:"transform-tools-popover-toolbar"},Nn=["value"],Rn=["value"],On=M(()=>s("button",{class:"btn btn-sm btn-success"},"\u5BFC\u5165",-1)),jn={class:"transform-tools-popover-content"},Kn={class:"grid-group"},Gn={class:"grid-group-item"},Ln={class:"input-group-title"},Qn=M(()=>s("span",null,"\u57FA\u7840",-1)),zn={class:"grids"},Jn=M(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),Wn=M(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),Xn=M(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),Zn=M(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),Yn=M(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),xn=M(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),to={class:"grid-group-item"},eo={class:"input-group-title"},so=M(()=>s("span",null,"\u9B42\u77F3",-1)),no=M(()=>s("option",{value:""},"\u65E0",-1)),oo=["value"],ao={class:"grids"},lo=M(()=>s("label",{class:"input-label"},"\u6C14\u8840%",-1)),uo=M(()=>s("label",{class:"input-label"},"\u7269\u653B%",-1)),io=M(()=>s("label",{class:"input-label"},"\u7269\u9632%",-1)),ro=M(()=>s("label",{class:"input-label"},"\u6CD5\u653B%",-1)),co=M(()=>s("label",{class:"input-label"},"\u6CD5\u9632%",-1)),po={class:"grid-group-item"},vo={class:"input-group-title"},mo=R(" \u661F\u4E4B\u6676 "),_o=M(()=>s("div",null,"\u6781\u9650\u653B\uFF1A202\u653B\uFF0C198\u8840\uFF0C70\u9632",-1)),fo=M(()=>s("div",null,"\u6781\u9650\u8840\uFF1A456\u8840\uFF0C70\u9632\uFF0C88\u653B",-1)),ho=M(()=>s("div",null,"\u6781\u9650\u9632\uFF1A150\u9632\uFF0C198\u8840\uFF0C88\u653B",-1)),bo={class:"grids"},$o=M(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),go=M(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),Fo=M(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),yo=M(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),Co=M(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),Bo=M(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),wo={class:"grid-group-item"},ko=M(()=>s("div",{class:"input-group-title"},"\u9762\u677F",-1)),Do={class:"grids"},Eo={class:"input-label"},So={class:"input-group"},Mo={class:"input green"},Uo={class:"grid-group-item"},Io=M(()=>s("div",{class:"input-group-title"},"\u4FEE\u6B63",-1)),Ao={class:"grids"},Vo={class:"input-label"},Ho={class:"grid-group-item"},Po=M(()=>s("div",{class:"input-group-title"},"\u53C2\u8003",-1)),qo={class:"grids"},To={class:"input-label"},No=["value"],Ro=J({__name:"transform-tools-modal",props:{show:{type:Boolean}},emits:["init","reference","update:show"],setup(t,{emit:e}){const{state:n,pValue:h,ckValue:m,reset:p,defState:d}=In(),{list:C,put:B,del:k,importData:r,exportData:g}=Un(),A=[{t:"\u6C14\u8840",n:"qixue"},{t:"\u7269\u653B",n:"patt"},{t:"\u7269\u9632",n:"pdef"},{t:"\u6CD5\u653B",n:"matt"},{t:"\u6CD5\u9632",n:"mdef"},{t:"\u4F1A\u5FC3",n:"huixin"}],K=[{t:"\u6C14\u8840%",c:"cQixue",r:"rQixue"},{t:"\u7269\u653B%",c:"cPatt",r:"rPatt"},{t:"\u7269\u9632%",c:"cPdef",r:"rPdef"},{t:"\u6CD5\u653B%",c:"cMatt",r:"rMatt"},{t:"\u6CD5\u9632%",c:"cMdef",r:"rMdef"},{t:"\u4F1A\u5FC3%",c:"cHuixin",r:"rHuixin"}],_=()=>{const b=bt.cloneDeep(n.value);B(b).then(u=>{n.value._id=u,alert("\u5DF2\u4FDD\u5B58")}).catch(()=>{alert("\u4FDD\u5B58\u5931\u8D25")})},I=()=>{!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F")||k(n.value).then(()=>{p()}).catch(()=>{alert("\u5220\u9664\u5931\u8D25")})},L=b=>{const u=b.currentTarget,q=Array.prototype.slice.call(u.files);u.value="",q[0]&&r(q[0])},Q=()=>{g()},F=(b,u)=>{n.value.name=b,n.value.qixue=u.qixue,n.value.patt=u.patt,n.value.pdef=u.pdef,n.value.matt=u.matt,n.value.mdef=u.mdef,n.value.huixin=u.huixin},y=()=>{e("reference")};return e("init",F),(b,u)=>{const q=U("c-col"),D=U("c-space"),tt=U("c-row");return T((v(),$("div",qn,[s("div",Tn,[o(tt,{flex:"",middle:"",gutter:8},{default:c(()=>[o(q,null,{default:c(()=>[s("button",{class:"btn btn-sm btn-link",onClick:y}," \u53C2\u8003 ")]),_:1}),o(q,null,{default:c(()=>[R("ID: "+S(l(n)._id),1)]),_:1}),o(q,{flex:"1 1 auto"},{default:c(()=>[o(D,null,{default:c(()=>[T(s("select",{class:"input input-select",placeholder:"\u8BF7\u9009\u62E9\u5DF2\u6709\u6A21\u677F","onUpdate:modelValue":u[0]||(u[0]=i=>de(n)?n.value=i:null)},[s("option",{value:l(d)()},"\u7A7A\u6A21\u7248",8,Nn),(v(!0),$(P,null,N(l(C),i=>(v(),$("option",{key:i._id,value:i},S(i.name),9,Rn))),128))],512),[[Ut,l(n)]]),s("button",{class:"btn btn-sm btn-primary",onClick:_},"\u4FDD\u5B58"),l(n)._id?(v(),$("button",{key:0,class:"btn btn-sm btn-danger",onClick:I}," \u5220\u9664 ")):Y("",!0),o(Pn,{onInput:L},{default:c(()=>[On]),_:1}),s("button",{class:"btn btn-sm btn-success",onClick:Q}," \u5BFC\u51FA ")]),_:1})]),_:1}),o(q,null,{default:c(()=>[s("span",{class:"transform-tools-popover-close",onClick:u[1]||(u[1]=i=>e("update:show",!1))}," \xD7 ")]),_:1})]),_:1})]),s("div",jn,[s("div",Kn,[s("div",Gn,[s("div",Ln,[o(D,null,{default:c(()=>[Qn,T(s("input",{type:"text",class:"input input-text","onUpdate:modelValue":u[2]||(u[2]=i=>l(n).name=i)},null,512),[[st,l(n).name]])]),_:1})]),s("div",zn,[o(D,null,{default:c(()=>[Jn,o(l(V),{value:l(n).qixue,"onUpdate:value":u[3]||(u[3]=i=>l(n).qixue=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Wn,o(l(V),{value:l(n).patt,"onUpdate:value":u[4]||(u[4]=i=>l(n).patt=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Xn,o(l(V),{value:l(n).pdef,"onUpdate:value":u[5]||(u[5]=i=>l(n).pdef=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Zn,o(l(V),{value:l(n).matt,"onUpdate:value":u[6]||(u[6]=i=>l(n).matt=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Yn,o(l(V),{value:l(n).mdef,"onUpdate:value":u[7]||(u[7]=i=>l(n).mdef=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[xn,o(l(V),{value:l(n).huixin,"onUpdate:value":u[8]||(u[8]=i=>l(n).huixin=i)},null,8,["value"])]),_:1})])]),s("div",to,[s("div",eo,[o(D,null,{default:c(()=>[so,T(s("select",{class:"input input-select","onUpdate:modelValue":u[9]||(u[9]=i=>l(n).stoneName=i)},[no,(v(!0),$(P,null,N(l(Nt),(i,z)=>(v(),$("option",{key:z,value:i.name},S(i.name),9,oo))),128))],512),[[Ut,l(n).stoneName]])]),_:1})]),s("div",ao,[o(D,null,{default:c(()=>[lo,o(l(V),{value:l(n).hsQixue,"onUpdate:value":u[10]||(u[10]=i=>l(n).hsQixue=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[uo,o(l(V),{value:l(n).hsPatt,"onUpdate:value":u[11]||(u[11]=i=>l(n).hsPatt=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[io,o(l(V),{value:l(n).hsPdef,"onUpdate:value":u[12]||(u[12]=i=>l(n).hsPdef=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[ro,o(l(V),{value:l(n).hsMatt,"onUpdate:value":u[13]||(u[13]=i=>l(n).hsMatt=i)},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[co,o(l(V),{value:l(n).hsMdef,"onUpdate:value":u[14]||(u[14]=i=>l(n).hsMdef=i)},null,8,["value"])]),_:1})])]),s("div",po,[s("div",vo,[mo,o(l(Dt),{label:"?",inline:"",dir:"right"},{default:c(()=>[_o,fo,ho]),_:1})]),s("div",bo,[o(D,null,{default:c(()=>[$o,o(l(V),{value:l(n).xQixue,"onUpdate:value":u[15]||(u[15]=i=>l(n).xQixue=i),min:0,max:456,placeholder:"0~456"},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[go,o(l(V),{value:l(n).xPatt,"onUpdate:value":u[16]||(u[16]=i=>l(n).xPatt=i),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Fo,o(l(V),{value:l(n).xPdef,"onUpdate:value":u[17]||(u[17]=i=>l(n).xPdef=i),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[yo,o(l(V),{value:l(n).xMatt,"onUpdate:value":u[18]||(u[18]=i=>l(n).xMatt=i),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Co,o(l(V),{value:l(n).xMdef,"onUpdate:value":u[19]||(u[19]=i=>l(n).xMdef=i),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),o(D,null,{default:c(()=>[Bo,o(l(V),{value:l(n).xHuixin,"onUpdate:value":u[20]||(u[20]=i=>l(n).xHuixin=i),min:0,max:104,placeholder:"0~104"},null,8,["value"])]),_:1})])]),s("div",wo,[ko,s("div",Do,[(v(),$(P,null,N(A,i=>o(D,{key:i.n},{default:c(()=>[s("label",Eo,S(i.t),1),s("div",So,[o(l(V),{readonly:"",value:l(n)[i.n]},null,8,["value"]),s("div",Mo,"+"+S(l(h)[i.n]),1)])]),_:2},1024)),64))])]),s("div",Uo,[Io,s("div",Ao,[(v(),$(P,null,N(K,(i,z)=>o(D,{key:z},{default:c(()=>[s("label",Vo,S(i.t),1),o(l(kt),{modelValue:l(n)[i.c],"onUpdate:modelValue":et=>l(n)[i.c]=et,result:l(n)[i.r],"onUpdate:result":et=>l(n)[i.r]=et},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])]),_:2},1024)),64))])]),s("div",Ho,[Po,s("div",qo,[(v(),$(P,null,N(A,i=>o(D,{key:i.n},{default:c(()=>[s("label",To,S(i.t),1),s("input",{class:"input",readonly:"",value:l(m)[i.n]},null,8,No)]),_:2},1024)),64))])])])])],512)),[[ie,t.show]])}}});const Oo=O(Ro,[["__scopeId","data-v-65f1a23b"]]),jo=J({components:{Calculator:pn,CollapsePanel:Mn,InputNumber:ve,HeroSelect:yn,IconCopy:Rt,IconEdit:Ne,TransformToolsModal:Oo},setup(){const t=Z({index:-1,title:"",selecteds:[]}),e=j([]),n=async()=>{const f={id:At(),title:"\u6A21\u677F",basic:Ge(),state:Qe(),enemyState:We(),items:Je()};await Ke(f),e.value.push(f)},h=async a=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const w=e.value[a];await Vt(w.id),e.value.splice(a,1)},m=async a=>{const f=e.value[a];if(!f)return;const w=t.title;if(!w){p();return}f.title=w,p(),await ct(f)},p=()=>{t.index=-1,t.title=""},d=a=>{const f={type:"calculator",data:[a]},w=new Blob([JSON.stringify(f)],{type:"application/json"});Ct(w,`${a.title}.json`)},C=async a=>{e.value=a},B=j(""),k=a=>new Promise((f,w)=>{const H=new FileReader;H.onload=()=>{f(H.result)},H.onerror=()=>{w(H.error)},H.readAsText(a)}),r=async()=>{if(!!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F")){if(t.selecteds.length>0){const f=t.selecteds.map(w=>e.value[w]);for(const w of f)await Vt(w.id)}else await je();_t()}},g=async a=>{const f=a.currentTarget,w=Array.prototype.slice.call(f.files);if(f.value="",!w||!w[0])return;const H=w[0],W=await k(H),X=JSON.parse(W);let dt=[];if(_e(X))dt=X;else if(Tt(X)&&X.type==="calculator")dt=X.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}for(const ot of dt){await ct(ot);const ft=e.value.findIndex(ht=>ht.id===ot.id);ft===-1?e.value.push(ot):e.value[ft]=ot}},A=async()=>{let a="calculator.json",f=e.value;t.selecteds.length>0&&(f=t.selecteds.map(W=>e.value[W]),a="calculator-selected.json");const w={type:"calculator",data:f},H=new Blob([JSON.stringify(w)],{type:"application/json"});Ct(H,a)};async function K(a,f){!e.value[f]||(e.value[f]=a,await ct(a))}const _=j(-1),I=Z({input:"2283/1.35*1.39",result:0}),{translate:L,xingyao:Q,huazhen:F,xinghun:y,xinghui:b}=me(),u=a=>Math.ceil(a),q=Z({show:!1}),D=a=>{const f=L(a);tt.value&&tt.value(a.name,f)},tt=j(),i=j(!1),z=j(-1),et=j(null),$t=a=>{i.value=!0,z.value=a},gt=({item:a})=>{i.value=!1;const f=z.value;if(f===-1)D(a);else{const H=e.value[f],W=L(a);H.title==="\u6A21\u677F"&&(H.title=a.name),H.basic.w=Math.max(W.patt,W.matt),ct(H)}},Ft=a=>{const f=bt.cloneDeep(a);f.id=At(),console.log(f),e.value.push(f),ct(f)};async function _t(){const a=await Oe();t.selecteds=[],C(a)}return re(()=>{_t()}),{vars:t,activeKey:_,quick:I,list:e,add:n,rename:m,renameClose:p,remove:h,itemExport:d,download:B,onUpdateData:K,clearAll:r,importData:g,exportData:A,heroes:ce,max:Math.max,modal:q,ceilResult:u,selectTpl:D,updateBasic:tt,selectShow:i,selectIndex:z,selectValue:et,openSelect:$t,selectHero:gt,copyItem:Ft,xingyao:Q,huazhen:F,xinghun:y,xinghui:b}}});const it=t=>(vt("data-v-a44b4640"),t=t(),mt(),t),Ko={class:"wrapper"},Go={class:"toolbar"},Lo={style:{padding:"6px 16px"}},Qo=R("\u4F24\u5BB3\u8BA1\u7B97\u5668"),zo={class:"c-upload"},Jo=it(()=>s("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),Wo={style:{padding:"6px 16px"}},Xo={class:"input-group"},Zo=it(()=>s("div",{class:"input-ext"},"=",-1)),Yo={class:"content"},xo={class:"container"},ta=["value"],ea=R(" \u2007 "),sa=["onKeypress"],na={key:1},oa=["onClick"],aa=["onClick"],la=["onClick"],ua=R(" \u91CD\u547D\u540D "),ia=["onClick"],da=R(" \u590D\u5236 "),ra=["onClick"],ca=["onClick"],pa={style:{"text-align":"center"}},va=it(()=>s("span",null,"\u661F\u8000",-1)),ma=it(()=>s("span",null,"\u5316\u81FB",-1)),_a=it(()=>s("span",null,"\u661F\u9B42",-1)),fa=it(()=>s("span",null,"\u661F\u8F89",-1));function ha(t,e,n,h,m,p){const d=U("c-col"),C=U("c-row"),B=U("transform-tools-modal"),k=U("calc-input"),r=U("input-number"),g=U("IconEdit"),A=U("IconCopy"),K=U("Calculator",!0),_=U("CollapsePanel"),I=U("c-space"),L=U("HeroSelect"),Q=qt("autofocus");return v(),$("div",Ko,[s("div",Go,[s("div",Lo,[o(C,{flex:"",middle:"",gutter:16},{default:c(()=>[o(d,{flex:"0 0 auto"},{default:c(()=>[Qo]),_:1}),o(d,{flex:"0 0 auto"},{default:c(()=>[s("button",{class:"btn btn-sm btn-link",onClick:e[0]||(e[0]=F=>t.modal.show=!t.modal.show)}," \u9762\u677F "),t.vars.selecteds.length>0?(v(),$("button",{key:0,class:"btn btn-success",onClick:e[1]||(e[1]=F=>t.vars.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):Y("",!0)]),_:1}),o(d,{flex:"1 1 0"}),o(d,{flex:"0 0 auto"},{default:c(()=>[s("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...F)=>t.clearAll&&t.clearAll(...F))},S(t.vars.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),s("div",zo,[Jo,s("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:e[3]||(e[3]=(...F)=>t.importData&&t.importData(...F))},null,32)]),s("button",{class:"btn btn-success",onClick:e[4]||(e[4]=(...F)=>t.exportData&&t.exportData(...F))},S(t.vars.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),s("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=F=>t.add())},"\u6DFB\u52A0")]),_:1})]),_:1}),o(B,{show:t.modal.show,"onUpdate:show":e[6]||(e[6]=F=>t.modal.show=F),onReference:e[7]||(e[7]=F=>t.openSelect(-1)),onInit:e[8]||(e[8]=F=>t.updateBasic=F)},null,8,["show"])]),s("div",Wo,[s("div",Xo,[o(k,{modelValue:t.quick.input,"onUpdate:modelValue":e[9]||(e[9]=F=>t.quick.input=F),result:t.quick.result,"onUpdate:result":e[10]||(e[10]=F=>t.quick.result=F),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),Zo,o(r,{readonly:"",value:t.ceilResult(t.quick.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),s("div",Yo,[s("div",xo,[(v(!0),$(P,null,N(t.list,(F,y)=>(v(),ut(_,{key:F.id,activeKey:y===t.activeKey,onToggle:b=>t.activeKey=b?y:-1},{header:c(()=>[o(C,{flex:"",middle:""},{default:c(()=>[o(d,null,{default:c(()=>[T(s("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=b=>t.vars.selecteds=b),value:y,onClick:e[12]||(e[12]=at(()=>{},["stop"]))},null,8,ta),[[rt,t.vars.selecteds]]),ea]),_:2},1024),o(d,null,{default:c(()=>[t.vars.index===y?T((v(),$("input",{key:0,type:"text",class:"input","onUpdate:modelValue":e[13]||(e[13]=b=>t.vars.title=b),onClick:e[14]||(e[14]=at(()=>{},["stop"])),onKeypress:Pt(b=>t.rename(y),["enter"])},null,40,sa)),[[st,t.vars.title],[Q]]):(v(),$("span",na,S(F.title),1))]),_:2},1024),o(d,{class:"ml-4",onClick:e[15]||(e[15]=at(()=>{},["stop"]))},{default:c(()=>[t.vars.index===y?(v(),$("button",{key:0,class:"btn btn-sm btn-link",onClick:b=>t.rename(y)}," \u786E\u8BA4 ",8,oa)):(v(),$(P,{key:1},[s("button",{class:"btn btn-sm btn-link",onClick:b=>t.openSelect(y)}," \u9009\u62E9 ",8,aa),s("button",{class:"btn btn-sm btn-link",onClick:b=>{t.vars.index=y,t.vars.title=F.title}},[o(g,{class:"svg-icon"}),ua],8,la),s("button",{class:"btn btn-sm btn-link",onClick:b=>t.copyItem(F)},[o(A,{class:"svg-icon"}),da],8,ia)],64))]),_:2},1024)]),_:2},1024)]),actions:c(()=>[s("button",{class:"btn btn-sm btn-success-outline",onClick:b=>t.itemExport(F)}," \u5BFC\u51FA ",8,ra),s("button",{class:"btn btn-sm btn-danger-outline",onClick:b=>t.remove(y)}," \u5220\u9664 ",8,ca)]),default:c(()=>[y===t.activeKey?(v(),ut(K,{key:0,data:F,"onUpdate:data":b=>t.onUpdateData(b,y)},null,8,["data","onUpdate:data"])):Y("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),o(L,{show:t.selectShow,"onUpdate:show":e[20]||(e[20]=F=>t.selectShow=F),onClick:t.selectHero},{extra:c(()=>[s("div",pa,[o(I,null,{default:c(()=>[s("label",null,[va,T(s("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=F=>t.xingyao=F)},null,512),[[rt,t.xingyao]])]),s("label",null,[ma,T(s("input",{type:"checkbox","onUpdate:modelValue":e[17]||(e[17]=F=>t.huazhen=F)},null,512),[[rt,t.huazhen]])]),s("label",null,[_a,T(s("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=F=>t.xinghun=F)},null,512),[[rt,t.xinghun]])]),s("label",null,[fa,T(s("input",{type:"checkbox","onUpdate:modelValue":e[19]||(e[19]=F=>t.xinghui=F)},null,512),[[rt,t.xinghui]])])]),_:1})])]),_:1},8,["show","onClick"])])}const Ba=O(jo,[["render",ha],["__scopeId","data-v-a44b4640"]]);export{Ba as default};
