import{d as $t,o as r,c as y,p as G,D as _t,f as ue,e as t,a as m,w as U,b as at,y as s,F as Y,g as rt,A as Ge,i as Ut,S as Tt,z as ut,_ as Pt,r as Dt,Q as Vt,R as Ot,H,O as bt,I as Bt,J as St,G as f,m as Ee,N as be,x as Kt,P as Me,B as He,n as Rt,U as ye,q as Le,E as Pe,t as _e}from"./vendor.js";import{_ as Ft,M as Ke,s as At,i as We,I as Je,a as Yt,S as Ht,b as Ye,c as De,d as Be,e as ee,g as Xe,f as Qt,l as Qe,h as Ze,T as tu,j as eu,k as uu,C as nu,m as Fe,n as ou,o as fe,p as au,r as su,q as lu,t as iu,u as ru,v as du,w as cu,x as pu,y as yu,z as Gt,A as _u,B as fu,D as xu,E as vu,F as mu,G as Lt,H as hu,J as Eu,K as xe,L as et,N as ve,O as me,P as bu,Q as Du,R as Bu,U as Fu,V as Cu,W as kt,X as yt,Y as It,Z as Zt,$ as he,a0 as $u}from"./components.js";const wu=$t({name:"Home",components:{}});function gu(o,_,p,k,V,N){return r(),y("div")}const mi=Ft(wu,[["render",gu]]);function Ce(){return{id:0,name:"",key:"none",pinyin:"",is_new:"",pic:"",hero_icon:"",prop:"",prop_icon:"",career:"",career_icon:"",position:"",range:0,speed:0,rarity:"",source:"",weight:0,star1:"",star2:"",star3:"",star4:"",star5:"",star6:"",story_name:"",story_content:"",strategy:"",inherent:"",inherent_name:"",skill:[],qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,qixue_cz:0,patt_cz:0,pdef_cz:0,matt_cz:0,mdef_cz:0,huixin_cz:0,eq_suit3:"",eq_suit6:"",eq_suit9:"",eq1_qixue:0,eq1_patt:0,eq1_pdef:0,eq1_matt:0,eq1_mdef:0,eq1_huixin:0,eq2_qixue:0,eq2_patt:0,eq2_pdef:0,eq2_matt:0,eq2_mdef:0,eq2_huixin:0,eq3_qixue:0,eq3_patt:0,eq3_pdef:0,eq3_matt:0,eq3_mdef:0,eq3_huixin:0,eq4_qixue:0,eq4_patt:0,eq4_pdef:0,eq4_matt:0,eq4_mdef:0,eq4_huixin:0,wp_qixue:0,wp_patt:0,wp_pdef:0,wp_matt:0,wp_mdef:0,wp_huixin:0,wn0_qixue:0,wn0_patt:0,wn0_pdef:0,wn0_matt:0,wn0_mdef:0,wn0_huixin:0,wn1_qixue:0,wn1_patt:0,wn1_pdef:0,wn1_matt:0,wn1_mdef:0,wn1_huixin:0,wn2_qixue:0,wn2_patt:0,wn2_pdef:0,wn2_matt:0,wn2_mdef:0,wn2_huixin:0,hz_qixue:0,hz_patt:0,hz_pdef:0,hz_matt:0,hz_mdef:0,hz_huixin:0,hz_qixuep:0,hz_pattp:0,hz_pdefp:0,hz_mattp:0,hz_mdefp:0,hz_huixinp:0,xh_qixue:0,xh_patt:0,xh_pdef:0,xh_matt:0,xh_mdef:0,xh_huixin:0,xh_qixuep:0,xh_pattp:0,xh_pdefp:0,xh_mattp:0,xh_mdefp:0,xh_huixinp:0}}function Au(){return{editor:G(),defaultHeroState:Ce}}function $e(){const o=G(!1),_=_t({qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0}),p=_t(Ce()),k=G(!1),V=G(!0),N=G(!0),g=G(!1),b=(n,a,B)=>Math.round(n/a*B),v=_t({v:70,eq:16}),h=n=>{const a={qixue:n.qixue,patt:n.patt,pdef:n.pdef,matt:n.matt,mdef:n.mdef,huixin:n.huixin};n.real||(a.qixue+=v.v*n.qixue_cz,a.patt+=v.v*n.patt_cz,a.pdef+=v.v*n.pdef_cz,a.matt+=v.v*n.matt_cz,a.mdef+=v.v*n.mdef_cz,a.huixin+=v.v*n.huixin_cz),a.qixue+=n.wp_qixue,a.patt+=n.wp_patt,a.pdef+=n.wp_pdef,a.matt+=n.wp_matt,a.mdef+=n.wp_mdef,a.huixin+=n.wp_huixin,a.qixue+=n.eq1_qixue,a.patt+=n.eq1_patt,a.pdef+=n.eq1_pdef,a.matt+=n.eq1_matt,a.mdef+=n.eq1_mdef,a.huixin+=n.eq1_huixin,a.qixue+=n.eq2_qixue,a.patt+=n.eq2_patt,a.pdef+=n.eq2_pdef,a.matt+=n.eq2_matt,a.mdef+=n.eq2_mdef,a.huixin+=n.eq2_huixin,a.qixue+=n.eq3_qixue,a.patt+=n.eq3_patt,a.pdef+=n.eq3_pdef,a.matt+=n.eq3_matt,a.mdef+=n.eq3_mdef,a.huixin+=n.eq3_huixin,a.qixue+=n.eq4_qixue,a.patt+=n.eq4_patt,a.pdef+=n.eq4_pdef,a.matt+=n.eq4_matt,a.mdef+=n.eq4_mdef,a.huixin+=n.eq4_huixin,a.qixue+=n.wn0_qixue,a.patt+=n.wn0_patt,a.pdef+=n.wn0_pdef,a.matt+=n.wn0_matt,a.mdef+=n.wn0_mdef,a.huixin+=n.wn0_huixin,a.qixue+=n.wn1_qixue,a.patt+=n.wn1_patt,a.pdef+=n.wn1_pdef,a.matt+=n.wn1_matt,a.mdef+=n.wn1_mdef,a.huixin+=n.wn1_huixin,a.qixue+=n.wn2_qixue,a.patt+=n.wn2_patt,a.pdef+=n.wn2_pdef,a.matt+=n.wn2_matt,a.mdef+=n.wn2_mdef,a.huixin+=n.wn2_huixin;const B={qixue:145,patt:135,pdef:155,matt:135,mdef:155,huixin:100};return k.value&&(B.qixue+=4,B.patt+=4,B.pdef+=4,B.matt+=4,B.mdef+=4),V.value&&n.rarity!=="R"&&(a.qixue+=n.hz_qixue,a.patt+=n.hz_patt,a.pdef+=n.hz_pdef,a.matt+=n.hz_matt,a.mdef+=n.hz_mdef,a.huixin+=n.hz_huixin,B.qixue+=n.hz_qixuep,B.patt+=n.hz_pattp,B.pdef+=n.hz_pdefp,B.matt+=n.hz_mattp,B.mdef+=n.hz_mdefp,B.huixin+=n.hz_huixinp),g.value&&(a.qixue+=n.xh_qixue,a.patt+=n.xh_patt,a.pdef+=n.xh_pdef,a.matt+=n.xh_matt,a.mdef+=n.xh_mdef,a.huixin+=n.xh_huixin),N.value&&(B.qixue+=n.xh_qixuep,B.patt+=n.xh_pattp,B.pdef+=n.xh_pdefp,B.matt+=n.xh_mattp,B.mdef+=n.xh_mdefp,B.huixin+=n.xh_huixinp),{qixue:Math.round(a.qixue*B.qixue/100),patt:Math.round(a.patt*B.patt/100),pdef:Math.round(a.pdef*B.pdef/100),matt:Math.round(a.matt*B.matt/100),mdef:Math.round(a.mdef*B.mdef/100),huixin:Math.round(a.huixin*B.huixin/100)}};function S(){o.value=!0}function Q(){o.value=!1}function E(){o.value=!o.value}return{show:o,level:v,basic:_,form:p,xingyao:k,huazhen:V,xinghun:N,xinghui:g,calc:b,translate:h,open:S,close:Q,toggle:E}}function we(){return Ke}const X=o=>(Vt("data-v-3532b223"),o=o(),Ot(),o),ku={class:"toolbar"},Su=X(()=>t("span",{class:"title"},"\u4EBA\u7269\u5217\u8868",-1)),qu={class:"label-control-inline"},Iu=X(()=>t("span",null,"\u540D\u5B57",-1)),Tu={class:"label-control-inline",style:{width:"80px"}},Uu=X(()=>t("span",null,"\u7B49\u7EA7",-1)),Vu={class:"label-control-inline",style:{width:"80px"}},Ou=X(()=>t("span",null,"\u53CA\u8EAB",-1)),zu={class:"label-control-inline",style:{width:"100px"}},Ru=X(()=>t("span",null,"\u5C5E\u6027",-1)),Nu=X(()=>t("option",{value:""},"\u5168\u90E8",-1)),ju=X(()=>t("option",{value:"\u708E"},"\u708E",-1)),Gu=X(()=>t("option",{value:"\u96F7"},"\u96F7",-1)),Mu=X(()=>t("option",{value:"\u51B0"},"\u51B0",-1)),Hu=X(()=>t("option",{value:"\u5149"},"\u5149",-1)),Lu=X(()=>t("option",{value:"\u6697"},"\u6697",-1)),Pu=X(()=>t("option",{value:"\u5E7D"},"\u5E7D",-1)),Ku=[Nu,ju,Gu,Mu,Hu,Lu,Pu],Wu={class:"label-control-inline",style:{width:"100px"}},Ju=X(()=>t("span",null,"\u804C\u4E1A",-1)),Yu=X(()=>t("option",{value:""},"\u5168\u90E8",-1)),Xu=X(()=>t("option",{value:"\u94C1\u536B"},"\u94C1\u536B",-1)),Qu=X(()=>t("option",{value:"\u4FA0\u5BA2"},"\u4FA0\u5BA2",-1)),Zu=X(()=>t("option",{value:"\u5492\u5E08"},"\u5492\u5E08",-1)),tn=X(()=>t("option",{value:"\u795D\u7531"},"\u795D\u7531",-1)),en=X(()=>t("option",{value:"\u5FA1\u98CE"},"\u5FA1\u98CE",-1)),un=X(()=>t("option",{value:"\u7FBD\u58EB"},"\u7FBD\u58EB",-1)),nn=X(()=>t("option",{value:"\u6597\u5C06"},"\u6597\u5C06",-1)),on=[Yu,Xu,Qu,Zu,tn,en,un,nn],an={class:"c-label"},sn={class:"c-label"},ln={class:"c-label"},rn={class:"c-label"},dn={class:"c-upload"},cn=X(()=>t("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),pn={class:"content"},yn={class:"table-wrap",style:{height:"100%"}},_n={class:"table table-bordered",style:{"min-width":"100%","white-space":"nowrap"}},fn=X(()=>t("colgroup",null,[t("col",{width:"60"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"100"})],-1)),xn={style:{position:"sticky",top:"0"}},vn=X(()=>t("th",null,"#",-1)),mn=X(()=>t("th",null,"\u540D\u5B57",-1)),hn=X(()=>t("th",null,"\u5C5E\u6027",-1)),En=X(()=>t("th",null,"\u804C\u4E1A",-1)),bn=X(()=>t("th",null,"\u64CD\u4F5C",-1)),Dn={class:"cell-static text-center"},Bn={key:0,style:{color:"red"}},Fn={class:"cell-static text-center"},Cn={class:"cell-static text-center"},$n={class:"cell-static text-center"},wn={class:"cell-static text-center"},gn={class:"cell-static text-center"},An={class:"cell-static text-center"},kn={class:"cell-static text-center"},Sn={class:"cell-static text-center"},qn={class:"cell-static text-center"},In={class:"cell-static"},Tn=["onClick"],Un=["onClick"],Vn=$t({__name:"Heroes",setup(o){const _=Je(),p=_t({name:"",prop:"",career:""}),k=ue(()=>ft(At.value)),V=G(-1),{editor:N,defaultHeroState:g}=Au(),b=D=>{const l=At.value.find($=>$.id===D);!l||(V.value=D,N.value=Pt.cloneDeep(l))},v=async D=>{V.value=-1;const l=At.value.find($=>$.id===D.id);if(!!l){Object.assign(l,D);try{if(!_)return;await _.connect(),await _.put("heroes",Pt.cloneDeep(l))}catch($){console.log($)}}};function h(D){if(D instanceof Error)switch(D.name){case"ConstraintError":alert("\u6570\u636E\u5DF2\u7ECF\u5B58\u5728");break;default:alert(D.message)}else alert(D)}async function S(){try{await We()}catch(D){h(D)}}async function Q(){try{if(!_)return;const D=g();await _.connect(),D.custom=1,delete D.id;const l=await _.add("heroes",D),$=await _.get("heroes",l);if(!$)return;At.value.push($)}catch(D){h(D)}}async function E(D){try{if(!_||!D.id||!confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"))return;await _.connect(),await _.delete("heroes",D.id),At.value=At.value.filter(l=>l.id!==D.id)}catch(l){h(l)}}function n(D){return new Promise((l,$)=>{const Z=new FileReader;Z.onload=()=>{l(JSON.parse(Z.result))},Z.onerror=()=>{$(Z.error)},Z.readAsText(D)})}async function a(D){try{const l=D.currentTarget,$=l.files;if(!$||!_)return;await _.connect(),console.log("\u6570\u636E\u5BFC\u5165\u5F00\u59CB");for(let Z=0;Z<$.length;Z++){const x=await n($[Z]);let q=[];if(De(x))q=x;else if(Be(x)&&x.type==="heroes")q=x.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}for(const zt of q)await _.put("heroes",zt);console.log("\u6570\u636E\u5BFC\u5165\u7ED3\u675F")}l.value="",S()}catch(l){h(l)}}function B(D){if(D.ctrlKey){const $=[["name","qixue","patt","pdef","matt","mdef","huixin","qixue_cz","patt_cz","pdef_cz","matt_cz","mdef_cz","huixin_cz"].join(",")];for(const x of At.value)$.push([x.name,x.qixue,x.patt,x.pdef,x.matt,x.mdef,x.huixin,x.qixue_cz,x.patt_cz,x.pdef_cz,x.matt_cz,x.mdef_cz,x.huixin_cz].join(","));const Z=new Blob([$.join(`
`)]);ee(Z,"correct-heroes.csv");return}const l=new Blob([JSON.stringify({type:"heroes",data:At.value})]);ee(l,"heroes.json")}const c=G("name"),J=G("NONE");function it(D){if(c.value===D)switch(J.value){case"DESC":J.value="ASC";break;case"ASC":J.value="NONE";break;default:J.value="DESC"}else c.value=D,J.value="DESC"}function ft(D){let l=D.slice();return p.name&&(l=l.filter($=>$.name.includes(p.name))),p.prop&&(l=l.filter($=>$.prop===p.prop)),p.career&&(l=l.filter($=>$.career===p.career)),l.sort(($,Z)=>{if($.custom)return-1;switch(c.value){case"qixue":case"patt":case"pdef":case"matt":case"mdef":case"huixin":{const x=st($),q=st(Z);return J.value==="DESC"?q[c.value]-x[c.value]:J.value==="ASC"?x[c.value]-q[c.value]:Z.weight-$.weight}default:return Z.weight-$.weight}}),l}async function M(){await Xe(),we().alert("\u5DF2\u6210\u529F\u8F7D\u5165\u9ED8\u8BA4\u6570\u636E")}(!At.value||At.value.length===0)&&S();const{level:nt,translate:st,xingyao:xt,huazhen:ct,xinghun:pt,xinghui:L}=$e();return(D,l)=>{const $=Dt("c-col"),Z=Dt("c-space"),x=Dt("c-row");return r(),y(Y,null,[t("div",Ge({class:"wrapper"},D.$attrs),[t("div",ku,[m(x,{flex:"",middle:"",style:{padding:"4px 16px","white-space":"nowrap","flex-wrap":"wrap",gap:"8px"}},{default:U(()=>[m($,{flex:"1 1 0"},{default:U(()=>[Su,t("label",qu,[Iu,H(t("input",{class:"input",type:"text","onUpdate:modelValue":l[0]||(l[0]=q=>p.name=q),placeholder:"\u540D\u5B57\u8FC7\u6EE4"},null,512),[[bt,p.name]])]),t("label",Tu,[Uu,m(s(Yt),{value:s(nt).v,"onUpdate:value":l[1]||(l[1]=q=>s(nt).v=q),min:"0",max:"70"},null,8,["value"])]),t("label",Vu,[Ou,m(s(Yt),{value:s(nt).eq,"onUpdate:value":l[2]||(l[2]=q=>s(nt).eq=q),min:"0",max:"16"},null,8,["value"])]),t("label",zu,[Ru,H(t("select",{class:"select","onUpdate:modelValue":l[3]||(l[3]=q=>p.prop=q)},Ku,512),[[Bt,p.prop]])]),t("label",Wu,[Ju,H(t("select",{class:"select","onUpdate:modelValue":l[4]||(l[4]=q=>p.career=q)},on,512),[[Bt,p.career]])])]),_:1}),m($,{flex:"0 0 auto"},{default:U(()=>[m(Z,{size:"8"},{default:U(()=>[t("label",an,[H(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[5]||(l[5]=q=>Tt(xt)?xt.value=q:null)},null,512),[[St,s(xt)]]),at(" \u661F\u8000 ")]),t("label",sn,[H(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=q=>Tt(ct)?ct.value=q:null)},null,512),[[St,s(ct)]]),at(" \u5316\u81FB ")]),t("label",ln,[H(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=q=>Tt(pt)?pt.value=q:null)},null,512),[[St,s(pt)]]),at(" \u661F\u9B42 ")]),t("label",rn,[H(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=q=>Tt(L)?L.value=q:null)},null,512),[[St,s(L)]]),at(" \u661F\u8F89 ")]),t("button",{class:"btn btn-danger",onClick:M},"\u8F7D\u5165\u9ED8\u8BA4"),t("div",dn,[cn,t("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:l[9]||(l[9]=q=>a(q))},null,32)]),t("button",{class:"btn btn-success",onClick:B},"\u5BFC\u51FA"),t("button",{class:"btn btn-primary",onClick:l[10]||(l[10]=q=>Q())},"\u6DFB\u52A0")]),_:1})]),_:1})]),_:1})]),t("div",pn,[t("div",yn,[t("table",_n,[fn,t("thead",xn,[t("tr",null,[vn,mn,t("th",null,[at(" \u6C14\u8840 "),m(s(Ht),{type:c.value==="qixue"?J.value:"NONE",onClick:l[11]||(l[11]=q=>it("qixue"))},null,8,["type"])]),t("th",null,[at(" \u7269\u653B "),m(s(Ht),{type:c.value==="patt"?J.value:"NONE",onClick:l[12]||(l[12]=q=>it("patt"))},null,8,["type"])]),t("th",null,[at(" \u7269\u9632 "),m(s(Ht),{type:c.value==="pdef"?J.value:"NONE",onClick:l[13]||(l[13]=q=>it("pdef"))},null,8,["type"])]),t("th",null,[at(" \u6CD5\u653B "),m(s(Ht),{type:c.value==="matt"?J.value:"NONE",onClick:l[14]||(l[14]=q=>it("matt"))},null,8,["type"])]),t("th",null,[at(" \u6CD5\u9632 "),m(s(Ht),{type:c.value==="mdef"?J.value:"NONE",onClick:l[15]||(l[15]=q=>it("mdef"))},null,8,["type"])]),t("th",null,[at(" \u4F1A\u5FC3 "),m(s(Ht),{type:c.value==="huixin"?J.value:"NONE",onClick:l[16]||(l[16]=q=>it("huixin"))},null,8,["type"])]),hn,En,bn])]),t("tbody",null,[(r(!0),y(Y,null,rt(k.value,(q,zt)=>(r(),y("tr",{key:q.id,class:"c-user-row"},[t("td",Dn,[q.custom?(r(),y("span",Bn,"*")):ut("",!0),t("span",null,f(zt+1),1)]),t("td",Fn,f(q.name),1),(r(!0),y(Y,null,rt([s(st)(q)],(vt,T)=>(r(),y(Y,{key:T},[t("td",Cn,f(vt.qixue),1),t("td",$n,f(vt.patt),1),t("td",wn,f(vt.pdef),1),t("td",gn,f(vt.matt),1),t("td",An,f(vt.mdef),1),t("td",kn,f(vt.huixin),1)],64))),128)),t("td",Sn,f(q.prop),1),t("td",qn,f(q.career),1),t("td",In,[m(Z,null,{default:U(()=>[t("button",{class:"btn btn-sm btn-primary-outline",onClick:vt=>b(q.id)}," \u7F16\u8F91 ",8,Tn),t("button",{class:"btn btn-sm btn-danger-outline",onClick:vt=>E(q)},"\u5220\u9664",8,Un)]),_:2},1024)])]))),128))])])])])],16),s(N)?(r(),Ut(s(Ye),{key:0,record:s(N),"onUpdate:record":l[17]||(l[17]=q=>Tt(N)?N.value=q:null),width:"800px",height:"720px",onSave:v},null,8,["record"])):ut("",!0)],64)}}});const On=Ft(Vn,[["__scopeId","data-v-3532b223"]]),hi=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"})),Nt=o=>(Vt("data-v-4a6228d0"),o=o(),Ot(),o),zn={class:"wrapper"},Rn={class:"toolbar"},Nn={style:{padding:"6px 16px"}},jn={class:"c-upload"},Gn=Nt(()=>t("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),Mn={style:{padding:"6px 16px"}},Hn={class:"input-group"},Ln=Nt(()=>t("div",{class:"input-ext"},"=",-1)),Pn={class:"content"},Kn={class:"container"},Wn=["value"],Jn=["onKeypress"],Yn={key:1},Xn=["onClick"],Qn=["onClick"],Zn=["onClick"],to=["onClick"],eo=["onClick"],uo=["onClick"],no=["onClick"],oo={style:{"text-align":"center"}},ao=Nt(()=>t("span",null,"\u7B49\u7EA7",-1)),so=Nt(()=>t("span",null,"\u53CA\u8EAB",-1)),lo=Nt(()=>t("span",null,"\u661F\u8000",-1)),io=Nt(()=>t("span",null,"\u5316\u81FB",-1)),ro=Nt(()=>t("span",null,"\u661F\u9B42",-1)),co=Nt(()=>t("span",null,"\u661F\u8F89",-1)),po=$t({__name:"Calculator",setup(o){const{exportImage:_}=ru(),p=_t({id:"",title:"",selecteds:[],search:""}),k=G([]),V=ue(()=>k.value.filter(T=>T.title.indexOf(p.search)>-1)),N=async()=>{const d={id:fe(),title:"\u6A21\u677F",basic:du(),state:cu(),enemyState:pu(),items:yu()};await au(d),k.value.push(d)},g=async T=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const z=k.value.findIndex(ot=>ot.id===T);z!==-1&&(await su(k.value[z].id),k.value.splice(z,1))},b=async T=>{const d=p.title;if(!d){v();return}const z=k.value.findIndex(mt=>mt.id===T);if(z===-1)return;const ot=k.value[z];ot.title=d,v(),await Qt(ot)},v=()=>{p.id="",p.title=""},h=T=>{try{_(T)}catch{alert("\u5BFC\u51FA\u5931\u8D25\uFF0C\u6570\u636E\u5B58\u5728\u9519\u8BEF")}},S=T=>{const d={type:"calculator",data:[T]},z=new Blob([JSON.stringify(d)],{type:"application/json"});ee(z,`${T.title}.json`)},Q=async T=>{k.value=T},E=T=>new Promise((d,z)=>{const ot=new FileReader;ot.onload=()=>{d(ot.result)},ot.onerror=()=>{z(ot.error)},ot.readAsText(T)}),n=async()=>{if(!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F"))return;let d=V.value;p.selecteds.length>0&&(d=p.selecteds.map(z=>V.value[z]).filter(z=>z)),await lu(d.map(z=>z.id)),vt()},a=async T=>{const d=T.currentTarget,z=Array.prototype.slice.call(d.files);if(d.value="",!z||!z[0])return;const ot=z[0],mt=await E(ot),wt=JSON.parse(mt);let jt=[];if(De(wt))jt=wt;else if(Be(wt)&&wt.type==="calculator")jt=wt.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}await iu(jt),vt()},B=async()=>{let T="calculator.json",d=V.value;p.selecteds.length>0&&(d=p.selecteds.map(mt=>V.value[mt]).filter(mt=>mt),T="calculator-selected.json");const z={type:"calculator",data:d},ot=new Blob([JSON.stringify(z)],{type:"application/json"});ee(ot,T)};async function c(T,d){const z=k.value.findIndex(mt=>mt.id===d);z===-1||!k.value[z]||(k.value[z]=T,await Qt(T))}const J=G(-1),it=_t({input:"2283/1.35*1.39",result:0}),{translate:ft,level:M,xingyao:nt,huazhen:st,xinghun:xt,xinghui:ct}=$e(),pt=T=>Math.ceil(T),L=_t({show:!1}),D=T=>{const d=ft(T);l.value&&l.value(T,d)},l=G(),$=G(!1),Z=G(),x=T=>{$.value=!0,Z.value=T},q=({item:T})=>{if($.value=!1,Z.value){const d=Z.value,z=ft(T);d.title==="\u6A21\u677F"&&(d.title=T.name),d.basic.w=Math.max(z.patt,z.matt),Qt(d)}else D(T)},zt=T=>{const d=Pt.cloneDeep(T);d.id=fe(),console.log(d),k.value.push(d),Qt(d)};async function vt(){const T=await Qe();p.selecteds=[],Q(T)}return Ee(()=>{vt()}),(T,d)=>{const z=Dt("c-col"),ot=Dt("c-row"),mt=Ze,wt=Dt("c-space"),jt=be("autofocus");return r(),y("div",zn,[t("div",Rn,[t("div",Nn,[m(ot,{flex:"",middle:"",gutter:16},{default:U(()=>[m(z,{flex:"0 0 auto"},{default:U(()=>[at("\u4F24\u5BB3\u8BA1\u7B97\u5668")]),_:1}),m(z,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn btn-sm btn-link",onClick:d[0]||(d[0]=I=>L.show=!L.show)},"\u9762\u677F"),p.selecteds.length>0?(r(),y("button",{key:0,class:"btn btn-success",onClick:d[1]||(d[1]=I=>p.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):ut("",!0)]),_:1}),m(z,{flex:"1 1 0"},{default:U(()=>[H(t("input",{type:"text",class:"input",placeholder:"\u540D\u79F0\u8FC7\u6EE4","onUpdate:modelValue":d[2]||(d[2]=I=>p.search=I)},null,512),[[bt,p.search]])]),_:1}),m(z,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn btn-danger",onClick:n},f(p.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),t("div",jn,[Gn,t("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:a},null,32)]),t("button",{class:"btn btn-success",onClick:B},f(p.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),t("button",{class:"btn btn-primary",onClick:d[3]||(d[3]=I=>N())},"\u6DFB\u52A0")]),_:1})]),_:1}),m(s(tu),{show:L.show,"onUpdate:show":d[4]||(d[4]=I=>L.show=I),onReference:d[5]||(d[5]=I=>x()),onInit:d[6]||(d[6]=I=>l.value=I)},null,8,["show"])]),t("div",Mn,[t("div",Hn,[m(mt,{modelValue:it.input,"onUpdate:modelValue":d[7]||(d[7]=I=>it.input=I),result:it.result,"onUpdate:result":d[8]||(d[8]=I=>it.result=I),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),Ln,m(s(Yt),{readonly:"",value:pt(it.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),t("div",Pn,[t("div",Kn,[(r(!0),y(Y,null,rt(V.value,(I,Mt)=>(r(),Ut(s(Fe),{key:I.id,activeKey:Mt===J.value,onToggle:dt=>J.value=dt?Mt:-1},{header:U(()=>[m(ot,{flex:"",middle:""},{default:U(()=>[m(z,null,{default:U(()=>[H(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":d[9]||(d[9]=dt=>p.selecteds=dt),value:Mt,onClick:d[10]||(d[10]=Kt(()=>{},["stop"]))},null,8,Wn),[[St,p.selecteds]]),at(" \u2007 ")]),_:2},1024),m(z,null,{default:U(()=>[p.id===I.id?H((r(),y("input",{key:0,type:"text",class:"input","onUpdate:modelValue":d[11]||(d[11]=dt=>p.title=dt),onClick:d[12]||(d[12]=Kt(()=>{},["stop"])),onKeypress:Me(dt=>b(I.id),["enter"])},null,40,Jn)),[[bt,p.title],[jt]]):(r(),y("span",Yn,f(I.title),1))]),_:2},1024),m(z,{class:"ml-4",onClick:d[13]||(d[13]=Kt(()=>{},["stop"]))},{default:U(()=>[p.id===I.id?(r(),y("button",{key:0,class:"btn btn-sm btn-link",onClick:dt=>b(I.id)},"\u786E\u8BA4",8,Xn)):(r(),y(Y,{key:1},[t("button",{class:"btn btn-sm btn-link",onClick:dt=>x(I)},"\u9009\u62E9",8,Qn),t("button",{class:"btn btn-sm btn-link",onClick:dt=>{p.id=I.id,p.title=I.title}},[m(s(eu),{class:"svg-icon"}),at(" \u91CD\u547D\u540D ")],8,Zn),t("button",{class:"btn btn-sm btn-link",onClick:dt=>zt(I)},[m(s(uu),{class:"svg-icon"}),at(" \u590D\u5236 ")],8,to)],64))]),_:2},1024)]),_:2},1024)]),actions:U(()=>[t("button",{class:"btn btn-sm btn-success-outline",onClick:dt=>h(I)},"\u5BFC\u51FA\u56FE\u50CF",8,eo),t("button",{class:"btn btn-sm btn-success-outline",onClick:dt=>S(I)},"\u5BFC\u51FA",8,uo),t("button",{class:"btn btn-sm btn-danger-outline",onClick:dt=>g(I.id)},"\u5220\u9664",8,no)]),default:U(()=>[Mt===J.value?(r(),Ut(s(nu),{key:0,data:I,"onUpdate:data":dt=>c(dt,I.id)},null,8,["data","onUpdate:data"])):ut("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),m(s(ou),{show:$.value,"onUpdate:show":d[20]||(d[20]=I=>$.value=I),onClick:q},{extra:U(()=>[t("div",oo,[m(wt,null,{default:U(()=>[t("label",null,[ao,m(s(Yt),{class:"mini-input",min:"0",max:"70",value:s(M).v,"onUpdate:value":d[14]||(d[14]=I=>s(M).v=I)},null,8,["value"])]),t("label",null,[so,m(s(Yt),{class:"mini-input",min:"0",max:"16",value:s(M).eq,"onUpdate:value":d[15]||(d[15]=I=>s(M).eq=I)},null,8,["value"])]),t("label",null,[lo,H(t("input",{type:"checkbox","onUpdate:modelValue":d[16]||(d[16]=I=>Tt(nt)?nt.value=I:null)},null,512),[[St,s(nt)]])]),t("label",null,[io,H(t("input",{type:"checkbox","onUpdate:modelValue":d[17]||(d[17]=I=>Tt(st)?st.value=I:null)},null,512),[[St,s(st)]])]),t("label",null,[ro,H(t("input",{type:"checkbox","onUpdate:modelValue":d[18]||(d[18]=I=>Tt(xt)?xt.value=I:null)},null,512),[[St,s(xt)]])]),t("label",null,[co,H(t("input",{type:"checkbox","onUpdate:modelValue":d[19]||(d[19]=I=>Tt(ct)?ct.value=I:null)},null,512),[[St,s(ct)]])])]),_:1})])]),_:1},8,["show"])])}}});const yo=Ft(po,[["__scopeId","data-v-4a6228d0"]]),Ei=Object.freeze(Object.defineProperty({__proto__:null,default:yo},Symbol.toStringTag,{value:"Module"})),_o={},fo={class:"table-wrap"},xo=t("table",{class:"table",style:{"min-width":"100%"}},[t("thead",{style:{position:"sticky",top:"0"}},[t("tr",null,[t("th",null,"#"),t("th",null,"ID"),t("th",null,"\u540D\u79F0"),t("th",null,"\u63CF\u8FF0"),t("th",null,"\u7C7B\u578B"),t("th",null,"\u53C2\u6570")])]),t("tbody")],-1),vo=[xo];function mo(o,_){return r(),y("div",fo,vo)}const ho=Ft(_o,[["render",mo]]),bi=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),Eo={},bo={class:"table-wrap"},Do=He('<table class="table" style="min-width:100%;"><thead style="position:sticky;top:0;"><tr><th>#</th><th>ID</th><th>\u540D\u79F0</th><th>\u63CF\u8FF0</th><th>\u53EF\u9A71\u6563</th><th>\u53EF\u6269\u6563</th><th>\u53EF\u590D\u5236</th><th>\u53C2\u6570</th></tr></thead><tbody></tbody></table>',1),Bo=[Do];function Fo(o,_){return r(),y("div",bo,Bo)}const Co=Ft(Eo,[["render",Fo]]),Di=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),$o=[30,70,150,300,600,600,600,800,800,800,1e3,1e3,1e3,1200,1200,1200,2e3,2e3,2e3,0];function wo(o){const _=[];for(let p=0,k=0;p<o.length;p++)_[p]={lvl:p+1,exp:o[p],total:k},k+=o[p];return _}const te=wo($o),go=$t({setup(){const o=G(1),_=G(0),p=ue(()=>{const k=te[o.value-1];return te[te.length-1].total-k.total-_.value});return{levels:te,curLvl:o,curExp:_,curReq:p}}}),Ao=""+new URL("../assets/selected.svg",import.meta.url).href;const ne=o=>(Vt("data-v-a71401e9"),o=o(),Ot(),o),ko={class:"wrapper"},So={class:"content"},qo={class:"table table-bordered text-center no-select",style:{width:"100%"}},Io=ne(()=>t("thead",null,[t("tr",null,[t("th",null,"\u4F4D\u9636"),t("th",null,"\u5347\u7EA7\u5386\u7EC3"),t("th",null,"\u7D2F\u8BA1\u5386\u7EC3")])],-1)),To=["onClick"],Uo={style:{position:"relative","padding-left":"24px"}},Vo={key:0,src:Ao,alt:"",width:"16",height:"16",style:{position:"absolute",left:"4px",top:"0",bottom:"0",margin:"auto"}},Oo={class:"row"},zo={class:"col-8"},Ro=ne(()=>t("div",{class:"label"},"\u5F53\u524D\u4F4D\u9636",-1)),No=["value"],jo={class:"col-8"},Go=ne(()=>t("div",{class:"label"},"\u5F53\u524D\u5386\u7EC3",-1)),Mo={class:"col-8"},Ho=ne(()=>t("div",{class:"label"},"\u6EE1\u9636\u8FD8\u9700",-1)),Lo=["value"];function Po(o,_,p,k,V,N){return r(),y("div",ko,[t("div",So,[t("table",qo,[Io,t("tbody",null,[(r(!0),y(Y,null,rt(o.levels,g=>(r(),y("tr",{key:g.lvl,onClick:b=>o.curLvl=g.lvl},[t("td",null,[t("div",Uo,[o.curLvl===g.lvl?(r(),y("img",Vo)):ut("",!0),at(" "+f(g.lvl),1)])]),t("td",null,f(g.exp),1),t("td",null,f(g.total),1)],8,To))),128))])]),t("div",Oo,[t("div",zo,[Ro,t("input",{class:"input",type:"number",min:"1",max:"20",readonly:"",value:o.curLvl},null,8,No)]),t("div",jo,[Go,H(t("input",{class:"input",type:"number","onUpdate:modelValue":_[0]||(_[0]=g=>o.curExp=g)},null,512),[[bt,o.curExp]])]),t("div",Mo,[Ho,t("input",{class:"input",type:"number",readonly:"",value:o.curReq},null,8,Lo)])])])])}const Ko=Ft(go,[["render",Po],["__scopeId","data-v-a71401e9"]]),Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Wo=o=>(Vt("data-v-ad305fc0"),o=o(),Ot(),o),Jo={class:"table text-center",style:{width:"100%"}},Yo=Wo(()=>t("thead",null,[t("tr",null,[t("th",null,"\u804C\u4E1A"),t("th",null,"\u6C14\u8840"),t("th",null,"\u7269\u653B"),t("th",null,"\u7269\u9632"),t("th",null,"\u6CD5\u653B"),t("th",null,"\u6CD5\u9632"),t("th",null,"\u4F1A\u5FC3")])],-1)),Xo=$t({__name:"WuNei",setup(o){const _=Object.keys(Gt);return(p,k)=>(r(),y("table",Jo,[Yo,t("tbody",null,[(r(!0),y(Y,null,rt(s(_),V=>(r(),y("tr",{key:V},[t("td",null,f(s(_u)[V]),1),t("td",null,f(s(Gt)[V].u[0]),1),t("td",null,f(s(Gt)[V].c[1]),1),t("td",null,f(s(Gt)[V].d[2]),1),t("td",null,f(s(Gt)[V].c[3]),1),t("td",null,f(s(Gt)[V].d[4]),1),t("td",null,f(s(Gt)[V].u[5]),1)]))),128))])]))}});const Qo=Ft(Xo,[["__scopeId","data-v-ad305fc0"]]),Fi=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Zo=o=>(Vt("data-v-1b51bddc"),o=o(),Ot(),o),ta={class:"content"},ea=Zo(()=>t("table",{class:"table text-center eq-sticky",style:{width:"100%"}},[t("thead",null,[t("tr",null,[t("th",null,"\u90E8\u4F4D"),t("th",null,"\u6C14\u8840"),t("th",null,"\u7269\u653B"),t("th",null,"\u7269\u9632"),t("th",null,"\u6CD5\u653B"),t("th",null,"\u6CD5\u9632"),t("th",null,"\u4F1A\u5FC3")])])],-1)),ua={class:"table text-center",style:{width:"100%"}},na=$t({__name:"Equipment",setup(o){const _={xk:"\u4FA0\u5BA2",xk_f:"\u4FA0\u5BA2\u6CD5",ys:"\u7FBD\u58EB",tw:"\u94C1\u536B",tw2:"\u94C1\u536B2",zs:"\u5492\u5E08",zs2:"\u5492\u5E082",zy:"\u795D\u7531",yf:"\u5FA1\u98CE",yf2:"\u5FA1\u98CE2",dj:"\u6597\u5C06"},p=Object.keys(_),k=G("");function V(N){k.value=k.value===N?"":N}return(N,g)=>(r(),y("div",ta,[(r(!0),y(Y,null,rt(s(p),b=>(r(),Ut(s(Fe),{class:"eq-panel",key:b,activeKey:k.value===b,header:_[b],onToggle:v=>V(b)},{default:U(()=>[ea,t("table",ua,[t("tbody",null,[(r(!0),y(Y,null,rt(s(fu)[b],(v,h)=>(r(),y(Y,{key:h},[t("tr",{class:Rt({odd:h%2===1})},[t("td",null,"\u5934\u90E8+"+f(h),1),t("td",null,f(v[0][0]),1),t("td",null,f(v[0][1]),1),t("td",null,f(v[0][2]),1),t("td",null,f(v[0][3]),1),t("td",null,f(v[0][4]),1),t("td",null,f(v[0][5]),1)],2),t("tr",{class:Rt({odd:h%2===1})},[t("td",null,"\u8EAB\u4F53+"+f(h),1),t("td",null,f(v[1][0]),1),t("td",null,f(v[1][1]),1),t("td",null,f(v[1][2]),1),t("td",null,f(v[1][3]),1),t("td",null,f(v[1][4]),1),t("td",null,f(v[1][5]),1)],2),t("tr",{class:Rt({odd:h%2===1})},[t("td",null,"\u8170\u90E8+"+f(h),1),t("td",null,f(v[2][0]),1),t("td",null,f(v[2][1]),1),t("td",null,f(v[2][2]),1),t("td",null,f(v[2][3]),1),t("td",null,f(v[2][4]),1),t("td",null,f(v[2][5]),1)],2),t("tr",{class:Rt({odd:h%2===1})},[t("td",null,"\u624B\u90E8+"+f(h),1),t("td",null,f(v[3][0]),1),t("td",null,f(v[3][1]),1),t("td",null,f(v[3][2]),1),t("td",null,f(v[3][3]),1),t("td",null,f(v[3][4]),1),t("td",null,f(v[3][5]),1)],2)],64))),128))])])]),_:2},1032,["activeKey","header","onToggle"]))),128))]))}});const oa=Ft(na,[["__scopeId","data-v-1b51bddc"]]),Ci=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),ge={a1:"\u653B\u51FB",a2:"\u4F24\u5BB3",a3:"\u7A7F\u900F",a4:"\u53CD\u51FB",a5:"\u66B4\u51FB",d1:"\u6C14\u8840",d2:"\u7269\u514D",d3:"\u6CD5\u514D",d4:"\u7269\u9632",d5:"\u6CD5\u9632",d6:"\u66B4\u6297"},Ae={T:{a1:[4,10],a2:[4,10],a3:[4,10],a4:[4,10],a5:[4,10],d1:[2,5],d2:[2,5],d3:[2,5],d4:[2,5],d5:[2,5],d6:[2,5]},D:{a1:[2,5],a2:[2,5],a3:[2,5],a4:[2,5],a5:[2,5],d1:[4,10],d2:[4,10],d3:[4,10],d4:[4,10],d5:[4,10],d6:[4,10]},H:{a1:[3,7],a2:[3,7],a3:[3,7],a4:[3,7],a5:[3,7],d1:[3,7],d2:[3,7],d3:[3,7],d4:[3,7],d5:[3,7],d6:[3,7]}},ke=[{name:"a1"},{name:"a2"},{name:"a3"},{name:"a4"},{name:"a5"},{name:"d1"},{name:"d2"},{name:"d3"},{name:"d4"},{name:"d5"},{name:"d6"}],aa=$t({components:{StoneList:xu},setup(){const o=G(!1),_=_t({a1:11,a2:10,a3:6,a4:3,a5:1,d1:7,d2:5,d3:5,d4:1,d5:1,d6:0}),p=_t({a1:0,a2:0,a3:0,a4:0,a5:1,d1:12,d2:9,d3:9,d4:2,d5:2,d6:0}),k=_t({a1:12,a2:1,a3:0,a4:0,a5:0,d1:9,d2:8,d3:8,d4:1,d5:1,d6:0}),V=[{name:"p1",text:"\u6781\u54C1"},{name:"p2",text:"\u4F18\u79C0"},{name:"p3",text:"\u826F\u597D"},{name:"p4",text:"\u4E00\u822C"}],N=["one","two","three","four"],g=_t({one:"a1",two:"a2",three:"a3",four:"a4"}),b=_t({one:1,two:1,three:1,four:1}),v=G("A"),h=G("T"),S=a=>{let B=0;return a[g.one]&&(B+=a[g.one]*b.one),a[g.two]&&(B+=a[g.two]*b.two),a[g.three]&&(B+=a[g.three]*b.three),a[g.four]&&(B+=a[g.four]*b.four),B};function Q(){let a=0;switch(v.value){case"A":a+=S(_);break;case"D":a+=S(p);break;case"N":a+=S(k);break}return a}const E=G(0);return{t:ge,setting:o,stateA:_,stateD:p,stateN:k,rules:Ae,models:ke,models2:V,names:N,formState:g,formStateValue:b,jobType:v,stoneType:h,score:E,onUpdate:a=>{a.currentTarget.reportValidity()&&(E.value=Q())}}}});const qt=o=>(Vt("data-v-f3fb6e8a"),o=o(),Ot(),o),sa={class:"wrapper"},la={class:"toobar"},ia={class:"table table-horizontal table-nopadding",style:{width:"280px"}},ra=qt(()=>t("thead",null,[t("tr",null,[t("th",{width:"25%"},[t("div",{class:"label"},"\u8BCD\u6761")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u8F93\u51FA")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u5766\u514B")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u6CBB\u7597")])])],-1)),da={class:"label"},ca=["onUpdate:modelValue"],pa=["onUpdate:modelValue"],ya=["onUpdate:modelValue"],_a={class:"affix"},fa={class:"form-item-inline"},xa=qt(()=>t("div",{class:"label-control"},"\u804C\u4E1A\u7C7B\u578B",-1)),va=qt(()=>t("option",{value:"A"},"\u8F93\u51FA",-1)),ma=qt(()=>t("option",{value:"D"},"\u5766\u514B",-1)),ha=qt(()=>t("option",{value:"N"},"\u6CBB\u7597",-1)),Ea=[va,ma,ha],ba={class:"form-item-inline"},Da=qt(()=>t("div",{class:"label-control"},"\u9B42\u77F3\u7C7B\u578B",-1)),Ba=qt(()=>t("option",{value:"T"},"\u5929",-1)),Fa=qt(()=>t("option",{value:"D"},"\u5730",-1)),Ca=qt(()=>t("option",{value:"H"},"\u8352",-1)),$a=[Ba,Fa,Ca],wa={class:"label-control"},ga=["onUpdate:modelValue"],Aa=["value"],ka={class:"score-box"},Sa=qt(()=>t("span",{class:"text-bold"},"\u9B42\u77F3\u5F97\u5206\uFF1A",-1)),qa={style:{color:"#ff4446","font-size":"125%"}},Ia={class:"content"};function Ta(o,_,p,k,V,N){const g=Dt("c-col"),b=Dt("c-row"),v=Dt("c-input-number"),h=vu;return r(),y("div",sa,[t("div",la,[m(b,{flex:"",middle:"",style:{padding:"5px 15px"}},{default:U(()=>[m(g,{flex:"1 0 auto"}),m(g,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn",onClick:_[0]||(_[0]=S=>o.setting=!o.setting)},"\u8BBE\u7F6E")]),_:1})]),_:1}),t("div",{class:Rt(["setting",{block:o.setting}])},[m(b,null,{default:U(()=>[m(g,{span:"24"},{default:U(()=>[t("table",ia,[ra,t("tbody",null,[(r(!0),y(Y,null,rt(o.models,S=>(r(),y("tr",{key:S.name},[t("td",null,[t("div",da,f(o.t[S.name]),1)]),t("td",null,[H(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":Q=>o.stateA[S.name]=Q},null,8,ca),[[bt,o.stateA[S.name]]])]),t("td",null,[H(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":Q=>o.stateD[S.name]=Q},null,8,pa),[[bt,o.stateD[S.name]]])]),t("td",null,[H(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":Q=>o.stateN[S.name]=Q},null,8,ya),[[bt,o.stateN[S.name]]])])]))),128))])])]),_:1})]),_:1})],2)]),t("div",_a,[t("form",{onChange:_[3]||(_[3]=(...S)=>o.onUpdate&&o.onUpdate(...S))},[m(b,null,{default:U(()=>[m(g,{span:"18"},{default:U(()=>[t("div",fa,[xa,H(t("select",{class:"select","onUpdate:modelValue":_[1]||(_[1]=S=>o.jobType=S)},Ea,512),[[Bt,o.jobType]])]),t("div",ba,[Da,H(t("select",{class:"select","onUpdate:modelValue":_[2]||(_[2]=S=>o.stoneType=S)},$a,512),[[Bt,o.stoneType]])])]),_:1}),m(g,{span:"18"},{default:U(()=>[(r(!0),y(Y,null,rt(o.names,(S,Q)=>(r(),y("div",{class:"form-item",key:S},[t("div",wa,"\u8BCD\u6761"+f("1234"[Q]),1),H(t("select",{class:"select","onUpdate:modelValue":E=>o.formState[S]=E},[(r(!0),y(Y,null,rt(o.models,E=>(r(),y("option",{value:E.name,key:E.name},f(o.t[E.name]),9,Aa))),128))],8,ga),[[Bt,o.formState[S]]]),m(v,{class:"auto-width",value:o.formStateValue[S],"onUpdate:value":E=>o.formStateValue[S]=E,min:o.rules[o.stoneType][o.formState[S]][0],max:o.rules[o.stoneType][o.formState[S]][1]},null,8,["value","onUpdate:value","min","max"])]))),128))]),_:1})]),_:1})],32),t("div",ka,[Sa,t("span",qa,f(o.score),1)])]),t("div",Ia,[m(h)])])}const Ua=Ft(aa,[["render",Ta],["__scopeId","data-v-f3fb6e8a"]]),$i=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),Va=$t({components:{CDivider:mu},setup(){const o={T:"\u5929",D:"\u5730",H:"\u8352"},_=G("T"),p=G([]);function k(){p.value=[]}function V(g,b){return g+Math.floor(Math.random()*(b-g+1))}function N(g){const b=[];for(let v=0;v<g;v++){const h=[],S=[...ke];for(let Q=0,E=S.length-1;Q<4;Q++){const n=V(0,E),a=S[n],B=Ae[_.value][a.name],c=V(B[0],B[1]);h.push({type:o[_.value],name:a.name,value:c,rate:c/B[1]}),S[n]=S[E],E--}b.push(h)}b.length>0&&(p.value=b)}return{t:ge,randomType:_,randomList:p,cleanRandom:k,tryRandom:N}}});const Xt=o=>(Vt("data-v-95209f08"),o=o(),Ot(),o),Oa={class:"page-container"},za=Xt(()=>t("span",null,"\u6A21\u62DF\u9B42\u77F3",-1)),Ra=Xt(()=>t("option",{value:"T"},"\u5929",-1)),Na=Xt(()=>t("option",{value:"D"},"\u5730",-1)),ja=Xt(()=>t("option",{value:"H"},"\u8352",-1)),Ga=[Ra,Na,ja],Ma={class:"random-stone-items"},Ha=Xt(()=>t("div",null,null,-1));function La(o,_,p,k,V,N){const g=Dt("CDivider");return r(),y("div",Oa,[m(g,{orientation:"left",style:{position:"sticky",top:"40px","background-color":"#fff"}},{action:U(()=>[H(t("select",{class:"select","onUpdate:modelValue":_[0]||(_[0]=b=>o.randomType=b),style:{"margin-right":"8px"}},Ga,512),[[Bt,o.randomType]]),t("button",{class:"btn",onClick:_[1]||(_[1]=b=>o.tryRandom(1))},"\u6765\u4E00\u679A"),t("button",{class:"btn",onClick:_[2]||(_[2]=b=>o.tryRandom(10))},"\u6765\u5341\u679A"),t("button",{class:"btn",onClick:_[3]||(_[3]=b=>o.tryRandom(100))},"\u6765\u767E\u679A"),t("button",{class:"btn",onClick:_[4]||(_[4]=b=>o.cleanRandom())},"\u6E05\u7A7A")]),default:U(()=>[za]),_:1}),t("div",Ma,[(r(!0),y(Y,null,rt(o.randomList,(b,v)=>(r(),y("div",{class:"random-stone-item",key:v},[t("div",null,f(b[0].type),1),Ha,(r(!0),y(Y,null,rt(b,h=>(r(),y(Y,{key:h},[t("div",{class:Rt({"random-stone-lv0":h.rate<.6,"random-stone-lv1":h.rate>=.6&&h.rate<.8,"random-stone-lv2":h.rate>=.8&&h.rate<.9,"random-stone-lv3":h.rate>=.9})},f(o.t[h.name]),3),t("div",{class:Rt({"random-stone-lv0":h.rate<.6,"random-stone-lv1":h.rate>=.6&&h.rate<.8,"random-stone-lv2":h.rate>=.8&&h.rate<.9,"random-stone-lv3":h.rate>=.9})},f(h.value)+"% ",3)],64))),128))]))),128))])])}const Pa=Ft(Va,[["render",La],["__scopeId","data-v-95209f08"]]),wi=Object.freeze(Object.defineProperty({__proto__:null,default:Pa},Symbol.toStringTag,{value:"Module"})),Ka=o=>(Vt("data-v-8c2745cd"),o=o(),Ot(),o),Wa={class:"wrapper"},Ja={class:"toolbar"},Ya=Ka(()=>t("span",{class:"title"},"\u661F\u4E4B\u6676\u5217\u8868",-1)),Xa={class:"content"},Qa={class:"star-pos"},Za=["onClick","onContextmenu"],ts={key:0},es={key:1},us={key:2},ns={key:3},os={key:4},as={key:5},ss={key:0},ls={key:1},is={key:2},rs={key:3},ds={key:4},cs={key:5},ps=$t({__name:"StarCrystals",setup(o){const _=G(!1),p=G(),k=G([{name:"\u6676\u7CB9\xB7\u9633",position:Lt.ATT},{name:"\u6676\u7CB9\xB7\u9633",position:Lt.ATT},{name:"\u6676\u7CB9\xB7\u9716",position:Lt.XUE},{name:"\u6676\u7CB9\xB7\u9716",position:Lt.XUE},{name:"\u6676\u7CB9\xB7\u8679",position:Lt.DEF},{name:"\u6676\u7CB9\xB7\u8679",position:Lt.DEF}]),V=v=>{p.value=v,_.value=!0},N=v=>{v.value=void 0,_.value=!0},g=v=>{!p.value||(p.value.value=v)},b=ue(()=>{const v=[0,0,0,0,0,0];return k.value.forEach(h=>{!h.value||(v[0]+=h.value.qixue,v[1]+=h.value.patt,v[2]+=h.value.pdef,v[3]+=h.value.matt,v[4]+=h.value.mdef,v[5]+=h.value.huixin)}),v});return(v,h)=>{const S=Dt("c-col"),Q=Dt("c-row");return r(),y("div",Wa,[t("div",Ja,[m(Q,{flex:"",middle:""},{default:U(()=>[m(S,{flex:"1 1 0"},{default:U(()=>[Ya]),_:1})]),_:1})]),t("div",Xa,[t("div",Qa,[(r(!0),y(Y,null,rt(k.value,(E,n)=>(r(),y("div",{key:n,class:Rt(["star-pos-item",{active:E===p.value}]),onClick:a=>V(E),onContextmenu:Kt(a=>N(E),["prevent"])},[t("div",null,f(E.name),1),E.value?(r(),y(Y,{key:0},[E.value.patt?(r(),y("div",ts,"\u7269\u653B +"+f(E.value.patt),1)):ut("",!0),E.value.matt?(r(),y("div",es,"\u6CD5\u653B +"+f(E.value.matt),1)):ut("",!0),E.value.huixin?(r(),y("div",us,"\u4F1A\u5FC3 +"+f(E.value.huixin),1)):ut("",!0),E.value.qixue?(r(),y("div",ns,"\u6C14\u8840 +"+f(E.value.qixue),1)):ut("",!0),E.value.pdef?(r(),y("div",os,"\u7269\u9632 +"+f(E.value.pdef),1)):ut("",!0),E.value.mdef?(r(),y("div",as,"\u6CD5\u9632 +"+f(E.value.mdef),1)):ut("",!0)],64)):ut("",!0)],42,Za))),128))]),(r(!0),y(Y,null,rt([b.value],(E,n)=>(r(),y("div",{class:"sum-result props",key:n},[E[0]?(r(),y("span",ss,"\u6C14\u8840 +"+f(E[0]),1)):ut("",!0),E[1]?(r(),y("span",ls,"\u7269\u653B +"+f(E[1]),1)):ut("",!0),E[2]?(r(),y("span",is,"\u7269\u9632 +"+f(E[2]),1)):ut("",!0),E[3]?(r(),y("span",rs,"\u6CD5\u653B +"+f(E[3]),1)):ut("",!0),E[4]?(r(),y("span",ds,"\u6CD5\u9632 +"+f(E[4]),1)):ut("",!0),E[5]?(r(),y("span",cs,"\u4F1A\u5FC3 +"+f(E[5]),1)):ut("",!0)]))),128)),p.value?(r(),Ut(s(hu),{key:0,show:_.value,"onUpdate:show":h[0]||(h[0]=E=>_.value=E),position:p.value.position,onSelect:g},null,8,["show","position"])):ut("",!0)])])}}});const ys=Ft(ps,[["__scopeId","data-v-8c2745cd"]]),gi=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),_s=[{name:"\u7A7A\u767D\u573A\u666F",width:15,height:15,data:[]},{name:"\u5316\u8352\u5E7B\u5883",width:17,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:14,y:0,type:1},{x:15,y:0,type:1},{x:16,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:15,y:1,type:1},{x:16,y:1,type:1},{x:0,y:2,type:1},{x:7,y:2,type:6},{x:8,y:2,type:6},{x:9,y:2,type:6},{x:16,y:2,type:1},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:5,y:4,type:6},{x:6,y:4,type:6},{x:10,y:4,type:6},{x:11,y:4,type:6},{x:5,y:6,type:6},{x:6,y:6,type:6},{x:10,y:6,type:6},{x:11,y:6,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:9,y:7,type:6},{x:10,y:7,type:6},{x:0,y:8,type:1},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:16,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:15,y:9,type:1},{x:16,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:14,y:10,type:1},{x:15,y:10,type:1},{x:16,y:10,type:1}]},{name:"\u96EA\u5CAD\u5E7B\u5883",width:15,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:3,y:1,type:6},{x:4,y:1,type:6},{x:5,y:1,type:6},{x:6,y:1,type:6},{x:7,y:1,type:6},{x:8,y:1,type:6},{x:9,y:1,type:6},{x:10,y:1,type:6},{x:11,y:1,type:6},{x:12,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:2,type:1},{x:1,y:2,type:1},{x:2,y:2,type:1},{x:3,y:2,type:6},{x:11,y:2,type:6},{x:12,y:2,type:1},{x:13,y:2,type:1},{x:14,y:2,type:1},{x:6,y:4,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:3,y:5,type:6},{x:11,y:5,type:6},{x:6,y:6,type:6},{x:7,y:6,type:6},{x:8,y:6,type:6},{x:0,y:8,type:1},{x:1,y:8,type:1},{x:2,y:8,type:1},{x:3,y:8,type:6},{x:11,y:8,type:6},{x:12,y:8,type:1},{x:13,y:8,type:1},{x:14,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:2,y:9,type:1},{x:3,y:9,type:6},{x:4,y:9,type:6},{x:5,y:9,type:6},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:11,y:9,type:6},{x:12,y:9,type:1},{x:13,y:9,type:1},{x:14,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:5,y:10,type:6},{x:6,y:10,type:6},{x:7,y:10,type:6},{x:8,y:10,type:6},{x:9,y:10,type:6},{x:12,y:10,type:1},{x:13,y:10,type:1},{x:14,y:10,type:1}]},{name:"\u5730\u754C\u5E7B\u5883",width:17,height:13,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:10,y:0,type:6},{x:11,y:0,type:6},{x:14,y:0,type:1},{x:15,y:0,type:1},{x:16,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:6,y:1,type:6},{x:10,y:1,type:6},{x:14,y:1,type:1},{x:15,y:1,type:1},{x:16,y:1,type:1},{x:0,y:2,type:1},{x:1,y:2,type:1},{x:6,y:2,type:6},{x:10,y:2,type:6},{x:15,y:2,type:1},{x:16,y:2,type:1},{x:0,y:3,type:1},{x:1,y:3,type:1},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:15,y:3,type:1},{x:16,y:3,type:1},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:9,y:4,type:6},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:15,y:9,type:1},{x:16,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:6,y:10,type:6},{x:10,y:10,type:6},{x:15,y:10,type:1},{x:16,y:10,type:1},{x:0,y:11,type:1},{x:1,y:11,type:1},{x:2,y:11,type:1},{x:6,y:11,type:6},{x:10,y:11,type:6},{x:14,y:11,type:1},{x:15,y:11,type:1},{x:16,y:11,type:1},{x:0,y:12,type:1},{x:1,y:12,type:1},{x:2,y:12,type:1},{x:5,y:12,type:6},{x:6,y:12,type:6},{x:7,y:12,type:6},{x:8,y:12,type:6},{x:9,y:12,type:6},{x:10,y:12,type:6},{x:11,y:12,type:6},{x:14,y:12,type:1},{x:15,y:12,type:1},{x:16,y:12,type:1}]},{name:"\u7ED3\u754C\u5E7B\u5883",width:11,height:11,data:[{x:5,y:8,type:1},{x:2,y:5,type:1},{x:5,y:5,type:1},{x:8,y:5,type:1},{x:5,y:2,type:1}]},{name:"\u57CE\u9685\u5E7B\u5883",width:15,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:1},{x:6,y:0,type:1},{x:7,y:0,type:1},{x:8,y:0,type:1},{x:9,y:0,type:1},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:6,y:1,type:1},{x:8,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:2,type:1},{x:14,y:2,type:1},{x:4,y:4,type:5},{x:5,y:5,type:5},{x:9,y:5,type:5},{x:10,y:6,type:5},{x:0,y:8,type:1},{x:14,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:6,y:9,type:1},{x:8,y:9,type:1},{x:13,y:9,type:1},{x:14,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:5,y:10,type:1},{x:6,y:10,type:1},{x:7,y:10,type:1},{x:8,y:10,type:1},{x:9,y:10,type:1},{x:12,y:10,type:1},{x:13,y:10,type:1},{x:14,y:10,type:1}]},{name:"\u5E7D\u7A74\u5E7B\u5883",width:11,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:0,y:1,type:1},{x:0,y:2,type:1},{x:3,y:2,type:6},{x:4,y:2,type:6},{x:2,y:3,type:6},{x:3,y:3,type:6},{x:4,y:3,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:6,y:8,type:6},{x:7,y:8,type:6},{x:10,y:8,type:1},{x:10,y:9,type:1},{x:9,y:10,type:1},{x:10,y:10,type:1}]},{name:"\u5996\u5C71\u5E7B\u5883",width:17,height:11,data:[]},{name:"\u8D64\u7802\u5E7B\u5883",width:15,height:7,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:6,y:0,type:1},{x:7,y:0,type:1},{x:8,y:0,type:1},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:12,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:5,type:1},{x:1,y:5,type:1},{x:2,y:5,type:1},{x:12,y:5,type:1},{x:13,y:5,type:1},{x:14,y:5,type:1},{x:0,y:6,type:1},{x:1,y:6,type:1},{x:2,y:6,type:1},{x:6,y:6,type:1},{x:7,y:6,type:1},{x:8,y:6,type:1},{x:12,y:6,type:1},{x:13,y:6,type:1},{x:14,y:6,type:1}]}],R=o=>(Vt("data-v-e2aa6b1b"),o=o(),Ot(),o),fs={class:"wrapper"},xs={class:"toolbar"},vs={class:"setting"},ms={class:"label-control"},hs=R(()=>t("span",null,"\u7F16\u8F91\u6A21\u5F0F",-1)),Es={class:"label-control"},bs=R(()=>t("span",null,"\u8303\u56F4",-1)),Ds={class:"label-control"},Bs=R(()=>t("span",null,"\u5F62\u72B6",-1)),Fs=R(()=>t("option",{value:1},"\u83F1\u5F62",-1)),Cs=R(()=>t("option",{value:2},"\u5708\u6570",-1)),$s=[Fs,Cs],ws={class:"label-control"},gs=R(()=>t("span",null,"\u6392\u5E8F",-1)),As=R(()=>t("option",{value:1},"\u8DDD\u79BBX",-1)),ks=R(()=>t("option",{value:2},"\u8DDD\u79BBY",-1)),Ss=R(()=>t("option",{value:3},"X\u4F18\u5148",-1)),qs=R(()=>t("option",{value:4},"Y\u4F18\u5148",-1)),Is=[As,ks,Ss,qs],Ts=R(()=>t("button",{class:"btn"},"\u9884\u8BBE\u573A\u666F",-1)),Us={class:"list"},Vs=["onClick"],Os=R(()=>t("div",{style:{flex:"1 1 0"}},null,-1)),zs=R(()=>t("article",null,[t("h2",null,"\u8BF4\u660E"),t("p",null,"\u70B9\u51FB\u9884\u8BBE\u573A\u666F\uFF0C\u53EF\u4EE5\u8F7D\u5165\u4E00\u4E9B\u9884\u8BBE\u7684\u573A\u666F\u3002"),t("p",null,"\u53F3\u4FA7\u5355\u4F4D\u53EF\u901A\u8FC7\u62D6\u66F3\u62C9\u5165\u7F51\u683C\u3002"),t("p",null,[at(" \u9009\u4E2D\u7F51\u683C\u4E2D\u7684\u5355\u4F4D\u53EF\u4EE5\u4F7F\u7528\u201C\u602A\u529B\u4E71\u795E\u201D\u3001\u201C\u5F00\u8F66\u201D\u529F\u80FD\u3002"),t("br"),at(" \u201C\u602A\u529B\u4E71\u795E\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u975E\u540C\u961F\u5355\u4F4D\u3002"),t("br"),at(" \u201C\u5F00\u8F66\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u540C\u961F\u5355\u4F4D\u3002"),t("br"),at(" \u4F7F\u7528\u529F\u80FD\u524D\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40\uFF0C\u65B9\u4FBF\u9884\u89C8\u7ED3\u679C\u540E\u5FEB\u901F\u8FD8\u539F\u5E03\u5C40\u3002 ")])],-1)),Rs={class:"color-container"},Ns={class:"label-control"},js=R(()=>t("span",null,"\u9884\u89C8",-1)),Gs={class:"label-control"},Ms=R(()=>t("span",null,"\u6587\u5B57",-1)),Hs={class:"label-control"},Ls=R(()=>t("span",null,"\u80CC\u666F",-1)),Ps=R(()=>t("label",{class:"label-control"},[t("span",null,"\u9884\u8BBE")],-1)),Ks={class:"color-tpls"},Ws={width:"32",height:"32",viewBox:"0 0 24 24",fill:"#a9a9a9",style:{"pointer-events":"none"}},Js=R(()=>t("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},null,-1)),Ys=[Js],Xs={class:"props-container"},Qs={key:0,class:"props-content"},Zs={class:"label-control"},tl=R(()=>t("span",null,"\u9884\u89C8",-1)),el={class:"label-control"},ul=R(()=>t("span",null,"\u6587\u5B57",-1)),nl={class:"label-control"},ol=R(()=>t("span",null,"\u80CC\u666F",-1)),al={class:"label-control"},sl=R(()=>t("span",null,"\u5927\u5C0F",-1)),ll={class:"label-control"},il=R(()=>t("span",null,"\u5185\u5BB9",-1)),rl={class:"label-control"},dl=R(()=>t("span",null,"\u5730\u5F62",-1)),cl=["value"],pl=["value"],yl=["value"],_l=["value"],fl={class:"label-control"},xl=R(()=>t("span",null,"Id",-1)),vl={class:"label-control"},ml=R(()=>t("span",null,"\u7C7B\u578B",-1)),hl=["value"],El=["value"],bl=["value"],Dl=["value"],Bl={class:"label-control"},Fl=R(()=>t("span",null,"\u98DE\u884C",-1)),Cl={class:"controls"},$l={key:0,class:"label-control"},wl=R(()=>t("span",null,"\u5355\u4F4DID",-1)),gl=["value"],Al={key:1,class:"label-control"},kl=R(()=>t("span",null,"\u961F\u4F0D",-1)),Sl=R(()=>t("option",{value:void 0},"\u961F\u4F0D\u7A7A",-1)),ql=R(()=>t("option",{value:0},"\u961F\u4F0D0",-1)),Il=R(()=>t("option",{value:1},"\u961F\u4F0D1",-1)),Tl=R(()=>t("option",{value:2},"\u961F\u4F0D2",-1)),Ul=[Sl,ql,Il,Tl],Vl={class:"content"},Ol={class:"grids"},zl={class:"panel-right"},Rl={class:"controls"},Nl={class:"label-control"},jl=R(()=>t("span",null,"\u961F\u4F0D",-1)),Gl=R(()=>t("option",{value:0},"\u961F\u4F0D0",-1)),Ml=R(()=>t("option",{value:1},"\u961F\u4F0D1",-1)),Hl=R(()=>t("option",{value:2},"\u961F\u4F0D2",-1)),Ll=[Gl,Ml,Hl],Pl={class:"heroes-scroll"},Kl={class:"heroes"},Wl=$t({__name:"Grids",setup(o){const{rows:_,cols:p,actorId:k,grids:V,selects:N,gridColors:g,defGridUnit:b,defGridState:v,defGrid:h,cleanGrid:S,cleanGrids:Q,setSize:E,getGrid:n,gridForEach:a}=Eu(),B=G(),c=_t({editor:1,selectRange:5,shape:1,sortType:1,color:g[0].color,bgcolor:g[0].bgcolor,terrain:void 0}),J=h();J.terrain={image:xe,type:et.DISABLED};const it=h();it.terrain={image:ve,type:et.CLIFF};const ft=h();ft.terrain={image:me,type:et.BLOCKED};function M(u){c.color=u.color,c.bgcolor=u.bgcolor,c.terrain=void 0}function nt(u){c.color="",c.bgcolor="",c.terrain=u.terrain}const{heroes:st}=bu(),xt=ye(h(b())),ct=ye(st.value.map(u=>{const e=h(),i=b();return i.unitId=u.id,i.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${u.hero_icon}.png`,i.name=u.name,e.unit=i,e}));Le(st,()=>{ct.value=st.value.map(u=>{const e=h(),i=b();return i.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${u.hero_icon}.png`,e.unit=i,e})});function pt(u,e,i,P){const O=[];return a(K=>{K.state=v()}),a(K=>{const A=Math.abs(u-K.x),j=Math.abs(e-K.y),F=A+j,Ct=Math.max(A,j),C=A>1?A-1:A+j>1?j-1:j;switch(P){case 1:F<=i&&(K.state.d=F,K.state.q=Ct,K.state.d1=C,O.push(K));break;case 2:Math.abs(A)<=i&&Math.abs(j)<=i&&(K.state.d=F,K.state.q=Ct,K.state.d1=C,O.push(K));break}}),O}function L(u,e,i,P,O,K,A){const j=pt(u,e,i,P);switch(j.forEach(F=>{F.data.color=K,F.data.bgcolor=A}),N.value=j,O){case 1:N.value.sort(D);break;case 2:N.value.sort(l);break;case 3:N.value.sort($);break;case 4:N.value.sort(Z);break}for(let F=0;F<N.value.length;F++){const Ct=N.value[F];Ct.data.txt=String(F+1)}}function D(u,e){return u.state.q!==e.state.q?u.state.q-e.state.q:u.state.d!==e.state.d?u.state.d-e.state.d:u.x!==e.x?u.x-e.x:u.y!==e.y?u.y-e.y:0}function l(u,e){return u.state.q!==e.state.q?u.state.q-e.state.q:u.state.d!==e.state.d?u.state.d-e.state.d:u.y!==e.y?u.y-e.y:u.x!==e.x?u.x-e.x:0}function $(u,e){return u.x!==e.x?u.x-e.x:u.y!==e.y?u.y-e.y:0}function Z(u,e){return u.y!==e.y?u.y-e.y:u.x!==e.x?u.x-e.x:0}const x=_t({enabled:!1});function q(){Q()}function zt(){x.enabled=!1}function vt(u,e){var i;switch(c.editor){case 1:case 4:x.current=e,(i=B.value)==null||i.focus();break;case 3:Q(),L(e.x,e.y,c.selectRange,c.shape,c.sortType,c.color,c.bgcolor);break}}function T(u,e){if(u.button===0)switch(c.editor){case 2:{x.enabled=!0,e.data.color=c.color,e.data.bgcolor=c.bgcolor,c.terrain?(e.terrain.type=c.terrain.type,e.terrain.image=c.terrain.image):(e.terrain.type=et.NONE,e.terrain.image="");break}}}function d(u,e){u.button===0&&x.enabled&&(e.data.color=c.color,e.data.bgcolor=c.bgcolor,c.terrain?(e.terrain.type=c.terrain.type,e.terrain.image=c.terrain.image):(e.terrain.type=et.NONE,e.terrain.image=""))}function z(){x.current=void 0}const ot=G({width:15,height:15});function mt(){try{const u=localStorage.getItem("grids");if(!u)return;const e=JSON.parse(u);ot.value=e}catch{}}function wt(){if(!confirm("\u786E\u5B9A\u8981\u4FDD\u5B58\u5417\uFF1F"))return;let e=V.value.flat().filter(i=>i.terrain.type!==et.NONE||i.unit&&i.unit.actorId>0);e=Pt.cloneDeep(e),ot.value={width:p.value,height:_.value,data:e},localStorage.setItem("grids",JSON.stringify(ot.value))}function jt(){const u=ot.value;if(!!u.data){E(u.width,u.height);for(const e of u.data){const i=n(e.x,e.y);!i||(e.data&&(i.data=e.data),e.terrain&&(i.terrain=e.terrain),e.unit&&e.unit.actorId>0&&(i.unit=e.unit))}}}const I=G(!1);function Mt(u){E(u.width,u.height),u.data.forEach(e=>{const i=n(e.x,e.y);if(!!i)switch(e.type){case et.DISABLED:i.terrain={image:xe,type:et.DISABLED};break;case et.CLIFF:i.terrain={image:ve,type:et.CLIFF};break;case et.BLOCKED:i.terrain={image:me,type:et.BLOCKED};break}}),I.value=!1}function dt(){var j;const u=x.current;if(!u)return;ot.value||wt();const e=(j=u.unit)==null?void 0:j.team;let i,P,O=[];for(i=u.x-2;i<=u.x+2;i++)for(P=u.y-2;P<=u.y+2;P++){const F=n(i,P);!F||F.terrain.type!==et.DISABLED&&(F.x===u.x&&F.y===u.y?(O[0]&&O.push(O[0]),O[0]=F):O.push(F))}O=O.filter(F=>F.unit&&F.unit.team!==e&&!(F.x===u.x&&F.y===u.y));const K=O.map(F=>({data:F.data,unit:F.unit}));O.forEach(F=>{S(F)});const A=pt(u.x,u.y,4,2).filter(F=>F.terrain.type!==et.BLOCKED&&!(F.x===u.x&&F.y===u.y)).sort(l).map(F=>[F.x,F.y]);for(const F of K)for(const[Ct,C]of A){const w=n(Ct,C);if(!!w&&!(w.unit&&w.unit.actorId>0)&&w.terrain.type!==et.DISABLED&&w.terrain.type!==et.BLOCKED&&!(w.terrain.type===et.CLIFF&&!F.unit.fly)){w.data=F.data,w.unit=F.unit;break}}}let ht;function Se(){const u=x.current;if(!u)return;const e=[{x:0,y:1,overlay:kt.ARROW_UP},{x:1,y:0,overlay:kt.ARROW_RIGHT},{x:0,y:-1,overlay:kt.ARROW_DOWN},{x:-1,y:0,overlay:kt.ARROW_LEFT}];for(const i of e){const P=n(u.x+i.x,u.y+i.y);if(!!P){P.overlay=i.overlay;for(let O=2;O<=4;O++){const K=n(u.x+i.x*O,u.y+i.y*O);!K||(K.overlay=kt.HIGHLIGHT)}}}ht=u}function qe(u){var C;if(!ht||!u||u===kt.HIGHLIGHT)return;const e=(C=ht.unit)==null?void 0:C.team;let i,P,O=[];for(i=ht.x-1;i<=ht.x+1;i++)for(P=ht.y-1;P<=ht.y+1;P++){if(i===ht.x&&P===ht.y)continue;const w=n(i,P);!w||!w.unit||w.unit.team===e&&(w.state.d=ae(ht,w),O.push(w))}O.sort((w,W)=>!w.unit||!W.unit?0:w.state.d!==W.state.d?w.state.d-W.state.d:w.unit.actorId-W.unit.actorId),O=O.slice(0,2);const K=O.map(w=>({data:w.data,unit:w.unit}));O.forEach(w=>{w.unit=void 0}),console.log(K);const j={[kt.ARROW_UP]:{x:0,y:1},[kt.ARROW_RIGHT]:{x:1,y:0},[kt.ARROW_DOWN]:{x:0,y:-1},[kt.ARROW_LEFT]:{x:-1,y:0}}[u];let F;for(let w=1;w<=4;w++){const W=n(ht.x+w*j.x,ht.y+w*j.y);W&&W.terrain.type===et.NONE&&(F=W)}if(!F)return;a(w=>{w.overlay=void 0});const Ct=pt(F.x,F.y,4,2).filter(w=>w.terrain.type!==et.BLOCKED&&!(w.x===(F==null?void 0:F.x)&&w.y===(F==null?void 0:F.y))).sort(l).map(w=>[w.x,w.y]);for(const w of K)for(const[W,lt]of Ct){const Et=n(W,lt);if(!!Et&&!(Et.unit&&Et.unit.actorId>0)&&Et.terrain.type!==et.DISABLED&&Et.terrain.type!==et.BLOCKED&&!(Et.terrain.type===et.CLIFF&&!w.unit.fly)){Et.data=w.data,Et.unit=w.unit;break}}F&&(ce(F,ht),x.current=F)}const tt=_t({team:1}),re=["#ffffff00","#FF3C4132","#0EBEFF32","#48CF7432","#FCD00032","#80008032"],Ie=(u,e)=>{switch(c.editor){case 2:u.preventDefault();break;default:tt.grid=e,tt.action="swap",u.dataTransfer&&(u.dataTransfer.effectAllowed="move")}},Te=(u,e)=>{const i=h();i.data.color=e.color,i.data.bgcolor=e.bgcolor,i.data.txt="E",tt.grid=i,tt.action="color"},oe=(u,e)=>{tt.grid=Pt.cloneDeep(e),tt.action="terrain"},de=(u,e)=>{tt.grid=Pt.cloneDeep(e),tt.action="unit"},Ue=(u,e)=>{if(u.preventDefault(),!tt.grid)return;const i=tt.grid.unit,P=tt.grid.terrain;switch(tt.action){case"color":e.unit||(e.unit=b()),e.unit.actorId||(e.unit.actorId=++k.value),e.data=tt.grid.data;break;case"unit":if(e.unit||(e.unit=b()),e.unit.actorId||(e.unit.actorId=++k.value),!i)break;e.unit.image=i.image,e.unit.unitId=i.unitId,e.unit.team=tt.team;break;case"swap":ce(tt.grid,e,!i||i.actorId===0);break;case"terrain":e.terrain=P;break}tt.grid=void 0,tt.action=void 0,x.current&&(x.current=e),c.editor===4&&Wt()};function Ve(u,e){let i=u[0].state[e];for(let P=1;P<u.length;P++)u[P].state[e]<i&&(i=u[P].state[e]);return i}function ae(u,e){return Math.abs(u.x-e.x)+Math.abs(u.y-e.y)}function ce(u,e,i){const P=u.data,O=u.unit,K=u.terrain;u.data=e.data,u.unit=e.unit,e.data=P,e.unit=O,i&&(u.terrain=e.terrain,e.terrain=K)}function pe(u,e,i){u.sort((A,j)=>!A.unit||!j.unit?0:+A.unit.actorId-+j.unit.actorId),u.forEach(A=>{A.state.d1=ae(A,i),A.state.d2=ae(A,e),A.unit&&(A.unit.guard=!1)});const P=Ve(u,"d1");if(u=u.filter(A=>A.state.d1===P),u.length===1)return u[0];let O=u[0],K=u.length;for(;K--;)if(u[K].state.d2<O.state.d2){O=u[K];break}return O}function Oe(){E(15,15),k.value=0;const u=[{x:7,y:9,txt:"",type:yt.GUARD,bg:"#0ebeff"},{x:9,y:7,txt:"",type:yt.GUARD,bg:"#0ebeff"},{x:7,y:5,txt:"",type:yt.GUARD,bg:"#0ebeff"},{x:5,y:7,txt:"",type:yt.GUARD,bg:"#0ebeff"},{x:8,y:6,txt:"",type:yt.ATTACKER,bg:"#ff3c41"},{x:7,y:7,txt:"",type:yt.SHEEP,bg:"#fcd000"}];for(const e of u){const i=n(e.x,e.y);!i||(i.unit||(i.unit=b()),i.unit.actorId=++k.value,i.unit.actorType=e.type,i.disabled=!1,i.data.txt=e.txt,i.data.bgcolor=e.bg)}c.editor=4}const Wt=()=>{const u=V.value.flat();u.forEach(A=>{A.data.opacity=1});const e=u.filter(A=>A.unit&&!A.disabled),i=e.filter(A=>{var j;return((j=A.unit)==null?void 0:j.actorType)===yt.ATTACKER})[0],P=e.filter(A=>{var j;return((j=A.unit)==null?void 0:j.actorType)===yt.SHEEP})[0],O=e.filter(A=>{var j;return((j=A.unit)==null?void 0:j.actorType)===yt.GUARD});if(!P||O.length===0){alert("\u7F3A\u5C11\u89D2\u8272\uFF0C\u5C06\u81EA\u52A8\u751F\u6210"),Oe(),Wt();return}const K=u.filter(A=>!A.unit);for(const A of K){const j=pe(O,A,P);!j.unit||(A.data.image=j.unit.image,A.data.bgcolor=re[j.unit.actorId]||re[0],j.data.image?A.data.sup="":A.data.sup=String(j.unit.actorId),A.data.opacity=.6)}if(i){const A=pe(O,i,P);A.unit&&(A.unit.guard=!0)}},ze=u=>{if(!!u.unit&&c.editor===4){switch(u.unit.actorType){case yt.GUARD:u.disabled=!u.disabled;break}Wt()}},Re=u=>{var e;!tt.grid||!u.dataTransfer||tt.action==="swap"&&(c.editor===4&&((e=tt.grid.unit)==null?void 0:e.actorType)===yt.SHEEP||u.preventDefault())},Ne=u=>{if(!!tt.grid&&!!u)switch(tt.action){case"swap":S(u),tt.grid=void 0,tt.action=void 0,c.editor===4&&Wt()}},se=G(!1);function je(){se.value=!0}return Ee(()=>{mt(),window.addEventListener("mouseup",zt,!1)}),Pe(()=>{window.removeEventListener("mouseup",zt,!1)}),(u,e)=>{var A,j,F,Ct;const i=Du,P=Bu,O=Dt("c-space"),K=be("autofocus");return r(),y("div",fs,[t("div",xs,[t("div",vs,[t("label",ms,[hs,m(P,{placeholder:"\u9009\u62E9",modelValue:c.editor,"onUpdate:modelValue":e[0]||(e[0]=C=>c.editor=C)},{default:U(()=>[m(i,{value:1},{default:U(()=>[at("\u7F16\u8F91\u7F51\u683C")]),_:1}),m(i,{value:2},{default:U(()=>[at("\u5237\u5B50\u6A21\u5F0F")]),_:1}),m(i,{value:3},{default:U(()=>[at("\u9009\u62E9\u5F62\u72B6")]),_:1}),m(i,{value:4},{default:U(()=>[at("\u62A4\u536B\u8BA1\u7B97")]),_:1})]),_:1},8,["modelValue"])]),t("label",Es,[bs,H(t("input",{type:"number",min:"0","onUpdate:modelValue":e[1]||(e[1]=C=>c.selectRange=C),style:{width:"5em"}},null,512),[[bt,c.selectRange]])]),t("label",Ds,[Bs,H(t("select",{"onUpdate:modelValue":e[2]||(e[2]=C=>c.shape=C)},$s,512),[[Bt,c.shape]])]),t("label",ws,[gs,H(t("select",{"onUpdate:modelValue":e[3]||(e[3]=C=>c.sortType=C)},Is,512),[[Bt,c.sortType]])]),t("button",{class:"btn",onClick:q},"\u6E05\u7A7A"),t("button",{class:"btn",onClick:Wt},"\u8BA1\u7B97\u62A4\u536B"),t("button",{class:"btn btn-success",onClick:wt},"\u4FDD\u5B58\u5E03\u5C40"),t("button",{class:"btn btn-success",onClick:jt},"\u8FD8\u539F\u5E03\u5C40"),ut("",!0),m(s(Fu),{modelValue:I.value,"onUpdate:modelValue":e[4]||(e[4]=C=>I.value=C)},{popover:U(()=>[t("div",Us,[(r(!0),y(Y,null,rt(s(_s),(C,w)=>(r(),y("div",{class:"list-item",key:w,onClick:W=>Mt(C)},f(C.name),9,Vs))),128))])]),default:U(()=>[Ts]),_:1},8,["modelValue"]),Os,t("div",{class:"btn btn-link",onClick:je},"\u5E2E\u52A9"),m(s(Cu),{show:se.value,"onUpdate:show":e[5]||(e[5]=C=>se.value=C),width:"600px"},{default:U(()=>[zs]),_:1},8,["show"])]),t("div",Rs,[m(O,null,{default:U(()=>{var C,w,W;return[t("label",Ns,[js,m(s(It),{draggable:!1,data:{txt:"E",size:14,opacity:1,color:c.color,bgcolor:c.bgcolor},terrain:c.terrain},null,8,["data","terrain"])]),t("label",Gs,[Ms,m(s(Zt),{modelValue:c.color,"onUpdate:modelValue":e[6]||(e[6]=lt=>c.color=lt)},null,8,["modelValue"])]),t("label",Hs,[Ls,m(s(Zt),{modelValue:c.bgcolor,"onUpdate:modelValue":e[7]||(e[7]=lt=>c.bgcolor=lt)},null,8,["modelValue"])]),Ps,t("div",Ks,[(r(!0),y(Y,null,rt(s(g),(lt,Et)=>(r(),Ut(s(It),{key:Et,selected:c.bgcolor===lt.bgcolor,style:_e([`--color:${lt.color};--bgcolor:${lt.bgcolor}`]),onClick:Jt=>M(lt),onDragstart:Jt=>Te(Jt,lt)},{default:U(()=>[at(" E ")]),_:2},1032,["selected","style","onClick","onDragstart"]))),128)),m(s(It),{selected:((C=c.terrain)==null?void 0:C.type)===s(J).terrain.type,terrain:s(J).terrain,onClick:e[8]||(e[8]=lt=>nt(s(J))),onDragstart:e[9]||(e[9]=lt=>oe(lt,s(J)))},null,8,["selected","terrain"]),m(s(It),{selected:((w=c.terrain)==null?void 0:w.type)===s(it).terrain.type,terrain:s(it).terrain,onClick:e[10]||(e[10]=lt=>nt(s(it))),onDragstart:e[11]||(e[11]=lt=>oe(lt,s(it)))},null,8,["selected","terrain"]),m(s(It),{selected:((W=c.terrain)==null?void 0:W.type)===s(ft).terrain.type,terrain:s(ft).terrain,onClick:e[12]||(e[12]=lt=>nt(s(ft))),onDragstart:e[13]||(e[13]=lt=>oe(lt,s(ft)))},null,8,["selected","terrain"])]),t("div",{class:"trush",onDragover:Re,onDrop:e[14]||(e[14]=lt=>Ne(tt.grid))},[(r(),y("svg",Ws,Ys))],32)]}),_:1})]),t("div",Xs,[x.current?(r(),y("div",Qs,[m(O,null,{default:U(()=>[t("label",Zs,[tl,m(s(It),{draggable:!1,style:_e([`--color:${x.current.data.color};--bgcolor:${x.current.data.bgcolor}`]),data:x.current.data,terrain:x.current.terrain,overlay:x.current.overlay,unit:x.current.unit},null,8,["style","data","terrain","overlay","unit"])]),t("label",el,[ul,m(s(Zt),{modelValue:x.current.data.color,"onUpdate:modelValue":e[15]||(e[15]=C=>x.current.data.color=C)},null,8,["modelValue"])]),t("label",nl,[ol,m(s(Zt),{modelValue:x.current.data.bgcolor,"onUpdate:modelValue":e[16]||(e[16]=C=>x.current.data.bgcolor=C)},null,8,["modelValue"])]),t("label",al,[sl,H(t("input",{type:"number",style:{width:"4em"},min:"12",step:"1","onUpdate:modelValue":e[17]||(e[17]=C=>x.current.data.size=C)},null,512),[[bt,x.current.data.size]])]),t("label",ll,[il,H(t("input",{type:"text",ref_key:"txtInput",ref:B,"onUpdate:modelValue":e[18]||(e[18]=C=>x.current.data.txt=C),style:{width:"6em"}},null,512),[[K],[bt,x.current.data.txt]])]),t("label",rl,[dl,H(t("select",{"onUpdate:modelValue":e[19]||(e[19]=C=>x.current.terrain.type=C)},[t("option",{value:s(et).NONE},"\u65E0",8,cl),t("option",{value:s(et).DISABLED},"\u7981\u6B62",8,pl),t("option",{value:s(et).BLOCKED},"\u969C\u788D",8,yl),t("option",{value:s(et).CLIFF},"\u60AC\u5D16",8,_l)],512),[[Bt,x.current.terrain.type]])]),x.current.unit?(r(),Ut(O,{key:0},{default:U(()=>[t("label",fl,[xl,H(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=C=>x.current.unit.actorId=C),style:{width:"4em"}},null,512),[[bt,x.current.unit.actorId]])]),t("label",vl,[ml,H(t("select",{"onUpdate:modelValue":e[21]||(e[21]=C=>x.current.unit.actorType=C)},[t("option",{value:s(yt).NONE},"\u65E0",8,hl),t("option",{value:s(yt).GUARD},"\u62A4\u536B",8,El),t("option",{value:s(yt).SHEEP},"\u9776\u5B50",8,bl),t("option",{value:s(yt).ATTACKER},"\u653B\u51FB\u8005",8,Dl)],512),[[Bt,x.current.unit.actorType]])]),t("label",Bl,[Fl,H(t("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=C=>x.current.unit.fly=C)},null,512),[[St,x.current.unit.fly]])])]),_:1})):ut("",!0),t("button",{class:"btn",onClick:z},"\u5B8C\u6210")]),_:1})])):ut("",!0)]),t("div",Cl,[(A=x.current)!=null&&A.unit?(r(),y("label",$l,[wl,t("input",{type:"text",readonly:"",value:x.current.unit.unitId,style:{width:"4em"}},null,8,gl)])):ut("",!0),(j=x.current)!=null&&j.unit?(r(),y("label",Al,[kl,H(t("select",{"onUpdate:modelValue":e[23]||(e[23]=C=>x.current.unit.team=C)},Ul,512),[[Bt,x.current.unit.team]])])):ut("",!0),(F=x.current)!=null&&F.unit?(r(),y("button",{key:2,class:"btn btn-success",onClick:dt},"\u602A\u529B\u4E71\u795E")):ut("",!0),(Ct=x.current)!=null&&Ct.unit?(r(),y("button",{key:3,class:"btn btn-success",onClick:Se},"\u5F00\u8F66")):ut("",!0)])]),t("div",Vl,[t("div",Ol,[(r(!0),y(Y,null,rt(s(V),(C,w)=>(r(),y("div",{class:"grids-row",key:w},[(r(!0),y(Y,null,rt(C,(W,lt)=>{var Et,Jt;return r(),Ut(s(It),{key:lt,draggable:!0,selected:W.x===((Et=x.current)==null?void 0:Et.x)&&W.y===((Jt=x.current)==null?void 0:Jt.y),disabled:W.disabled,dot:W.unit&&W.unit.guard,data:W.data,terrain:W.terrain,overlay:W.overlay,unit:W.unit,onDragstart:gt=>Ie(gt,W),onDragover:e[24]||(e[24]=Kt(()=>{},["prevent"])),onDrop:gt=>Ue(gt,W),onContextmenu:Kt(gt=>ze(W),["prevent"]),onClick:gt=>vt(gt,W),onMousedown:gt=>T(gt,W),onMouseenter:gt=>d(gt,W),onClickoverlay:qe},null,8,["selected","disabled","dot","data","terrain","overlay","unit","onDragstart","onDrop","onContextmenu","onClick","onMousedown","onMouseenter"])}),128))]))),128))]),t("div",zl,[t("div",Rl,[t("label",Nl,[jl,H(t("select",{"onUpdate:modelValue":e[25]||(e[25]=C=>tt.team=C)},Ll,512),[[Bt,tt.team]])])]),t("div",Pl,[t("div",Kl,[m(s(It),{item:xt.value,onDragstart:e[26]||(e[26]=C=>de(C,xt.value))},null,8,["item"]),(r(!0),y(Y,null,rt(ct.value,(C,w)=>(r(),Ut(s(It),{key:w,data:C.data,terrain:C.terrain,overlay:C.overlay,unit:C.unit,onDragstart:W=>de(W,C)},null,8,["data","terrain","overlay","unit","onDragstart"]))),128))])])])])])}}});const Jl=Ft(Wl,[["__scopeId","data-v-e2aa6b1b"]]),Ai=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"}));let Yl=0;window.jsonpcard={};const Xl={503101:"\u60A8\u586B\u5199\u7684\u670D\u52A1\u5668\u6216\u89D2\u8272ID\u4F3C\u4E4E\u6709\u9519\uFF0C\u8BF7\u68C0\u67E5\uFF01"},Ql={101:"\u5151\u6362\u7801\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5C11\u4FA0\u786E\u8BA4\u5151\u6362\u7801\u662F\u5426\u6B63\u786E[101]",104:"\u8BE5\u5151\u6362\u7801\u5DF2\u88AB\u4F7F\u7528[104]",108:"\u8BE5\u5151\u6362\u7801\u5DF2\u8FC7\u671F[108]",113:"\u8BE5\u5151\u6362\u7801\u9650\u5236\u4F7F\u7528\uFF0C\u8BF7\u5230\u6E38\u620F\u5185\u4F7F\u7528[113]",115:"\u5DF2\u6210\u529F\u9886\u53D6\u5151\u6362\u7801[115]",120:"\u8BE5\u5151\u6362\u7801\u5DF2\u8FBE\u4F7F\u7528\u6B21\u6570\u4E0A\u9650[120]"},Zl=[{id:"3001",name:"\u4F53\u9A8C\u670D"},{id:"6001",name:"\u6C34\u955C\u4E4B\u6BBF-\u5B98\u670D"},{id:"6002",name:"\u4E09\u754C\u4E4B\u95E8-\u5B98\u670D"},{id:"6003",name:"\u697C\u5170\u5E7B\u57CE-\u5B98\u670D"},{id:"6004",name:"\u955C\u5E7B\u5E7D\u754C-\u5B98\u670D"},{id:"6005",name:"\u6708\u9690\u5927\u6F20-\u5B98\u670D"},{id:"6006",name:"\u601D\u8C12\u4E4B\u95F4-\u5B98\u670D"},{id:"6007",name:"\u9647\u5357\u98CE\u4E91-\u5B98\u670D"},{id:"6008",name:"\u70DF\u96E8\u51C9\u5DDE-\u5B98\u670D"},{id:"6009",name:"\u8FE6\u590F\u4E4B\u7A9F-\u5B98\u670D"},{id:"6010",name:"\u5317\u5C71\u7EFF\u6D32-\u5B98\u670D"},{id:"6011",name:"\u9AD8\u660C\u53E4\u57CE-\u5B98\u670D"},{id:"6012",name:"\u6CB3\u5DDE\u5C0F\u9547-\u5B98\u670D"},{id:"6013",name:"\u4E03\u6B65\u8FF7\u9635-\u5B98\u670D"},{id:"6014",name:"\u592A\u865A\u7384\u7A79-\u5B98\u670D"},{id:"6015",name:"\u5BF0\u795E\u4E5D\u5C71-\u5B98\u670D"},{id:"6016",name:"\u82CD\u7A79\u4E4B\u57DF-\u5B98\u670D"},{id:"6017",name:"\u697C\u5170\u79D8\u5883-\u5B98\u670D"},{id:"6018",name:"\u82CD\u5C18\u5BA2\u6808-\u5B98\u670D"},{id:"6019",name:"\u8352\u4E4B\u5251\u51A2-\u5B98\u670D"},{id:"6020",name:"\u9041\u4E16\u6E05\u5C45-\u5B98\u670D"},{id:"6021",name:"\u60AC\u5929\u53E4\u5F84-\u5B98\u670D"},{id:"6022",name:"\u796D\u5929\u795E\u5854-\u5B98\u670D"},{id:"6023",name:"\u5316\u8574\u795E\u53F0-\u5B98\u670D"},{id:"6024",name:"\u8BA1\u90FD\u5E7B\u7891-\u5B98\u670D"},{id:"6025",name:"\u795E\u79FB\u661F\u53F0-\u5B98\u670D"},{id:"6026",name:"\u79BB\u9B42\u5E7D\u539F-\u5B98\u670D"},{id:"6027",name:"\u5343\u9B42\u714C\u6D77-\u5B98\u670D"},{id:"6028",name:"\u795E\u70E8\u4E4B\u5385-\u5B98\u670D"},{id:"6029",name:"\u5C01\u4EEA\u4E4B\u95F4-\u5B98\u670D"},{id:"6030",name:"\u5929\u5DC5\u5730\u5D16-\u5B98\u670D"},{id:"6031",name:"\u65CB\u5203\u5377\u5C9A-\u5B98\u670D"},{id:"6032",name:"\u5343\u95C7\u4E4B\u6E0A-\u5B98\u670D"},{id:"6033",name:"\u7D2B\u7430\u98DE\u714C-\u5B98\u670D"},{id:"6034",name:"\u5E7D\u51A5\u6697\u89E6-\u5B98\u670D"},{id:"6035",name:"\u6108\u795E\u5E7B\u96FE-\u5B98\u670D"},{id:"6036",name:"\u6697\u9B45\u5E7B\u751F-\u5B98\u670D"},{id:"6037",name:"\u65E5\u8F6E\u795E\u5251-\u5B98\u670D"},{id:"6038",name:"\u77AC\u970E\u795E\u4EEA-\u5B98\u670D"},{id:"6039",name:"\u78A7\u6D77\u6F6E\u751F-\u5B98\u670D"},{id:"6040",name:"\u98DE\u661F\u795E\u5251-\u5B98\u670D"},{id:"6041",name:"\u711A\u706B\u771F\u708E-\u5B98\u670D"},{id:"6042",name:"\u5251\u5F71\u9010\u5149-\u5B98\u670D"},{id:"6043",name:"\u4E91\u6A2A\u534E\u5C71-\u5B98\u670D"},{id:"6044",name:"\u8F89\u65E5\u5723\u5492-\u5B98\u670D"},{id:"6045",name:"\u63FD\u98CE\u795E\u884C-\u5B98\u670D"},{id:"6046",name:"\u6D41\u5149\u834F\u82D2-\u5B98\u670D"},{id:"6047",name:"\u516D\u7532\u795E\u4EEA-\u5B98\u670D"},{id:"6048",name:"\u706D\u5251\u8840\u80E7-\u5B98\u670D"},{id:"6049",name:"\u65E0\u65B9\u5251\u6C14-\u5B98\u670D"},{id:"6050",name:"\u79BB\u706B\u795E\u8BC0-\u5B98\u670D"},{id:"6051",name:"\u541F\u72D0\u730E\u58F0-\u5B98\u670D"},{id:"6052",name:"\u98CE\u5377\u6B8B\u4E91-\u5B98\u670D"},{id:"6053",name:"\u58C1\u95F4\u86C7\u5F71-\u5B98\u670D"},{id:"6054",name:"\u767D\u8679\u8D2F\u65E5-\u5B98\u670D"},{id:"6055",name:"\u5C01\u9B54\u795E\u9053-\u5B98\u670D"},{id:"6056",name:"\u6DF7\u5143\u6C14\u805A-\u5B98\u670D"},{id:"6057",name:"\u4E5D\u5929\u795E\u96F7-\u5B98\u670D"},{id:"6058",name:"\u53CC\u73AF\u6620\u6708-\u5B98\u670D"},{id:"6059",name:"\u795E\u534E\u5929\u821E-\u5B98\u670D"},{id:"6060",name:"\u7F57\u5239\u4E00\u51FB-\u5B98\u670D"},{id:"6061",name:"\u8BF8\u661F\u795E\u66DC-\u5B98\u670D"},{id:"6062",name:"\u77E9\u5B50\u4E4B\u57DF-\u5B98\u670D"},{id:"6063",name:"\u9F99\u7EDD\u634D\u536B-\u5B98\u670D"},{id:"6064",name:"\u51A5\u5E7B\u4E4B\u9635-\u5B98\u670D"},{id:"6065",name:"\u72C2\u9F99\u7EDD\u606F-\u5B98\u670D"},{id:"6066",name:"\u5343\u714C\u96F7\u70C8-\u5B98\u670D"},{id:"6067",name:"\u7FA4\u661F\u805A\u534E-\u5B98\u670D"},{id:"6068",name:"\u795E\u6C14\u6D41\u8F6C-\u5B98\u670D"},{id:"6069",name:"\u8E0F\u6B65\u5C01\u5FC3-\u5B98\u670D"},{id:"6070",name:"\u5929\u971C\u96EA\u821E-\u5B98\u670D"},{id:"6071",name:"\u8BDB\u5929\u5251\u9635-\u5B98\u670D"},{id:"6072",name:"\u50B2\u96EA\u5BD2\u971C-\u5B98\u670D"},{id:"6073",name:"\u51B0\u534E\u4E4B\u9635-\u5B98\u670D"},{id:"6074",name:"\u6697\u661F\u5149\u8000-\u5B98\u670D"},{id:"6075",name:"\u5C01\u9B42\u7F1A\u63A0-\u5B98\u670D"},{id:"6076",name:"\u5929\u5730\u6218\u7EAA-\u5B98\u670D"},{id:"6077",name:"\u72C2\u98CE\u708E\u65A9-\u5B98\u670D"},{id:"6078",name:"\u9F99\u7130\u51F6\u53F7-\u5B98\u670D"},{id:"6079",name:"\u7EEE\u7F57\u5929\u9999-\u5B98\u670D"},{id:"6080",name:"\u795E\u6C1B\u5316\u6CD5-\u5B98\u670D"},{id:"6081",name:"\u5929\u5C06\u5954\u70C8-\u5B98\u670D"},{id:"6082",name:"\u534F\u5FC3\u60CA\u96F7-\u5B98\u670D"},{id:"6083",name:"\u5929\u745E\u4ED9\u821E-\u5B98\u670D"},{id:"6084",name:"\u7FBD\u5203\u675F\u7F1A-\u5B98\u670D"},{id:"6085",name:"\u4E91\u5F71\u96FE\u5E7B-\u5B98\u670D"},{id:"6086",name:"\u8F89\u65E5\u4E4B\u5251-\u5B98\u670D"},{id:"6087",name:"\u7F57\u777A\u4E4B\u94A5-\u5B98\u670D"},{id:"6088",name:"\u51E4\u51F0\u7EC7\u9526-\u5B98\u670D"},{id:"6089",name:"\u897F\u57DF\u795E\u5FBD-\u5B98\u670D"},{id:"2001",name:"\u7D2B\u91D1\u738B\u9F0E-\u6E20\u9053"},{id:"2001",name:"\u4E03\u8272\u7F28\u73DE-\u6E20\u9053"},{id:"2003",name:"\u4E5D\u4EEA\u5929\u5C0A-\u6E20\u9053"},{id:"2003",name:"\u51DB\u65E5\u795E\u5200-\u6E20\u9053"},{id:"2005",name:"\u592A\u4E59\u5360\u76D8-\u6E20\u9053"},{id:"2005",name:"\u5E7D\u57A0\u4E4B\u6212-\u6E20\u9053"},{id:"2005",name:"\u8840\u7075\u795E\u73E0-\u6E20\u9053"},{id:"2005",name:"\u5E7D\u714C\u4E4B\u7130-\u6E20\u9053"},{id:"2005",name:"\u9547\u9F99\u4E4B\u7389-\u6E20\u9053"},{id:"2010",name:"\u90AA\u714C\u9738\u5251-\u6E20\u9053"},{id:"2010",name:"\u4E94\u5C0A\u795E\u4EE4-\u6E20\u9053"},{id:"2010",name:"\u7D2B\u7430\u714C\u77F3-\u6E20\u9053"},{id:"2010",name:"\u4E5D\u5E7D\u5316\u7389-\u6E20\u9053"},{id:"2010",name:"\u7D2B\u7B71\u51C0\u7389-\u6E20\u9053"},{id:"2010",name:"\u7B71\u795E\u4E91\u73E0-\u6E20\u9053"},{id:"2016",name:"\u6731\u7EB6\u796D\u5251-\u6E20\u9053"},{id:"2016",name:"\u7D2B\u8574\u7CBE\u7389-\u6E20\u9053"},{id:"2016",name:"\u7834\u9B54\u6731\u7EEB-\u6E20\u9053"},{id:"2016",name:"\u7405\u73AF\u7389\u74A7-\u6E20\u9053"},{id:"2016",name:"\u5343\u5E7B\u6D41\u5149-\u6E20\u9053"},{id:"2016",name:"\u5929\u90FD\u6C34\u6708-\u6E20\u9053"},{id:"2016",name:"\u5E7D\u90FD\u738B\u73BA-\u6E20\u9053"},{id:"2016",name:"\u56DE\u5149\u94F6\u73AF-\u6E20\u9053"},{id:"2016",name:"\u9F99\u795E\u5929\u94E0-\u6E20\u9053"},{id:"2025",name:"\u519B\u795E\u523B\u7B26-\u6E20\u9053"},{id:"2025",name:"\u7476\u5149\u7EEB\u7D22-\u6E20\u9053"},{id:"2025",name:"\u5730\u754C\u5E7D\u59EC-\u6E20\u9053"},{id:"2029",name:"\u53E4\u5251\u9F99\u7687-\u6E20\u9053"},{id:"2030",name:"\u7D2B\u7535\u91D1\u621F-\u6E20\u9053"}],le="userids",ie="giftcodes";function ti(){const o="1571725187985",_="0123456789",p="2",k="https://activity.zlongame.com";function V(M){return M.info===115}function N(M){return!!M.code}function g(M,nt,st){return new Promise((xt,ct)=>{const pt=`cb_${Yl++}`,L=document.createElement("script");window.jsonpcard[pt]=D=>{xt(D),delete window.jsonpcard[pt]},L.src=`${k}/activity/cmn/card/csmweb.do?pd_acti_cb=jsonpcard.${pt}&appkey=${o}&card_user=${M}&card_channel=${_}&card_server=${nt}&card_role=${M}&card_code=${st}&type=${p}&_=${Date.now()}`,document.head.appendChild(L),L.onload=()=>{L.remove()},L.onerror=()=>{L.remove(),ct(new Error("failed"))}})}const b=G([]);function v(){try{const M=localStorage.getItem(le);b.value=M?JSON.parse(M):[]}catch{b.value=[]}}function h(){localStorage.setItem(le,JSON.stringify(b.value))}function S(M){b.value.findIndex(nt=>nt.user===M.user)===-1&&(b.value.push(M),h())}function Q(M){const nt=b.value.findIndex(st=>st.user===M.user);nt!==-1&&(b.value.splice(nt,1),h())}function E(){b.value=[],localStorage.removeItem(le)}const n=G([]);function a(){try{const M=localStorage.getItem(ie);n.value=M?JSON.parse(M):[]}catch{n.value=[]}}function B(){localStorage.setItem(ie,JSON.stringify(n.value))}function c(M){n.value.findIndex(st=>st===M)===-1&&(n.value.push(M),B())}function J(M){const nt=n.value.findIndex(st=>st===M);nt!==-1&&(n.value.splice(nt,1),B())}function it(){n.value=[],localStorage.removeItem(ie)}function ft(){v(),a()}return ft(),{userids:b,servers:Zl,giftcodes:n,putGiftcode:g,addUserid:S,delUserid:Q,clearUserid:E,addGiftcode:c,delGiftcode:J,clearGiftcode:it,isSuccess:V,isError:N,giftcodeCode:Xl,giftcodeInfo:Ql}}const ei={class:"toolbar giftcode-toolbar"},ui={class:"input-group"},ni=t("div",{class:"input-ext"},"\u670D\u52A1\u5668",-1),oi={class:"input-group"},ai=t("div",{class:"input-ext"},"\u89D2\u8272ID",-1),si={class:"input-group"},li=t("div",{class:"input-ext"},"\u5151\u6362\u7801",-1),ii=t("a",{href:"https://wiki.biligame.com/tdj/Giftcode",target:"_blank",class:"btn btn-link"},"BiliWiki",-1),ri={class:"giftcode-grid"},di={class:"giftcode-subgrid"},ci={class:"giftcode-tag"},pi={class:"giftcode-subgrid"},yi=["onClick"],_i=["onClick"],fi=$t({__name:"Giftcode",setup(o){const{servers:_,userids:p,giftcodes:k,addUserid:V,delUserid:N,clearUserid:g,addGiftcode:b,delGiftcode:v,putGiftcode:h,isSuccess:S,isError:Q,giftcodeCode:E,giftcodeInfo:n}=ti(),a=G(""),B=we(),c=G(),J=G("");function it(L){c.value=L}function ft(L){J.value=L.user;const D=_.find(l=>l.id===L.server);!D||(c.value=D)}async function M(L){!await B.confirm("\u786E\u8BA4\u5220\u9664\u6B64\u7528\u6237\u5417\uFF1F")||N(L)}function nt(){g()}const st=G("");async function xt(L){!await B.confirm("\u786E\u8BA4\u5220\u9664\u6B64\u5151\u6362\u7801\uFF1F")||v(L)}async function ct(L,D,l){if(!L){B.alert("\u672A\u9009\u62E9\u670D\u52A1\u5668\u3002");return}if(!D){B.alert("\u672A\u8F93\u5165\u89D2\u8272ID\u3002");return}if(!/^\d{19}$/.test(D)){B.alert("\u89D2\u8272ID\u957F\u5EA6\u4E0D\u6B63\u786E\u3002");return}if(!l){B.alert("\u672A\u8F93\u5165\u793C\u5305\u7801\u3002");return}const $=await h(D,L,l);if(console.log($),Q($)){B.alert(E[$.code]||`code: ${$.code}`);return}if(V({user:D,server:L}),[104,113,115,120].indexOf($.info)!==-1&&b(l),S($)){B.alert(n[$.info]);return}B.alert(n[$.info]||`info: ${$.info}`)}function pt(){var L;ct((L=c.value)==null?void 0:L.id,J.value,st.value)}return(L,D)=>(r(),y(Y,null,[t("div",ei,[m(s($u),{wrap:""},{default:U(()=>{var l;return[t("div",ui,[ni,m(s(he),{readonly:"",name:"name",list:s(_),value:((l=c.value)==null?void 0:l.name)||"","item-width":"120px","overlay-width":"500px",onSelect:it},null,8,["list","value"])]),t("div",oi,[ai,m(s(he),{name:"user","show-delete":"",list:s(p),value:J.value,"onUpdate:value":D[0]||(D[0]=$=>J.value=$),onSelect:ft,onDelete:M,width:"185px"},null,8,["list","value"])]),t("div",si,[li,H(t("input",{class:"input",type:"text","onUpdate:modelValue":D[1]||(D[1]=$=>st.value=$),style:{width:"100px"}},null,512),[[bt,st.value]])]),t("button",{type:"button",class:"btn btn-default",onClick:nt},"\u6E05\u7A7A"),t("button",{type:"button",class:"btn btn-primary",onClick:pt},"\u9886\u53D6"),ii]}),_:1})]),t("div",ri,[H(t("input",{class:"input",type:"text",placeholder:"\u8F93\u5165\u8981\u6DFB\u52A0\u7684\u5151\u6362\u7801","onUpdate:modelValue":D[2]||(D[2]=l=>a.value=l)},null,512),[[bt,a.value]]),t("div",di,[t("button",{class:"btn btn-primary",onClick:D[3]||(D[3]=l=>a.value&&s(b)(a.value))},"\u6DFB\u52A0")]),(r(!0),y(Y,null,rt(s(k),l=>(r(),y(Y,{key:l},[t("span",ci,f(l),1),t("div",pi,[t("button",{class:"btn btn-primary",onClick:$=>{var Z;return ct((Z=c.value)==null?void 0:Z.id,J.value,l)}},"\u9886\u53D6",8,yi),t("button",{class:"btn btn-danger",onClick:$=>xt(l)},"\u5220\u9664",8,_i)])],64))),128))])],64))}});const ki=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"}));export{Di as B,Ei as C,Ci as E,Ai as G,mi as H,bi as S,Fi as W,hi as a,Bi as b,$i as c,wi as d,gi as e,ki as f};
