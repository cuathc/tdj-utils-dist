import{d as wt,r as tt,n as pe,a as ft,O as Nt,Z as Wt,$ as Tt,_ as kt,o as w,c as E,g as n,G as P,b as dt,i as V,W as ht,D as at,A as J,T as xe,p as Ct,m as Et,e as T,h as pt,H as At,u as h,a0 as St,v as st,f as Z,w as rt,F as yt,k as ct,l as fe,j as ve,y as xt,V as me}from"./index.js";import{_ as mt}from"./lodash.js";import{u as he,D as be}from"./useHeroes.js";import{_ as _e}from"./Modal.vue_vue_type_style_index_0_lang.js";const Mt=(e,u,D)=>{let g=0,i=0,l=0;e%=360;const a=Math.floor(e/60),b=e/60-a,C=D*(1-u),$=D*(1-u*b),S=D*(1-u*(1-b));switch(a){case 0:g=D,i=S,l=C;break;case 1:g=$,i=D,l=C;break;case 2:g=C,i=D,l=S;break;case 3:g=C,i=$,l=D;break;case 4:g=S,i=C,l=D;break;case 5:g=D,i=C,l=$;break}g=Math.floor(g*255),i=Math.floor(i*255),l=Math.floor(l*255);const z=("00"+g.toString(16)).slice(-2),U=("00"+i.toString(16)).slice(-2),H=("00"+l.toString(16)).slice(-2);return[e,u,D,g,i,l,"#"+z+U+H]},Lt=e=>{let u=0,D=0,g=0,i=0,l=0,a=0;if(/#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i.test(e))u=window.parseInt(RegExp.$1,16),D=window.parseInt(RegExp.$2,16),g=window.parseInt(RegExp.$3,16);else if(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i.test(e))u=window.parseInt(RegExp.$1,10),D=window.parseInt(RegExp.$2,10),g=window.parseInt(RegExp.$3,10);else return[0,0,0,0,0,0,"#000000"];i=u/255,l=D/255,a=g/255;let b=i;l>b&&(b=l),a>b&&(b=a);let C=i;l<C&&(C=l),a<C&&(C=a);let $=0,S=0,z=0;b===C?$=0:b===i&&l>=a?$=60*(l-a)/(b-C)+0:b===i&&l<a?$=60*(l-a)/(b-C)+360:b===l?$=60*(a-i)/(b-C)+120:b===a&&($=60*(i-l)/(b-C)+240),b===0?S=0:S=1-C/b,z=b;const U=("00"+u.toString(16)).slice(-2),H=("00"+D.toString(16)).slice(-2),j=("00"+g.toString(16)).slice(-2);return[Math.floor($),S,z,u,D,g,"#"+U+H+j]},ge=wt({name:"ColorPicker",emits:["update:modelValue"],props:{modelValue:{type:String,required:!0}},setup(e,{emit:u}){const D=tt(!1),g=pe({set:d=>{u("update:modelValue",d)},get:()=>e.modelValue}),i=ft({h:0,s:0,v:0,r:0,g:0,b:0}),l=ft({rect_down:!1,rect_left:0,rect_bottom:0,ver_down:!1,ver_bottom:0}),a={rect:{left:0,bottom:0,x:0,y:0},ver:{bottom:0,y:0}},b=tt(!1),C=()=>{b.value=!0},$=mt.debounce(()=>{b.value=!1},300),S=()=>{C();const d=Mt(i.h,i.s,i.v);i.r=d[3],i.g=d[4],i.b=d[5],g.value=d[6],l.ver_bottom=i.h,l.rect_left=i.s*360,l.rect_bottom=i.v*360,$()},z=()=>{C();const d=Lt(`${i.r},${i.g},${i.b}`);i.h=d[0],i.s=d[1],i.v=d[2],g.value=d[6],l.ver_bottom=i.h,l.rect_left=i.s*360,l.rect_bottom=i.v*360,$()},U=d=>{d=d||"#000000";const G=Lt(d);i.h=G[0],i.s=G[1],i.v=G[2],i.r=G[3],i.g=G[4],i.b=G[5],l.ver_bottom=i.h,l.rect_left=i.s*360,l.rect_bottom=i.v*360},H=()=>{const d=Mt(l.ver_bottom,l.rect_left/360,l.rect_bottom/360);i.h=d[0],i.s=d[1],i.v=d[2],i.r=d[3],i.g=d[4],i.b=d[5],g.value=d[6]},j=d=>{l.rect_down=!0,a.rect.x=d.clientX,a.rect.y=d.clientY;const G=d.currentTarget,q=G.getBoundingClientRect().left,bt=G.getBoundingClientRect().top;a.rect.left=l.rect_left=d.clientX-q,a.rect.bottom=l.rect_bottom=360-(d.clientY-bt),H()},Q=d=>{if(!l.rect_down)return;const G=d.clientX-a.rect.x,q=d.clientY-a.rect.y;l.rect_left=Math.max(0,Math.min(360,a.rect.left+G)),l.rect_bottom=Math.max(0,Math.min(360,a.rect.bottom-q)),H()},y=()=>{!l.rect_down||(l.rect_down=!1)},Y=d=>{l.ver_down=!0,a.ver.y=d.clientY;const q=d.currentTarget.getBoundingClientRect().top;a.ver.bottom=l.ver_bottom=360-(d.clientY-q),H()},I=d=>{if(!l.ver_down)return;const G=d.clientY-a.ver.y;l.ver_bottom=Math.max(0,Math.min(360,a.ver.bottom-G)),H()},O=()=>{!l.ver_down||(l.ver_down=!1)},K=()=>{D.value=!0},et=()=>{D.value=!1};return Nt(()=>e.modelValue,d=>{l.ver_down||l.rect_down||b.value||U(d)}),U(e.modelValue),Wt(()=>{window.addEventListener("mousemove",Q,!1),window.addEventListener("mouseup",y,!1),window.addEventListener("mousemove",I,!1),window.addEventListener("mouseup",O,!1)}),Tt(()=>{window.removeEventListener("mousemove",Q,!1),window.removeEventListener("mouseup",y,!1),window.removeEventListener("mousemove",I,!1),window.removeEventListener("mouseup",O,!1)}),{show:D,color:g,vars:i,state:l,colorRectPointerStart:j,colorVerPointerStart:Y,updateHSV:S,updateRGB:z,updateHex:U,onOpen:K,onComfirm:et}}});const Dt=e=>(Ct("data-v-27cd0415"),e=e(),Et(),e),Fe={class:"color-control"},we={class:"color-picker-layer"},ke={class:"color-picker-view"},Ce=Dt(()=>n("div",{class:"color-picker-view__label"},"HSV",-1)),Ee=Dt(()=>n("div",{class:"color-picker-view__label"},"RGB",-1)),De=Dt(()=>n("div",{class:"color-picker-view__label"},"Hex",-1));function Be(e,u,D,g,i,l){return w(),E("div",Fe,[n("div",{class:"color-preview",style:P({backgroundColor:e.color}),onClick:u[0]||(u[0]=(...a)=>e.onOpen&&e.onOpen(...a))},null,4),(w(),dt(xe,{to:"body"},[V(n("div",{class:"color-picker-mask",onWheel:u[1]||(u[1]=at(()=>{},["prevent"])),onTouchstart:u[2]||(u[2]=at(()=>{},["prevent"])),onClick:u[3]||(u[3]=(...a)=>e.onComfirm&&e.onComfirm(...a))},null,544),[[ht,e.show]]),V(n("div",we,[n("div",{class:"color-picker-rect",style:P(`background-color: hsl(${e.vars.h}deg, 100%, 50%)`),onMousedown:u[4]||(u[4]=at((...a)=>e.colorRectPointerStart&&e.colorRectPointerStart(...a),["prevent","stop"]))},[n("div",{class:"color-picker-rect-cur",style:P({left:`${e.state.rect_left}px`,bottom:`${e.state.rect_bottom}px`})},null,4)],36),n("div",{class:"color-picker-hue",onMousedown:u[5]||(u[5]=at((...a)=>e.colorVerPointerStart&&e.colorVerPointerStart(...a),["prevent","stop"]))},[n("div",{class:"color-picker-hue-cur",style:P({bottom:`${e.state.ver_bottom}px`})},null,4)],32),n("div",ke,[n("div",{class:"color-picker-view-color",style:P({background:e.color})},null,4),Ce,V(n("input",{type:"number",max:"360",min:"0",step:"1","onUpdate:modelValue":u[6]||(u[6]=a=>e.vars.h=a),class:"color-picker-view__input",onInput:u[7]||(u[7]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[J,e.vars.h]]),V(n("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":u[8]||(u[8]=a=>e.vars.s=a),class:"color-picker-view__input",onInput:u[9]||(u[9]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[J,e.vars.s]]),V(n("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":u[10]||(u[10]=a=>e.vars.v=a),class:"color-picker-view__input",onInput:u[11]||(u[11]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[J,e.vars.v]]),Ee,V(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":u[12]||(u[12]=a=>e.vars.r=a),class:"color-picker-view__input",onInput:u[13]||(u[13]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[J,e.vars.r]]),V(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":u[14]||(u[14]=a=>e.vars.g=a),class:"color-picker-view__input",onInput:u[15]||(u[15]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[J,e.vars.g]]),V(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":u[16]||(u[16]=a=>e.vars.b=a),class:"color-picker-view__input",onInput:u[17]||(u[17]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[J,e.vars.b]]),De,V(n("input",{type:"text","onUpdate:modelValue":u[18]||(u[18]=a=>e.color=a),class:"color-picker-view__input"},null,512),[[J,e.color]]),n("div",{class:"color-picker-view__enter",onClick:u[19]||(u[19]=(...a)=>e.onComfirm&&e.onComfirm(...a))},"\u786E\u8BA4")])],512),[[ht,e.show]])]))])}const lt=kt(ge,[["render",Be],["__scopeId","data-v-27cd0415"]]);lt.install=function(e){e.component(lt.name,lt)};var L=(e=>(e[e.NONE=0]="NONE",e[e.GUARD=1]="GUARD",e[e.SHEEP=2]="SHEEP",e[e.ATTACKER=3]="ATTACKER",e))(L||{}),R=(e=>(e[e.NONE=0]="NONE",e[e.BLOCKED=5]="BLOCKED",e[e.CLIFF=6]="CLIFF",e))(R||{}),W=(e=>(e[e.NONE=0]="NONE",e[e.ARROW_UP=1]="ARROW_UP",e[e.ARROW_RIGHT=2]="ARROW_RIGHT",e[e.ARROW_DOWN=3]="ARROW_DOWN",e[e.ARROW_LEFT=4]="ARROW_LEFT",e[e.HIGHLIGHT=5]="HIGHLIGHT",e))(W||{});const ot=e=>(Ct("data-v-a25ee3d9"),e=e(),Et(),e),Ie=["title"],$e=["onClick"],He={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ve=ot(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Ge=ot(()=>n("path",{d:"M16,13V21H8V13H2L12,3L22,13H16M7,11H10V19H14V11H17L12,6L7,11Z",fill:"#FFFF84"},null,-1)),Re=[Ve,Ge],Ae={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Se=ot(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Me=ot(()=>n("path",{d:"M11,16H3V8H11V2L21,12L11,22V16M13,7V10H5V14H13V17L18,12L13,7Z",fill:"#FFFF84"},null,-1)),Le=[Se,Me],Ue={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Oe=ot(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Ne=ot(()=>n("path",{d:"M22,11L12,21L2,11H8V3H16V11H22M12,18L17,13H14V5H10V13H7L12,18Z",fill:"#FFFF84"},null,-1)),We=[Oe,Ne],Te={key:3,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},ze=ot(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Ke=ot(()=>n("path",{d:"M13,22L3,12L13,2V8H21V16H13V22M6,12L11,17V14H19V10H11V7L6,12Z",fill:"#FFFF84"},null,-1)),qe=[ze,Ke],Xe={key:4,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ze=ot(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),je=[Ze],Je={key:5,class:"tg lt"},Pe={key:6,class:"tg rt"},Qe={key:7,class:"tg rb"},Ye={class:"overlay-dot"},to={class:"overlay-selected"},eo=wt({__name:"GridItem",props:{disabled:{type:Boolean},selected:{type:Boolean},dot:{type:Boolean},data:null,terrain:null,overlay:null,unit:null},emits:["clickoverlay"],setup(e,{emit:u}){const D=e;function g(){u("clickoverlay",D.overlay)}return(i,l)=>{var a,b,C,$,S,z,U,H,j,Q,y;return w(),E("div",{draggable:!0,class:At(["grid-item",{disabled:e.disabled}])},[n("div",{class:"grid-item-bg",style:P({backgroundColor:(a=e.data)==null?void 0:a.bgcolor,backgroundImage:(b=e.data)!=null&&b.image?`url(${e.data.image})`:"",opacity:(C=e.data)==null?void 0:C.opacity})},null,4),e.terrain?(w(),E("div",{key:0,class:"grid-terrain",style:P({backgroundImage:e.terrain.image?`url(${e.terrain.image})`:""})},null,4)):T("",!0),e.unit?(w(),E("div",{key:1,class:"grid-unit",title:e.unit.name,style:P({backgroundImage:e.unit.image?`url(${e.unit.image})`:""})},null,12,Ie)):T("",!0),($=e.data)!=null&&$.txt?(w(),E("div",{key:2,class:"grid-item-txt",style:P({fontSize:(S=e.data)!=null&&S.size?`${e.data.size}px`:"",color:(z=e.data)==null?void 0:z.color})},pt(e.data.txt),5)):T("",!0),(U=e.unit)!=null&&U.team?(w(),E("div",{key:3,class:At(["overlay pointer-none","team-"+((H=e.unit)==null?void 0:H.team)])},null,2)):T("",!0),e.overlay?(w(),E("div",{key:4,class:"overlay",onClick:at(g,["stop"])},[e.overlay===h(W).ARROW_UP?(w(),E("svg",He,Re)):e.overlay===h(W).ARROW_RIGHT?(w(),E("svg",Ae,Le)):e.overlay===h(W).ARROW_DOWN?(w(),E("svg",Ue,We)):e.overlay===h(W).ARROW_LEFT?(w(),E("svg",Te,qe)):e.overlay===h(W).HIGHLIGHT?(w(),E("svg",Xe,je)):T("",!0)],8,$e)):T("",!0),(j=e.unit)!=null&&j.actorId?(w(),E("i",Je,pt(e.unit.actorId),1)):T("",!0),(Q=e.data)!=null&&Q.sup?(w(),E("i",Pe,pt(e.data.sup),1)):T("",!0),(y=e.data)!=null&&y.sub?(w(),E("i",Qe,pt(e.data.sub),1)):T("",!0),V(n("div",Ye,null,512),[[ht,e.dot]]),V(n("div",to,null,512),[[ht,e.selected]])],2)}}});const nt=kt(eo,[["__scopeId","data-v-a25ee3d9"]]);function oo(){const e=tt(15),u=tt(15),D=tt(0),g=tt([]),i=tt([]),l=[{color:"#202020",bgcolor:"transparent"},{color:"#f9f9fa",bgcolor:"#ff3333"},{color:"#f9f9fa",bgcolor:"#00d659"},{color:"#f9f9fa",bgcolor:"#369af7"},{color:"#f9f9fa",bgcolor:"#fec02f"},{color:"#f9f9fa",bgcolor:"#a865e7"}],a=()=>({d:0,d1:0,d2:0,q:0}),b=()=>({txt:"",size:14,color:l[0].color,bgcolor:l[0].bgcolor,image:"",opacity:1}),C=()=>({type:R.NONE,image:""}),$=()=>({actorId:0,unitId:0,team:0,actorType:L.NONE,name:"",image:""}),S=I=>({x:0,y:0,disabled:!1,data:b(),state:a(),terrain:C(),unit:I});function z(I){I.state=a(),I.data=b(),I.terrain=C(),I.overlay=void 0,I.unit=void 0}function U(){D.value=0,g.value.forEach(I=>{I.forEach(O=>{z(O)})}),i.value=[]}function H(I,O){const K=[];for(let et=0;et<I;et++){const d=[];for(let G=0;G<O;G++){const q=S();q.x=G,q.y=et,d.push(q)}K.push(d)}g.value=K}function j(I,O){u.value=I,e.value=O,Y()}function Q(I,O){var K;return(K=g.value[O])==null?void 0:K[I]}function y(I){for(let O=0;O<e.value;O++)for(let K=0;K<u.value;K++)I(g.value[O][K])}function Y(){H(e.value,u.value)}return Y(),{rows:e,cols:u,actorId:D,grids:g,selects:i,gridColors:l,defGridState:a,defGridData:b,defGridTerrain:C,defGridUnit:$,defGrid:S,cleanGrid:z,cleanGrids:U,setSize:j,getGrid:Q,gridForEach:y}}const Ut=""+new URL("../assets/cliff.svg",import.meta.url).href,Ot=""+new URL("../assets/block.svg",import.meta.url).href,no=[{name:"\u7A7A\u767D\u573A\u666F",width:15,height:15,data:[]},{name:"\u5316\u8352\u5E7B\u5883",width:17,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:14,y:10,type:5},{x:15,y:10,type:5},{x:16,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:15,y:9,type:5},{x:16,y:9,type:5},{x:0,y:8,type:5},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:16,y:8,type:5},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:9,y:7,type:6},{x:10,y:7,type:6},{x:5,y:6,type:6},{x:6,y:6,type:6},{x:10,y:6,type:6},{x:11,y:6,type:6},{x:5,y:4,type:6},{x:6,y:4,type:6},{x:10,y:4,type:6},{x:11,y:4,type:6},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:0,y:2,type:5},{x:7,y:2,type:6},{x:8,y:2,type:6},{x:9,y:2,type:6},{x:16,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:15,y:1,type:5},{x:16,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:14,y:0,type:5},{x:15,y:0,type:5},{x:16,y:0,type:5}]},{name:"\u96EA\u5CAD\u5E7B\u5883",width:15,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:5,y:10,type:6},{x:6,y:10,type:6},{x:7,y:10,type:6},{x:8,y:10,type:6},{x:9,y:10,type:6},{x:12,y:10,type:5},{x:13,y:10,type:5},{x:14,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:2,y:9,type:5},{x:3,y:9,type:6},{x:4,y:9,type:6},{x:5,y:9,type:6},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:11,y:9,type:6},{x:12,y:9,type:5},{x:13,y:9,type:5},{x:14,y:9,type:5},{x:0,y:8,type:5},{x:1,y:8,type:5},{x:2,y:8,type:5},{x:3,y:8,type:6},{x:11,y:8,type:6},{x:12,y:8,type:5},{x:13,y:8,type:5},{x:14,y:8,type:5},{x:6,y:6,type:6},{x:7,y:6,type:6},{x:8,y:6,type:6},{x:3,y:5,type:6},{x:11,y:5,type:6},{x:6,y:4,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:0,y:2,type:5},{x:1,y:2,type:5},{x:2,y:2,type:5},{x:3,y:2,type:6},{x:11,y:2,type:6},{x:12,y:2,type:5},{x:13,y:2,type:5},{x:14,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:2,y:1,type:5},{x:3,y:1,type:6},{x:4,y:1,type:6},{x:5,y:1,type:6},{x:6,y:1,type:6},{x:7,y:1,type:6},{x:8,y:1,type:6},{x:9,y:1,type:6},{x:10,y:1,type:6},{x:11,y:1,type:6},{x:12,y:1,type:5},{x:13,y:1,type:5},{x:14,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:12,y:0,type:5},{x:13,y:0,type:5},{x:14,y:0,type:5}]},{name:"\u5730\u754C\u5E7B\u5883",width:17,height:13,data:[{x:0,y:12,type:5},{x:1,y:12,type:5},{x:2,y:12,type:5},{x:5,y:12,type:6},{x:6,y:12,type:6},{x:7,y:12,type:6},{x:8,y:12,type:6},{x:9,y:12,type:6},{x:10,y:12,type:6},{x:11,y:12,type:6},{x:14,y:12,type:5},{x:15,y:12,type:5},{x:16,y:12,type:5},{x:0,y:11,type:5},{x:1,y:11,type:5},{x:2,y:11,type:5},{x:6,y:11,type:6},{x:10,y:11,type:6},{x:14,y:11,type:5},{x:15,y:11,type:5},{x:16,y:11,type:5},{x:0,y:10,type:5},{x:1,y:10,type:5},{x:6,y:10,type:6},{x:10,y:10,type:6},{x:15,y:10,type:5},{x:16,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:15,y:9,type:5},{x:16,y:9,type:5},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:9,y:4,type:6},{x:0,y:3,type:5},{x:1,y:3,type:5},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:15,y:3,type:5},{x:16,y:3,type:5},{x:0,y:2,type:5},{x:1,y:2,type:5},{x:6,y:2,type:6},{x:10,y:2,type:6},{x:15,y:2,type:5},{x:16,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:2,y:1,type:5},{x:6,y:1,type:6},{x:10,y:1,type:6},{x:14,y:1,type:5},{x:15,y:1,type:5},{x:16,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:10,y:0,type:6},{x:11,y:0,type:6},{x:14,y:0,type:5},{x:15,y:0,type:5},{x:16,y:0,type:5}]},{name:"\u7ED3\u754C\u5E7B\u5883",width:11,height:11,data:[{x:5,y:8,type:5},{x:2,y:5,type:5},{x:5,y:5,type:5},{x:8,y:5,type:5},{x:5,y:2,type:5}]},{name:"\u57CE\u9685\u5E7B\u5883",width:15,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:5,y:10,type:5},{x:6,y:10,type:5},{x:7,y:10,type:5},{x:8,y:10,type:5},{x:9,y:10,type:5},{x:12,y:10,type:5},{x:13,y:10,type:5},{x:14,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:6,y:9,type:5},{x:8,y:9,type:5},{x:13,y:9,type:5},{x:14,y:9,type:5},{x:0,y:8,type:5},{x:14,y:8,type:5},{x:10,y:6,type:5},{x:5,y:5,type:5},{x:9,y:5,type:5},{x:4,y:4,type:5},{x:0,y:2,type:5},{x:14,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:6,y:1,type:5},{x:8,y:1,type:5},{x:13,y:1,type:5},{x:14,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:5},{x:6,y:0,type:5},{x:7,y:0,type:5},{x:8,y:0,type:5},{x:9,y:0,type:5},{x:12,y:0,type:5},{x:13,y:0,type:5},{x:14,y:0,type:5}]},{name:"\u6D1E\u7A74\u5E7B\u5883",width:11,height:11,data:[{x:0,y:0,type:5},{x:1,y:0,type:5},{x:0,y:1,type:5},{x:0,y:2,type:5},{x:3,y:2,type:6},{x:4,y:2,type:6},{x:2,y:3,type:6},{x:3,y:3,type:6},{x:4,y:3,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:6,y:8,type:6},{x:7,y:8,type:6},{x:10,y:8,type:5},{x:10,y:9,type:5},{x:9,y:10,type:5},{x:10,y:10,type:5}]},{name:"\u5996\u5C71\u5E7B\u5883",width:17,height:11,data:[]}],v=e=>(Ct("data-v-06e946eb"),e=e(),Et(),e),so={class:"wrapper"},ro={class:"toolbar"},ao={class:"setting"},lo={class:"label-control"},uo=v(()=>n("span",null,"\u7F16\u8F91\u6A21\u5F0F",-1)),io=v(()=>n("option",{value:1},"\u7F16\u8F91\u7F51\u683C",-1)),yo=v(()=>n("option",{value:2},"\u5237\u5B50\u6A21\u5F0F",-1)),co=v(()=>n("option",{value:3},"\u9009\u62E9\u5F62\u72B6",-1)),po=v(()=>n("option",{value:4},"\u62A4\u536B\u8BA1\u7B97",-1)),xo=[io,yo,co,po],fo={class:"label-control"},vo=v(()=>n("span",null,"\u8303\u56F4",-1)),mo={class:"label-control"},ho=v(()=>n("span",null,"\u5F62\u72B6",-1)),bo=v(()=>n("option",{value:1},"\u83F1\u5F62",-1)),_o=v(()=>n("option",{value:2},"\u5708\u6570",-1)),go=[bo,_o],Fo={class:"label-control"},wo=v(()=>n("span",null,"\u6392\u5E8F",-1)),ko=v(()=>n("option",{value:1},"\u8DDD\u79BBX",-1)),Co=v(()=>n("option",{value:2},"\u8DDD\u79BBY",-1)),Eo=v(()=>n("option",{value:3},"X\u4F18\u5148",-1)),Do=v(()=>n("option",{value:4},"Y\u4F18\u5148",-1)),Bo=[ko,Co,Eo,Do],Io=v(()=>n("button",{class:"btn"},"\u9884\u8BBE\u573A\u666F",-1)),$o=["onClick"],Ho=["onClick"],Vo=v(()=>n("div",{style:{flex:"1 1 0"}},null,-1)),Go=v(()=>n("article",null,[n("h2",null,"\u8BF4\u660E"),n("p",null,"\u70B9\u51FB\u9884\u8BBE\u573A\u666F\uFF0C\u53EF\u4EE5\u8F7D\u5165\u4E00\u4E9B\u9884\u8BBE\u7684\u573A\u666F\u3002"),n("p",null,"\u53F3\u4FA7\u5355\u4F4D\u53EF\u901A\u8FC7\u62D6\u66F3\u62C9\u5165\u7F51\u683C\u3002"),n("p",null,[xt(" \u9009\u4E2D\u7F51\u683C\u4E2D\u7684\u5355\u4F4D\u53EF\u4EE5\u4F7F\u7528\u201C\u602A\u529B\u4E71\u795E\u201D\u3001\u201C\u5F00\u8F66\u201D\u529F\u80FD\u3002"),n("br"),xt(" \u201C\u602A\u529B\u4E71\u795E\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u975E\u540C\u961F\u5355\u4F4D\u3002"),n("br"),xt(" \u201C\u5F00\u8F66\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u540C\u961F\u5355\u4F4D\u3002"),n("br"),xt(" \u4F7F\u7528\u529F\u80FD\u524D\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40\uFF0C\u65B9\u4FBF\u9884\u89C8\u7ED3\u679C\u540E\u5FEB\u901F\u8FD8\u539F\u5E03\u5C40\u3002 ")])],-1)),Ro={class:"color-container"},Ao={class:"label-control"},So=v(()=>n("span",null,"\u9884\u89C8",-1)),Mo={class:"label-control"},Lo=v(()=>n("span",null,"\u6587\u5B57",-1)),Uo={class:"label-control"},Oo=v(()=>n("span",null,"\u80CC\u666F",-1)),No=v(()=>n("label",{class:"label-control"},[n("span",null,"\u9884\u8BBE")],-1)),Wo={class:"color-tpls"},To=xt(" E "),zo={width:"32",height:"32",viewBox:"0 0 24 24",fill:"#a9a9a9",style:{"pointer-events":"none"}},Ko=v(()=>n("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},null,-1)),qo=[Ko],Xo={class:"props-container"},Zo={key:0,class:"props-content"},jo={class:"label-control"},Jo=v(()=>n("span",null,"\u9884\u89C8",-1)),Po={class:"label-control"},Qo=v(()=>n("span",null,"\u6587\u5B57",-1)),Yo={class:"label-control"},tn=v(()=>n("span",null,"\u80CC\u666F",-1)),en={class:"label-control"},on=v(()=>n("span",null,"\u5927\u5C0F",-1)),nn={class:"label-control"},sn=v(()=>n("span",null,"\u5185\u5BB9",-1)),rn={class:"label-control"},an=v(()=>n("span",null,"\u5730\u5F62",-1)),ln=["value"],un=["value"],yn=["value"],cn={class:"label-control"},dn=v(()=>n("span",null,"Id",-1)),pn={class:"label-control"},xn=v(()=>n("span",null,"\u7C7B\u578B",-1)),fn=["value"],vn=["value"],mn=["value"],hn=["value"],bn={class:"label-control"},_n=v(()=>n("span",null,"\u98DE\u884C",-1)),gn={class:"controls"},Fn={key:0,class:"label-control"},wn=v(()=>n("span",null,"\u5355\u4F4DID",-1)),kn=["value"],Cn={key:1,class:"label-control"},En=v(()=>n("span",null,"\u961F\u4F0D",-1)),Dn=v(()=>n("option",{value:void 0},"\u961F\u4F0D\u7A7A",-1)),Bn=v(()=>n("option",{value:0},"\u961F\u4F0D0",-1)),In=v(()=>n("option",{value:1},"\u961F\u4F0D1",-1)),$n=v(()=>n("option",{value:2},"\u961F\u4F0D2",-1)),Hn=[Dn,Bn,In,$n],Vn={class:"content"},Gn={class:"grids"},Rn={class:"panel-right"},An={class:"controls"},Sn={class:"label-control"},Mn=v(()=>n("span",null,"\u961F\u4F0D",-1)),Ln=v(()=>n("option",{value:0},"\u961F\u4F0D0",-1)),Un=v(()=>n("option",{value:1},"\u961F\u4F0D1",-1)),On=v(()=>n("option",{value:2},"\u961F\u4F0D2",-1)),Nn=[Ln,Un,On],Wn={class:"heroes"},Tn=wt({__name:"Grids",setup(e){const{rows:u,cols:D,actorId:g,grids:i,selects:l,gridColors:a,defGridUnit:b,defGridState:C,defGrid:$,cleanGrid:S,cleanGrids:z,setSize:U,getGrid:H,gridForEach:j}=oo(),Q=tt(),y=ft({editor:1,selectRange:5,shape:1,sortType:1,color:a[0].color,bgcolor:a[0].bgcolor,terrain:void 0}),Y=$();Y.terrain={image:Ot,type:R.BLOCKED};const I=$();I.terrain={image:Ut,type:R.CLIFF};function O(o){y.color=o.color,y.bgcolor=o.bgcolor,y.terrain=void 0}function K(o){y.color="",y.bgcolor="",y.terrain=o.terrain}const{heroes:et}=he(),d=St($(b())),G=St(et.value.map(o=>{const t=$(),r=b();return r.unitId=o.id,r.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${o.hero_icon}.png`,r.name=o.name,t.unit=r,t}));Nt(et,()=>{G.value=et.value.map(o=>{const t=$(),r=b();return r.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${o.hero_icon}.png`,t.unit=r,t})});function q(o,t,r,F){const m=[];return j(k=>{k.state=C()}),j(k=>{const c=Math.abs(o-k.x),_=Math.abs(t-k.y),s=c+_,A=Math.max(c,_),p=c>1?c-1:c+_>1?_-1:_;switch(F){case 1:s<=r&&(k.state.d=s,k.state.q=A,k.state.d1=p,m.push(k));break;case 2:Math.abs(c)<=r&&Math.abs(_)<=r&&(k.state.d=s,k.state.q=A,k.state.d1=p,m.push(k));break}}),m}function bt(o,t,r,F,m,k,c){const _=q(o,t,r,F);switch(_.forEach(s=>{s.data.color=k,s.data.bgcolor=c}),l.value=_,m){case 1:l.value.sort(zt);break;case 2:l.value.sort(_t);break;case 3:l.value.sort(Kt);break;case 4:l.value.sort(qt);break}for(let s=0;s<l.value.length;s++){const A=l.value[s];A.data.txt=String(s+1)}}function zt(o,t){return o.state.q!==t.state.q?o.state.q-t.state.q:o.state.d!==t.state.d?o.state.d-t.state.d:o.x!==t.x?o.x-t.x:o.y!==t.y?o.y-t.y:0}function _t(o,t){return o.state.q!==t.state.q?o.state.q-t.state.q:o.state.d!==t.state.d?o.state.d-t.state.d:o.y!==t.y?o.y-t.y:o.x!==t.x?o.x-t.x:0}function Kt(o,t){return o.x!==t.x?o.x-t.x:o.y!==t.y?o.y-t.y:0}function qt(o,t){return o.y!==t.y?o.y-t.y:o.x!==t.x?o.x-t.x:0}const f=ft({enabled:!1});function Xt(){z()}function Bt(){f.enabled=!1}function Zt(o,t){var r;switch(y.editor){case 1:case 4:f.current=t,(r=Q.value)==null||r.focus();break;case 3:z(),bt(t.x,t.y,y.selectRange,y.shape,y.sortType,y.color,y.bgcolor);break}}function jt(o,t){if(o.button===0)switch(y.editor){case 2:{f.enabled=!0,t.data.color=y.color,t.data.bgcolor=y.bgcolor,y.terrain?(t.terrain.type=y.terrain.type,t.terrain.image=y.terrain.image):(t.terrain.type=R.NONE,t.terrain.image="");break}}}function Jt(o,t){o.button===0&&f.enabled&&(t.data.color=y.color,t.data.bgcolor=y.bgcolor,y.terrain?(t.terrain.type=y.terrain.type,t.terrain.image=y.terrain.image):(t.terrain.type=R.NONE,t.terrain.image=""))}function Pt(){f.current=void 0}const ut=tt({width:15,height:15});function Qt(){try{const o=localStorage.getItem("grids");if(!o)return;const t=JSON.parse(o);ut.value=t}catch{}}function It(){if(!confirm("\u786E\u5B9A\u8981\u4FDD\u5B58\u5417\uFF1F"))return;let t=i.value.flat().filter(r=>r.terrain.type!==R.NONE||r.unit&&r.unit.actorId>0);t=mt.cloneDeep(t),ut.value={width:D.value,height:u.value,data:t},localStorage.setItem("grids",JSON.stringify(ut.value))}function Yt(){const o=ut.value;if(!!o.data){U(o.width,o.height);for(const t of o.data){const r=H(t.x,t.y);!r||(t.data&&(r.data=t.data),t.terrain&&(r.terrain=t.terrain),t.unit&&t.unit.actorId>0&&(r.unit=t.unit))}}}function te(o){U(o.width,o.height),o.data.forEach(t=>{const r=H(t.x,t.y);if(!!r)switch(t.type){case R.CLIFF:r.terrain={image:Ut,type:R.CLIFF};break;case R.BLOCKED:r.terrain={image:Ot,type:R.BLOCKED};break}})}function ee(){var _;const o=f.current;if(!o)return;ut.value||It();const t=(_=o.unit)==null?void 0:_.team;let r,F,m=[];for(r=o.x-2;r<=o.x+2;r++)for(F=o.y-2;F<=o.y+2;F++){const s=H(r,F);!s||(s.x===o.x&&s.y===o.y?(m[0]&&m.push(m[0]),m[0]=s):m.push(s))}m=m.filter(s=>s.unit&&s.unit.team!==t&&!(s.x===o.x&&s.y===o.y));const k=m.map(s=>({unit:s.unit}));m.forEach(s=>{S(s)});const c=q(o.x,o.y,4,2).filter(s=>s.terrain.type!==R.BLOCKED&&!(s.x===o.x&&s.y===o.y)).sort(_t).map(s=>[s.x,s.y]);for(const s of k)for(const[A,p]of c){const x=H(A,p);if(!!x&&!(x.unit&&x.unit.actorId>0)&&x.terrain.type!==R.BLOCKED&&!(x.terrain.type===R.CLIFF&&!s.unit.fly)){x.unit=s.unit;break}}}let X;function oe(){const o=f.current;if(!o)return;const t=[{x:0,y:1,overlay:W.ARROW_UP},{x:1,y:0,overlay:W.ARROW_RIGHT},{x:0,y:-1,overlay:W.ARROW_DOWN},{x:-1,y:0,overlay:W.ARROW_LEFT}];for(const r of t){const F=H(o.x+r.x,o.y+r.y);if(!!F){F.overlay=r.overlay;for(let m=2;m<=4;m++){const k=H(o.x+r.x*m,o.y+r.y*m);!k||(k.overlay=W.HIGHLIGHT)}}}X=o}function ne(o){var p;if(!X||!o||o===W.HIGHLIGHT)return;const t=(p=X.unit)==null?void 0:p.team;let r,F,m=[];for(r=X.x-1;r<=X.x+1;r++)for(F=X.y-1;F<=X.y+1;F++){if(r===X.x&&F===X.y)continue;const x=H(r,F);!x||!x.unit||x.unit.team===t&&(x.state.d=gt(X,x),m.push(x))}m.sort((x,N)=>!x.unit||!N.unit?0:x.state.d!==N.state.d?x.state.d-N.state.d:x.unit.actorId-N.unit.actorId),m=m.slice(0,2);const k=m.map(x=>({unit:x.unit}));m.forEach(x=>{x.unit=void 0}),console.log(k);const _={[W.ARROW_UP]:{x:0,y:1},[W.ARROW_RIGHT]:{x:1,y:0},[W.ARROW_DOWN]:{x:0,y:-1},[W.ARROW_LEFT]:{x:-1,y:0}}[o];let s;for(let x=1;x<=4;x++){const N=H(X.x+x*_.x,X.y+x*_.y);N&&N.terrain.type===R.NONE&&(s=N)}if(!s)return;j(x=>{x.overlay=void 0});const A=q(s.x,s.y,4,2).filter(x=>x.terrain.type!==R.BLOCKED&&!(x.x===(s==null?void 0:s.x)&&x.y===(s==null?void 0:s.y))).sort(_t).map(x=>[x.x,x.y]);for(const x of k)for(const[N,vt]of A){const M=H(N,vt);if(!!M&&!(M.unit&&M.unit.actorId>0)&&M.terrain.type!==R.BLOCKED&&!(M.terrain.type===R.CLIFF&&!x.unit.fly)){M.unit=x.unit;break}}s&&(Gt(s,X),f.current=s)}const B=ft({team:1}),$t=["#ffffff00","#FF3C4132","#0EBEFF32","#48CF7432","#FCD00032","#80008032"],se=(o,t)=>{switch(y.editor){case 2:o.preventDefault();break;default:B.grid=t,B.action="swap",o.dataTransfer&&(o.dataTransfer.effectAllowed="move")}},re=(o,t)=>{const r=$();r.data.color=t.color,r.data.bgcolor=t.bgcolor,r.data.txt="E",B.grid=r,B.action="color"},Ht=(o,t)=>{B.grid=mt.cloneDeep(t),B.action="terrain"},Vt=(o,t)=>{B.grid=mt.cloneDeep(t),B.action="unit"},ae=(o,t)=>{if(o.preventDefault(),!B.grid)return;const r=B.grid.unit,F=B.grid.terrain;switch(B.action){case"color":t.unit||(t.unit=b()),t.unit.actorId||(t.unit.actorId=++g.value),t.data=B.grid.data;break;case"unit":if(t.unit||(t.unit=b()),t.unit.actorId||(t.unit.actorId=++g.value),!r)break;t.unit.image=r.image,t.unit.unitId=r.unitId,t.unit.team=B.team;break;case"swap":Gt(B.grid,t,!r||r.actorId===0);break;case"terrain":t.terrain=F;break}B.grid=void 0,B.action=void 0,f.current&&(f.current=t),y.editor===4&&it()};function le(o,t){let r=o[0].state[t];for(let F=1;F<o.length;F++)o[F].state[t]<r&&(r=o[F].state[t]);return r}function gt(o,t){return Math.abs(o.x-t.x)+Math.abs(o.y-t.y)}function Gt(o,t,r){const F=o.data,m=o.unit,k=o.terrain;o.data=t.data,o.unit=t.unit,t.data=F,t.unit=m,r&&(o.terrain=t.terrain,t.terrain=k)}function Rt(o,t,r){o.sort((c,_)=>!c.unit||!_.unit?0:+c.unit.actorId-+_.unit.actorId),o.forEach(c=>{c.state.d1=gt(c,r),c.state.d2=gt(c,t),c.unit&&(c.unit.guard=!1)});const F=le(o,"d1");if(o=o.filter(c=>c.state.d1===F),o.length===1)return o[0];let m=o[0],k=o.length;for(;k--;)if(o[k].state.d2<m.state.d2){m=o[k];break}return m}function ue(){U(15,15),g.value=0;const o=[{x:7,y:9,txt:"",type:L.GUARD,bg:"#0ebeff"},{x:9,y:7,txt:"",type:L.GUARD,bg:"#0ebeff"},{x:7,y:5,txt:"",type:L.GUARD,bg:"#0ebeff"},{x:5,y:7,txt:"",type:L.GUARD,bg:"#0ebeff"},{x:8,y:6,txt:"",type:L.ATTACKER,bg:"#ff3c41"},{x:7,y:7,txt:"",type:L.SHEEP,bg:"#fcd000"}];for(const t of o){const r=H(t.x,t.y);!r||(r.unit||(r.unit=b()),r.unit.actorId=++g.value,r.unit.actorType=t.type,r.disabled=!1,r.data.txt=t.txt,r.data.bgcolor=t.bg)}y.editor=4}const it=()=>{const o=i.value.flat();o.forEach(c=>{c.data.opacity=1});const t=o.filter(c=>c.unit&&!c.disabled),r=t.filter(c=>{var _;return((_=c.unit)==null?void 0:_.actorType)===L.ATTACKER})[0],F=t.filter(c=>{var _;return((_=c.unit)==null?void 0:_.actorType)===L.SHEEP})[0],m=t.filter(c=>{var _;return((_=c.unit)==null?void 0:_.actorType)===L.GUARD});if(!F||m.length===0){alert("\u7F3A\u5C11\u89D2\u8272\uFF0C\u5C06\u81EA\u52A8\u751F\u6210"),ue(),it();return}const k=o.filter(c=>!c.unit);for(const c of k){const _=Rt(m,c,F);!_.unit||(c.data.image=_.unit.image,c.data.bgcolor=$t[_.unit.actorId]||$t[0],_.data.image?c.data.sup="":c.data.sup=String(_.unit.actorId),c.data.opacity=.6)}if(r){const c=Rt(m,r,F);c.unit&&(c.unit.guard=!0)}},ie=o=>{if(!!o.unit&&y.editor===4){switch(o.unit.actorType){case L.GUARD:o.disabled=!o.disabled;break}it()}},ye=o=>{var t;!B.grid||!o.dataTransfer||B.action==="swap"&&(y.editor===4&&((t=B.grid.unit)==null?void 0:t.actorType)===L.SHEEP||o.preventDefault())},ce=o=>{if(!!B.grid&&!!o)switch(B.action){case"swap":S(o),B.grid=void 0,B.action=void 0,y.editor===4&&it()}},Ft=tt(!1);function de(){Ft.value=!0}return Wt(()=>{Qt(),window.addEventListener("mouseup",Bt,!1)}),Tt(()=>{window.removeEventListener("mouseup",Bt,!1)}),(o,t)=>{var m,k,c,_;const r=fe("c-space"),F=me("autofocus");return w(),E("div",so,[n("div",ro,[n("div",ao,[n("label",lo,[uo,V(n("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.editor=s)},xo,512),[[st,y.editor,void 0,{number:!0}]])]),n("label",fo,[vo,V(n("input",{type:"number",min:"0","onUpdate:modelValue":t[1]||(t[1]=s=>y.selectRange=s),style:{width:"5em"}},null,512),[[J,y.selectRange]])]),n("label",mo,[ho,V(n("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.shape=s)},go,512),[[st,y.shape]])]),n("label",Fo,[wo,V(n("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>y.sortType=s)},Bo,512),[[st,y.sortType]])]),n("button",{class:"btn",onClick:Xt},"\u6E05\u7A7A"),n("button",{class:"btn",onClick:it},"\u8BA1\u7B97\u62A4\u536B"),n("button",{class:"btn btn-success",onClick:It},"\u4FDD\u5B58\u5E03\u5C40"),n("button",{class:"btn btn-success",onClick:Yt},"\u8FD8\u539F\u5E03\u5C40"),T("",!0),Z(h(be),null,{popover:rt(({onClose:s})=>[n("div",{class:"list",onClick:A=>s()},[(w(!0),E(yt,null,ct(h(no),(A,p)=>(w(),E("div",{class:"list-item",key:p,onClick:x=>te(A)},pt(A.name),9,Ho))),128))],8,$o)]),default:rt(()=>[Io]),_:1}),Vo,n("div",{class:"btn btn-link",onClick:de},"\u5E2E\u52A9"),Z(_e,{show:Ft.value,"onUpdate:show":t[4]||(t[4]=s=>Ft.value=s),width:"600px"},{default:rt(()=>[Go]),_:1},8,["show"])]),n("div",Ro,[Z(r,null,{default:rt(()=>{var s,A;return[n("label",Ao,[So,Z(h(nt),{draggable:!1,data:{txt:"E",size:14,opacity:1,color:y.color,bgcolor:y.bgcolor},terrain:y.terrain},null,8,["data","terrain"])]),n("label",Mo,[Lo,Z(h(lt),{modelValue:y.color,"onUpdate:modelValue":t[5]||(t[5]=p=>y.color=p)},null,8,["modelValue"])]),n("label",Uo,[Oo,Z(h(lt),{modelValue:y.bgcolor,"onUpdate:modelValue":t[6]||(t[6]=p=>y.bgcolor=p)},null,8,["modelValue"])]),No,n("div",Wo,[(w(!0),E(yt,null,ct(h(a),(p,x)=>(w(),dt(h(nt),{key:x,selected:y.bgcolor===p.bgcolor,style:P([`--color:${p.color};--bgcolor:${p.bgcolor}`]),onClick:N=>O(p),onDragstart:N=>re(N,p)},{default:rt(()=>[To]),_:2},1032,["selected","style","onClick","onDragstart"]))),128)),Z(h(nt),{selected:((s=y.terrain)==null?void 0:s.type)===h(I).terrain.type,terrain:h(I).terrain,onClick:t[7]||(t[7]=p=>K(h(I))),onDragstart:t[8]||(t[8]=p=>Ht(p,h(I)))},null,8,["selected","terrain"]),Z(h(nt),{selected:((A=y.terrain)==null?void 0:A.type)===h(Y).terrain.type,terrain:h(Y).terrain,onClick:t[9]||(t[9]=p=>K(h(Y))),onDragstart:t[10]||(t[10]=p=>Ht(p,h(Y)))},null,8,["selected","terrain"])]),n("div",{class:"trush",onDragover:ye,onDrop:t[11]||(t[11]=p=>ce(B.grid))},[(w(),E("svg",zo,qo))],32)]}),_:1})]),n("div",Xo,[f.current?(w(),E("div",Zo,[Z(r,null,{default:rt(()=>[n("label",jo,[Jo,Z(h(nt),{draggable:!1,style:P([`--color:${f.current.data.color};--bgcolor:${f.current.data.bgcolor}`]),data:f.current.data,terrain:f.current.terrain,overlay:f.current.overlay,unit:f.current.unit},null,8,["style","data","terrain","overlay","unit"])]),n("label",Po,[Qo,Z(h(lt),{modelValue:f.current.data.color,"onUpdate:modelValue":t[12]||(t[12]=s=>f.current.data.color=s)},null,8,["modelValue"])]),n("label",Yo,[tn,Z(h(lt),{modelValue:f.current.data.bgcolor,"onUpdate:modelValue":t[13]||(t[13]=s=>f.current.data.bgcolor=s)},null,8,["modelValue"])]),n("label",en,[on,V(n("input",{type:"number",style:{width:"4em"},min:"12",step:"1","onUpdate:modelValue":t[14]||(t[14]=s=>f.current.data.size=s)},null,512),[[J,f.current.data.size]])]),n("label",nn,[sn,V(n("input",{type:"text",ref_key:"txtInput",ref:Q,"onUpdate:modelValue":t[15]||(t[15]=s=>f.current.data.txt=s),style:{width:"6em"}},null,512),[[F],[J,f.current.data.txt]])]),n("label",rn,[an,V(n("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>f.current.terrain.type=s)},[n("option",{value:h(R).NONE},"\u65E0",8,ln),n("option",{value:h(R).BLOCKED},"\u969C\u788D",8,un),n("option",{value:h(R).CLIFF},"\u60AC\u5D16",8,yn)],512),[[st,f.current.terrain.type]])]),f.current.unit?(w(),dt(r,{key:0},{default:rt(()=>[n("label",cn,[dn,V(n("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>f.current.unit.actorId=s),style:{width:"4em"}},null,512),[[J,f.current.unit.actorId]])]),n("label",pn,[xn,V(n("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>f.current.unit.actorType=s)},[n("option",{value:h(L).NONE},"\u65E0",8,fn),n("option",{value:h(L).GUARD},"\u62A4\u536B",8,vn),n("option",{value:h(L).SHEEP},"\u9776\u5B50",8,mn),n("option",{value:h(L).ATTACKER},"\u653B\u51FB\u8005",8,hn)],512),[[st,f.current.unit.actorType]])]),n("label",bn,[_n,V(n("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>f.current.unit.fly=s)},null,512),[[ve,f.current.unit.fly]])])]),_:1})):T("",!0),n("button",{class:"btn",onClick:Pt},"\u5B8C\u6210")]),_:1})])):T("",!0)]),n("div",gn,[(m=f.current)!=null&&m.unit?(w(),E("label",Fn,[wn,n("input",{type:"text",readonly:"",value:f.current.unit.unitId,style:{width:"4em"}},null,8,kn)])):T("",!0),(k=f.current)!=null&&k.unit?(w(),E("label",Cn,[En,V(n("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>f.current.unit.team=s)},Hn,512),[[st,f.current.unit.team]])])):T("",!0),(c=f.current)!=null&&c.unit?(w(),E("button",{key:2,class:"btn btn-success",onClick:ee},"\u602A\u529B\u4E71\u795E")):T("",!0),(_=f.current)!=null&&_.unit?(w(),E("button",{key:3,class:"btn btn-success",onClick:oe},"\u5F00\u8F66")):T("",!0)])]),n("div",Vn,[n("div",Gn,[(w(!0),E(yt,null,ct(h(i),(s,A)=>(w(),E("div",{class:"grids-row",key:A},[(w(!0),E(yt,null,ct(s,(p,x)=>{var N,vt;return w(),dt(h(nt),{key:x,draggable:!0,selected:p.x===((N=f.current)==null?void 0:N.x)&&p.y===((vt=f.current)==null?void 0:vt.y),disabled:p.disabled,dot:p.unit&&p.unit.guard,data:p.data,terrain:p.terrain,overlay:p.overlay,unit:p.unit,onDragstart:M=>se(M,p),onDragover:t[21]||(t[21]=at(()=>{},["prevent"])),onDrop:M=>ae(M,p),onContextmenu:at(M=>ie(p),["prevent"]),onClick:M=>Zt(M,p),onMousedown:M=>jt(M,p),onMouseenter:M=>Jt(M,p),onClickoverlay:ne},null,8,["selected","disabled","dot","data","terrain","overlay","unit","onDragstart","onDrop","onContextmenu","onClick","onMousedown","onMouseenter"])}),128))]))),128))]),n("div",Rn,[n("div",An,[n("label",Sn,[Mn,V(n("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>B.team=s)},Nn,512),[[st,B.team]])])]),n("div",Wn,[Z(h(nt),{item:h(d),onDragstart:t[23]||(t[23]=s=>Vt(s,h(d)))},null,8,["item"]),(w(!0),E(yt,null,ct(h(G),(s,A)=>(w(),dt(h(nt),{key:A,data:s.data,terrain:s.terrain,overlay:s.overlay,unit:s.unit,onDragstart:p=>Vt(p,s)},null,8,["data","terrain","overlay","unit","onDragstart"]))),128))])])])])}}});const Zn=kt(Tn,[["__scopeId","data-v-06e946eb"]]);export{Zn as default};
