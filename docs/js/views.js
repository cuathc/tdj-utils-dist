import{d as Ct,o as d,c as _,p as M,D as yt,f as ue,e as t,a as h,w as U,b as ot,y as s,F as J,g as lt,A as Ge,i as Tt,R as It,z as tt,_ as Mt,r as bt,P as Ut,Q as Vt,H as j,N as Et,I as Dt,J as kt,G as v,m as Ee,L as be,x as Kt,O as je,B as Me,n as zt,U as ye,q as He,E as Le,t as _e}from"./vendor.js";import{_ as Bt,s as gt,i as Pe,I as Ke,a as Yt,S as Lt,b as We,c as De,d as Be,e as ee,g as Je,f as Qt,l as Ye,h as Xe,T as Qe,j as Ze,k as tu,C as eu,m as Fe,n as uu,o as fe,p as nu,r as ou,q as au,t as su,u as lu,v as iu,w as ru,x as du,y as cu,z as jt,A as pu,B as yu,D as _u,E as fu,F as xu,G as Pt,H as vu,J as mu,K as xe,L as Z,M as ve,N as me,O as hu,P as Eu,Q as bu,R as Du,U as Bu,V as At,W as pt,X as qt,Y as Zt,Z as Fu,$ as he,a0 as Cu}from"./components.js";const $u=Ct({name:"Home",components:{}});function wu(o,f,y,k,I,P){return d(),_("div")}const mi=Bt($u,[["render",wu]]);function Ce(){return{id:0,name:"",key:"none",pinyin:"",is_new:"",pic:"",hero_icon:"",prop:"",prop_icon:"",career:"",career_icon:"",position:"",range:0,speed:0,rarity:"",source:"",weight:0,star1:"",star2:"",star3:"",star4:"",star5:"",star6:"",story_name:"",story_content:"",strategy:"",inherent:"",inherent_name:"",skill:[],qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,qixue_cz:0,patt_cz:0,pdef_cz:0,matt_cz:0,mdef_cz:0,huixin_cz:0,eq_suit3:"",eq_suit6:"",eq_suit9:"",eq1_qixue:0,eq1_patt:0,eq1_pdef:0,eq1_matt:0,eq1_mdef:0,eq1_huixin:0,eq2_qixue:0,eq2_patt:0,eq2_pdef:0,eq2_matt:0,eq2_mdef:0,eq2_huixin:0,eq3_qixue:0,eq3_patt:0,eq3_pdef:0,eq3_matt:0,eq3_mdef:0,eq3_huixin:0,eq4_qixue:0,eq4_patt:0,eq4_pdef:0,eq4_matt:0,eq4_mdef:0,eq4_huixin:0,wp_qixue:0,wp_patt:0,wp_pdef:0,wp_matt:0,wp_mdef:0,wp_huixin:0,wn0_qixue:0,wn0_patt:0,wn0_pdef:0,wn0_matt:0,wn0_mdef:0,wn0_huixin:0,wn1_qixue:0,wn1_patt:0,wn1_pdef:0,wn1_matt:0,wn1_mdef:0,wn1_huixin:0,wn2_qixue:0,wn2_patt:0,wn2_pdef:0,wn2_matt:0,wn2_mdef:0,wn2_huixin:0,hz_qixue:0,hz_patt:0,hz_pdef:0,hz_matt:0,hz_mdef:0,hz_huixin:0,hz_qixuep:0,hz_pattp:0,hz_pdefp:0,hz_mattp:0,hz_mdefp:0,hz_huixinp:0,xh_qixue:0,xh_patt:0,xh_pdef:0,xh_matt:0,xh_mdef:0,xh_huixin:0,xh_qixuep:0,xh_pattp:0,xh_pdefp:0,xh_mattp:0,xh_mdefp:0,xh_huixinp:0}}function gu(){return{editor:M(),defaultHeroState:Ce}}function $e(){const o=M(!1),f=yt({qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0}),y=yt(Ce()),k=M(!1),I=M(!0),P=M(!0),g=M(!1),B=(n,a,m)=>Math.round(n/a*m),x=yt({v:70,eq:16}),b=n=>{const a={qixue:n.qixue,patt:n.patt,pdef:n.pdef,matt:n.matt,mdef:n.mdef,huixin:n.huixin};n.real||(a.qixue+=x.v*n.qixue_cz,a.patt+=x.v*n.patt_cz,a.pdef+=x.v*n.pdef_cz,a.matt+=x.v*n.matt_cz,a.mdef+=x.v*n.mdef_cz,a.huixin+=x.v*n.huixin_cz),a.qixue+=n.wp_qixue,a.patt+=n.wp_patt,a.pdef+=n.wp_pdef,a.matt+=n.wp_matt,a.mdef+=n.wp_mdef,a.huixin+=n.wp_huixin,a.qixue+=n.eq1_qixue,a.patt+=n.eq1_patt,a.pdef+=n.eq1_pdef,a.matt+=n.eq1_matt,a.mdef+=n.eq1_mdef,a.huixin+=n.eq1_huixin,a.qixue+=n.eq2_qixue,a.patt+=n.eq2_patt,a.pdef+=n.eq2_pdef,a.matt+=n.eq2_matt,a.mdef+=n.eq2_mdef,a.huixin+=n.eq2_huixin,a.qixue+=n.eq3_qixue,a.patt+=n.eq3_patt,a.pdef+=n.eq3_pdef,a.matt+=n.eq3_matt,a.mdef+=n.eq3_mdef,a.huixin+=n.eq3_huixin,a.qixue+=n.eq4_qixue,a.patt+=n.eq4_patt,a.pdef+=n.eq4_pdef,a.matt+=n.eq4_matt,a.mdef+=n.eq4_mdef,a.huixin+=n.eq4_huixin,a.qixue+=n.wn0_qixue,a.patt+=n.wn0_patt,a.pdef+=n.wn0_pdef,a.matt+=n.wn0_matt,a.mdef+=n.wn0_mdef,a.huixin+=n.wn0_huixin,a.qixue+=n.wn1_qixue,a.patt+=n.wn1_patt,a.pdef+=n.wn1_pdef,a.matt+=n.wn1_matt,a.mdef+=n.wn1_mdef,a.huixin+=n.wn1_huixin,a.qixue+=n.wn2_qixue,a.patt+=n.wn2_patt,a.pdef+=n.wn2_pdef,a.matt+=n.wn2_matt,a.mdef+=n.wn2_mdef,a.huixin+=n.wn2_huixin;const m={qixue:145,patt:135,pdef:155,matt:135,mdef:155,huixin:100};return k.value&&(m.qixue+=4,m.patt+=4,m.pdef+=4,m.matt+=4,m.mdef+=4),I.value&&n.rarity!=="R"&&(a.qixue+=n.hz_qixue,a.patt+=n.hz_patt,a.pdef+=n.hz_pdef,a.matt+=n.hz_matt,a.mdef+=n.hz_mdef,a.huixin+=n.hz_huixin,m.qixue+=n.hz_qixuep,m.patt+=n.hz_pattp,m.pdef+=n.hz_pdefp,m.matt+=n.hz_mattp,m.mdef+=n.hz_mdefp,m.huixin+=n.hz_huixinp),g.value&&(a.qixue+=n.xh_qixue,a.patt+=n.xh_patt,a.pdef+=n.xh_pdef,a.matt+=n.xh_matt,a.mdef+=n.xh_mdef,a.huixin+=n.xh_huixin),P.value&&(m.qixue+=n.xh_qixuep,m.patt+=n.xh_pattp,m.pdef+=n.xh_pdefp,m.matt+=n.xh_mattp,m.mdef+=n.xh_mdefp,m.huixin+=n.xh_huixinp),{qixue:Math.round(a.qixue*m.qixue/100),patt:Math.round(a.patt*m.patt/100),pdef:Math.round(a.pdef*m.pdef/100),matt:Math.round(a.matt*m.matt/100),mdef:Math.round(a.mdef*m.mdef/100),huixin:Math.round(a.huixin*m.huixin/100)}};function S(){o.value=!0}function X(){o.value=!1}function D(){o.value=!o.value}return{show:o,level:x,basic:f,form:y,xingyao:k,huazhen:I,xinghun:P,xinghui:g,calc:B,translate:b,open:S,close:X,toggle:D}}const Y=o=>(Ut("data-v-6aef3860"),o=o(),Vt(),o),Au={class:"toolbar"},ku=Y(()=>t("span",{class:"title"},"\u4EBA\u7269\u5217\u8868",-1)),Su={class:"label-control-inline"},qu=Y(()=>t("span",null,"\u540D\u5B57",-1)),Iu={class:"label-control-inline",style:{width:"80px"}},Tu=Y(()=>t("span",null,"\u7B49\u7EA7",-1)),Uu={class:"label-control-inline",style:{width:"80px"}},Vu=Y(()=>t("span",null,"\u53CA\u8EAB",-1)),zu={class:"label-control-inline",style:{width:"100px"}},Ou=Y(()=>t("span",null,"\u5C5E\u6027",-1)),Ru=Y(()=>t("option",{value:""},"\u5168\u90E8",-1)),Nu=Y(()=>t("option",{value:"\u708E"},"\u708E",-1)),Gu=Y(()=>t("option",{value:"\u96F7"},"\u96F7",-1)),ju=Y(()=>t("option",{value:"\u51B0"},"\u51B0",-1)),Mu=Y(()=>t("option",{value:"\u5149"},"\u5149",-1)),Hu=Y(()=>t("option",{value:"\u6697"},"\u6697",-1)),Lu=Y(()=>t("option",{value:"\u5E7D"},"\u5E7D",-1)),Pu=[Ru,Nu,Gu,ju,Mu,Hu,Lu],Ku={class:"label-control-inline",style:{width:"100px"}},Wu=Y(()=>t("span",null,"\u804C\u4E1A",-1)),Ju=Y(()=>t("option",{value:""},"\u5168\u90E8",-1)),Yu=Y(()=>t("option",{value:"\u94C1\u536B"},"\u94C1\u536B",-1)),Xu=Y(()=>t("option",{value:"\u4FA0\u5BA2"},"\u4FA0\u5BA2",-1)),Qu=Y(()=>t("option",{value:"\u5492\u5E08"},"\u5492\u5E08",-1)),Zu=Y(()=>t("option",{value:"\u795D\u7531"},"\u795D\u7531",-1)),tn=Y(()=>t("option",{value:"\u5FA1\u98CE"},"\u5FA1\u98CE",-1)),en=Y(()=>t("option",{value:"\u7FBD\u58EB"},"\u7FBD\u58EB",-1)),un=Y(()=>t("option",{value:"\u6597\u5C06"},"\u6597\u5C06",-1)),nn=[Ju,Yu,Xu,Qu,Zu,tn,en,un],on={class:"c-label"},an={class:"c-label"},sn={class:"c-label"},ln={class:"c-label"},rn={class:"c-upload"},dn=Y(()=>t("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),cn={class:"content"},pn={class:"table-wrap",style:{height:"100%"}},yn={class:"table table-bordered",style:{"min-width":"100%","white-space":"nowrap"}},_n=Y(()=>t("colgroup",null,[t("col",{width:"60"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"80"}),t("col",{width:"100"})],-1)),fn={style:{position:"sticky",top:"0"}},xn=Y(()=>t("th",null,"#",-1)),vn=Y(()=>t("th",null,"\u540D\u5B57",-1)),mn=Y(()=>t("th",null,"\u5C5E\u6027",-1)),hn=Y(()=>t("th",null,"\u804C\u4E1A",-1)),En=Y(()=>t("th",null,"\u64CD\u4F5C",-1)),bn={class:"cell-static text-center"},Dn={key:0,style:{color:"red"}},Bn={class:"cell-static text-center"},Fn={class:"cell-static text-center"},Cn={class:"cell-static text-center"},$n={class:"cell-static text-center"},wn={class:"cell-static text-center"},gn={class:"cell-static text-center"},An={class:"cell-static text-center"},kn={class:"cell-static text-center"},Sn={class:"cell-static text-center"},qn={class:"cell-static"},In=["onClick"],Tn=["onClick"],Un=Ct({__name:"Heroes",setup(o){const f=Ke(),y=yt({name:"",prop:"",career:""}),k=ue(()=>it(gt.value)),{editor:I,defaultHeroState:P}=gu(),g=E=>{const l=gt.value.find(C=>C.id===E);!l||(I.value=Mt.cloneDeep(l))},B=async E=>{const l=gt.value.find(T=>T.id===E.id);if(!l)return;const C=Mt.merge({},l,E);try{if(!f)return;await f.connect(),await f.put("heroes",C),Mt.merge(l,C),I.value=void 0}catch(T){x(T)}};function x(E){if(E instanceof Error)switch(E.name){case"ConstraintError":alert("\u6570\u636E\u5DF2\u7ECF\u5B58\u5728");break;default:alert(E.message)}else alert(E)}async function b(){try{await Pe()}catch(E){x(E)}}async function S(){try{if(!f)return;const E=P();await f.connect(),E.custom=1,delete E.id;const l=await f.add("heroes",E),C=await f.get("heroes",l);if(!C)return;gt.value.push(C)}catch(E){x(E)}}async function X(E){try{if(!f||!E.id||!confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F"))return;await f.connect(),await f.delete("heroes",E.id),gt.value=gt.value.filter(l=>l.id!==E.id)}catch(l){x(l)}}function D(E){return new Promise((l,C)=>{const T=new FileReader;T.onload=()=>{l(JSON.parse(T.result))},T.onerror=()=>{C(T.error)},T.readAsText(E)})}async function n(E){try{const l=E.currentTarget,C=l.files;if(!C||!f)return;await f.connect(),console.log("\u6570\u636E\u5BFC\u5165\u5F00\u59CB");for(let T=0;T<C.length;T++){const L=await D(C[T]);let i=[];if(De(L))i=L;else if(Be(L)&&L.type==="heroes")i=L.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}for(const Rt of i)await f.put("heroes",Rt);console.log("\u6570\u636E\u5BFC\u5165\u7ED3\u675F")}l.value="",b()}catch(l){x(l)}}function a(E){if(E.ctrlKey){const C=[["name","qixue","patt","pdef","matt","mdef","huixin","qixue_cz","patt_cz","pdef_cz","matt_cz","mdef_cz","huixin_cz"].join(",")];for(const L of gt.value)C.push([L.name,L.qixue,L.patt,L.pdef,L.matt,L.mdef,L.huixin,L.qixue_cz,L.patt_cz,L.pdef_cz,L.matt_cz,L.mdef_cz,L.huixin_cz].join(","));const T=new Blob([C.join(`
`)]);ee(T,"correct-heroes.csv");return}const l=new Blob([JSON.stringify({type:"heroes",data:gt.value})]);ee(l,"heroes.json")}const m=M("name"),p=M("NONE");function et(E){if(m.value===E)switch(p.value){case"DESC":p.value="ASC";break;case"ASC":p.value="NONE";break;default:p.value="DESC"}else m.value=E,p.value="DESC"}function it(E){let l=E.slice();return y.name&&(l=l.filter(C=>C.name.includes(y.name))),y.prop&&(l=l.filter(C=>C.prop===y.prop)),y.career&&(l=l.filter(C=>C.career===y.career)),l.sort((C,T)=>{if(C.custom)return-1;switch(m.value){case"qixue":case"patt":case"pdef":case"matt":case"mdef":case"huixin":{const L=ut(C),i=ut(T);return p.value==="DESC"?i[m.value]-L[m.value]:p.value==="ASC"?L[m.value]-i[m.value]:T.weight-C.weight}default:return T.weight-C.weight}}),l}async function _t(){await Je(),alert("\u5DF2\u6210\u529F\u8F7D\u5165\u9ED8\u8BA4\u6570\u636E")}(!gt.value||gt.value.length===0)&&b();const{level:R,translate:ut,xingyao:at,huazhen:ft,xinghun:dt,xinghui:ct}=$e();return(E,l)=>{const C=bt("c-col"),T=bt("c-space"),L=bt("c-row");return d(),_(J,null,[t("div",Ge({class:"wrapper"},E.$attrs),[t("div",Au,[h(L,{flex:"",middle:"",style:{padding:"4px 16px","white-space":"nowrap","flex-wrap":"wrap",gap:"8px"}},{default:U(()=>[h(C,{flex:"1 1 0"},{default:U(()=>[ku,t("label",Su,[qu,j(t("input",{class:"input",type:"text","onUpdate:modelValue":l[0]||(l[0]=i=>y.name=i),placeholder:"\u540D\u5B57\u8FC7\u6EE4"},null,512),[[Et,y.name]])]),t("label",Iu,[Tu,h(s(Yt),{value:s(R).v,"onUpdate:value":l[1]||(l[1]=i=>s(R).v=i),min:"0",max:"70"},null,8,["value"])]),t("label",Uu,[Vu,h(s(Yt),{value:s(R).eq,"onUpdate:value":l[2]||(l[2]=i=>s(R).eq=i),min:"0",max:"16"},null,8,["value"])]),t("label",zu,[Ou,j(t("select",{class:"select","onUpdate:modelValue":l[3]||(l[3]=i=>y.prop=i)},Pu,512),[[Dt,y.prop]])]),t("label",Ku,[Wu,j(t("select",{class:"select","onUpdate:modelValue":l[4]||(l[4]=i=>y.career=i)},nn,512),[[Dt,y.career]])])]),_:1}),h(C,{flex:"0 0 auto"},{default:U(()=>[h(T,{size:"8"},{default:U(()=>[t("label",on,[j(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[5]||(l[5]=i=>It(at)?at.value=i:null)},null,512),[[kt,s(at)]]),ot(" \u661F\u8000 ")]),t("label",an,[j(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=i=>It(ft)?ft.value=i:null)},null,512),[[kt,s(ft)]]),ot(" \u5316\u81FB ")]),t("label",sn,[j(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[7]||(l[7]=i=>It(dt)?dt.value=i:null)},null,512),[[kt,s(dt)]]),ot(" \u661F\u9B42 ")]),t("label",ln,[j(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=i=>It(ct)?ct.value=i:null)},null,512),[[kt,s(ct)]]),ot(" \u661F\u8F89 ")]),t("button",{class:"btn btn-danger",onClick:_t},"\u8F7D\u5165\u9ED8\u8BA4"),t("div",rn,[dn,t("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:l[9]||(l[9]=i=>n(i))},null,32)]),t("button",{class:"btn btn-success",onClick:a},"\u5BFC\u51FA"),t("button",{class:"btn btn-primary",onClick:l[10]||(l[10]=i=>S())},"\u6DFB\u52A0")]),_:1})]),_:1})]),_:1})]),t("div",cn,[t("div",pn,[t("table",yn,[_n,t("thead",fn,[t("tr",null,[xn,vn,t("th",null,[ot(" \u6C14\u8840 "),h(s(Lt),{type:m.value==="qixue"?p.value:"NONE",onClick:l[11]||(l[11]=i=>et("qixue"))},null,8,["type"])]),t("th",null,[ot(" \u7269\u653B "),h(s(Lt),{type:m.value==="patt"?p.value:"NONE",onClick:l[12]||(l[12]=i=>et("patt"))},null,8,["type"])]),t("th",null,[ot(" \u7269\u9632 "),h(s(Lt),{type:m.value==="pdef"?p.value:"NONE",onClick:l[13]||(l[13]=i=>et("pdef"))},null,8,["type"])]),t("th",null,[ot(" \u6CD5\u653B "),h(s(Lt),{type:m.value==="matt"?p.value:"NONE",onClick:l[14]||(l[14]=i=>et("matt"))},null,8,["type"])]),t("th",null,[ot(" \u6CD5\u9632 "),h(s(Lt),{type:m.value==="mdef"?p.value:"NONE",onClick:l[15]||(l[15]=i=>et("mdef"))},null,8,["type"])]),t("th",null,[ot(" \u4F1A\u5FC3 "),h(s(Lt),{type:m.value==="huixin"?p.value:"NONE",onClick:l[16]||(l[16]=i=>et("huixin"))},null,8,["type"])]),mn,hn,En])]),t("tbody",null,[(d(!0),_(J,null,lt(k.value,(i,Rt)=>(d(),_("tr",{key:i.id,class:"c-user-row"},[t("td",bn,[i.custom?(d(),_("span",Dn,"*")):tt("",!0),t("span",null,v(Rt+1),1)]),t("td",Bn,v(i.name),1),(d(!0),_(J,null,lt([s(ut)(i)],(xt,Nt)=>(d(),_(J,{key:Nt},[t("td",Fn,v(xt.qixue),1),t("td",Cn,v(xt.patt),1),t("td",$n,v(xt.pdef),1),t("td",wn,v(xt.matt),1),t("td",gn,v(xt.mdef),1),t("td",An,v(xt.huixin),1)],64))),128)),t("td",kn,v(i.prop),1),t("td",Sn,v(i.career),1),t("td",qn,[h(T,null,{default:U(()=>[t("button",{class:"btn btn-sm btn-primary-outline",onClick:xt=>g(i.id)}," \u7F16\u8F91 ",8,In),t("button",{class:"btn btn-sm btn-danger-outline",onClick:xt=>X(i)},"\u5220\u9664",8,Tn)]),_:2},1024)])]))),128))])])])])],16),s(I)?(d(),Tt(s(We),{key:0,record:s(I),"onUpdate:record":l[17]||(l[17]=i=>It(I)?I.value=i:null),width:"800px",height:"720px",onSave:B},null,8,["record"])):tt("",!0)],64)}}});const Vn=Bt(Un,[["__scopeId","data-v-6aef3860"]]),hi=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Ot=o=>(Ut("data-v-4a6228d0"),o=o(),Vt(),o),zn={class:"wrapper"},On={class:"toolbar"},Rn={style:{padding:"6px 16px"}},Nn={class:"c-upload"},Gn=Ot(()=>t("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),jn={style:{padding:"6px 16px"}},Mn={class:"input-group"},Hn=Ot(()=>t("div",{class:"input-ext"},"=",-1)),Ln={class:"content"},Pn={class:"container"},Kn=["value"],Wn=["onKeypress"],Jn={key:1},Yn=["onClick"],Xn=["onClick"],Qn=["onClick"],Zn=["onClick"],to=["onClick"],eo=["onClick"],uo=["onClick"],no={style:{"text-align":"center"}},oo=Ot(()=>t("span",null,"\u7B49\u7EA7",-1)),ao=Ot(()=>t("span",null,"\u53CA\u8EAB",-1)),so=Ot(()=>t("span",null,"\u661F\u8000",-1)),lo=Ot(()=>t("span",null,"\u5316\u81FB",-1)),io=Ot(()=>t("span",null,"\u661F\u9B42",-1)),ro=Ot(()=>t("span",null,"\u661F\u8F89",-1)),co=Ct({__name:"Calculator",setup(o){const{exportImage:f}=lu(),y=yt({id:"",title:"",selecteds:[],search:""}),k=M([]),I=ue(()=>k.value.filter(V=>V.title.indexOf(y.search)>-1)),P=async()=>{const c={id:fe(),title:"\u6A21\u677F",basic:iu(),state:ru(),enemyState:du(),items:cu()};await nu(c),k.value.push(c)},g=async V=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const O=k.value.findIndex(nt=>nt.id===V);O!==-1&&(await ou(k.value[O].id),k.value.splice(O,1))},B=async V=>{const c=y.title;if(!c){x();return}const O=k.value.findIndex(vt=>vt.id===V);if(O===-1)return;const nt=k.value[O];nt.title=c,x(),await Qt(nt)},x=()=>{y.id="",y.title=""},b=V=>{try{f(V)}catch{alert("\u5BFC\u51FA\u5931\u8D25\uFF0C\u6570\u636E\u5B58\u5728\u9519\u8BEF")}},S=V=>{const c={type:"calculator",data:[V]},O=new Blob([JSON.stringify(c)],{type:"application/json"});ee(O,`${V.title}.json`)},X=async V=>{k.value=V},D=V=>new Promise((c,O)=>{const nt=new FileReader;nt.onload=()=>{c(nt.result)},nt.onerror=()=>{O(nt.error)},nt.readAsText(V)}),n=async()=>{if(!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F"))return;let c=I.value;y.selecteds.length>0&&(c=y.selecteds.map(O=>I.value[O]).filter(O=>O)),await au(c.map(O=>O.id)),Nt()},a=async V=>{const c=V.currentTarget,O=Array.prototype.slice.call(c.files);if(c.value="",!O||!O[0])return;const nt=O[0],vt=await D(nt),$t=JSON.parse(vt);let Gt=[];if(De($t))Gt=$t;else if(Be($t)&&$t.type==="calculator")Gt=$t.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}await su(Gt),Nt()},m=async()=>{let V="calculator.json",c=I.value;y.selecteds.length>0&&(c=y.selecteds.map(vt=>I.value[vt]).filter(vt=>vt),V="calculator-selected.json");const O={type:"calculator",data:c},nt=new Blob([JSON.stringify(O)],{type:"application/json"});ee(nt,V)};async function p(V,c){const O=k.value.findIndex(vt=>vt.id===c);O===-1||!k.value[O]||(k.value[O]=V,await Qt(V))}const et=M(-1),it=yt({input:"2283/1.35*1.39",result:0}),{translate:_t,level:R,xingyao:ut,huazhen:at,xinghun:ft,xinghui:dt}=$e(),ct=V=>Math.ceil(V),E=yt({show:!1}),l=V=>{const c=_t(V);C.value&&C.value(V,c)},C=M(),T=M(!1),L=M(),i=V=>{T.value=!0,L.value=V},Rt=({item:V})=>{if(T.value=!1,L.value){const c=L.value,O=_t(V);c.title==="\u6A21\u677F"&&(c.title=V.name),c.basic.w=Math.max(O.patt,O.matt),Qt(c)}else l(V)},xt=V=>{const c=Mt.cloneDeep(V);c.id=fe(),console.log(c),k.value.push(c),Qt(c)};async function Nt(){const V=await Ye();y.selecteds=[],X(V)}return Ee(()=>{Nt()}),(V,c)=>{const O=bt("c-col"),nt=bt("c-row"),vt=Xe,$t=bt("c-space"),Gt=be("autofocus");return d(),_("div",zn,[t("div",On,[t("div",Rn,[h(nt,{flex:"",middle:"",gutter:16},{default:U(()=>[h(O,{flex:"0 0 auto"},{default:U(()=>[ot("\u4F24\u5BB3\u8BA1\u7B97\u5668")]),_:1}),h(O,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn btn-sm btn-link",onClick:c[0]||(c[0]=q=>E.show=!E.show)},"\u9762\u677F"),y.selecteds.length>0?(d(),_("button",{key:0,class:"btn btn-success",onClick:c[1]||(c[1]=q=>y.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):tt("",!0)]),_:1}),h(O,{flex:"1 1 0"},{default:U(()=>[j(t("input",{type:"text",class:"input",placeholder:"\u540D\u79F0\u8FC7\u6EE4","onUpdate:modelValue":c[2]||(c[2]=q=>y.search=q)},null,512),[[Et,y.search]])]),_:1}),h(O,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn btn-danger",onClick:n},v(y.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),t("div",Nn,[Gn,t("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:a},null,32)]),t("button",{class:"btn btn-success",onClick:m},v(y.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),t("button",{class:"btn btn-primary",onClick:c[3]||(c[3]=q=>P())},"\u6DFB\u52A0")]),_:1})]),_:1}),h(s(Qe),{show:E.show,"onUpdate:show":c[4]||(c[4]=q=>E.show=q),onReference:c[5]||(c[5]=q=>i()),onInit:c[6]||(c[6]=q=>C.value=q)},null,8,["show"])]),t("div",jn,[t("div",Mn,[h(vt,{modelValue:it.input,"onUpdate:modelValue":c[7]||(c[7]=q=>it.input=q),result:it.result,"onUpdate:result":c[8]||(c[8]=q=>it.result=q),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),Hn,h(s(Yt),{readonly:"",value:ct(it.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),t("div",Ln,[t("div",Pn,[(d(!0),_(J,null,lt(I.value,(q,Ht)=>(d(),Tt(s(Fe),{key:q.id,activeKey:Ht===et.value,onToggle:rt=>et.value=rt?Ht:-1},{header:U(()=>[h(nt,{flex:"",middle:""},{default:U(()=>[h(O,null,{default:U(()=>[j(t("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":c[9]||(c[9]=rt=>y.selecteds=rt),value:Ht,onClick:c[10]||(c[10]=Kt(()=>{},["stop"]))},null,8,Kn),[[kt,y.selecteds]]),ot(" \u2007 ")]),_:2},1024),h(O,null,{default:U(()=>[y.id===q.id?j((d(),_("input",{key:0,type:"text",class:"input","onUpdate:modelValue":c[11]||(c[11]=rt=>y.title=rt),onClick:c[12]||(c[12]=Kt(()=>{},["stop"])),onKeypress:je(rt=>B(q.id),["enter"])},null,40,Wn)),[[Et,y.title],[Gt]]):(d(),_("span",Jn,v(q.title),1))]),_:2},1024),h(O,{class:"ml-4",onClick:c[13]||(c[13]=Kt(()=>{},["stop"]))},{default:U(()=>[y.id===q.id?(d(),_("button",{key:0,class:"btn btn-sm btn-link",onClick:rt=>B(q.id)},"\u786E\u8BA4",8,Yn)):(d(),_(J,{key:1},[t("button",{class:"btn btn-sm btn-link",onClick:rt=>i(q)},"\u9009\u62E9",8,Xn),t("button",{class:"btn btn-sm btn-link",onClick:rt=>{y.id=q.id,y.title=q.title}},[h(s(Ze),{class:"svg-icon"}),ot(" \u91CD\u547D\u540D ")],8,Qn),t("button",{class:"btn btn-sm btn-link",onClick:rt=>xt(q)},[h(s(tu),{class:"svg-icon"}),ot(" \u590D\u5236 ")],8,Zn)],64))]),_:2},1024)]),_:2},1024)]),actions:U(()=>[t("button",{class:"btn btn-sm btn-success-outline",onClick:rt=>b(q)},"\u5BFC\u51FA\u56FE\u50CF",8,to),t("button",{class:"btn btn-sm btn-success-outline",onClick:rt=>S(q)},"\u5BFC\u51FA",8,eo),t("button",{class:"btn btn-sm btn-danger-outline",onClick:rt=>g(q.id)},"\u5220\u9664",8,uo)]),default:U(()=>[Ht===et.value?(d(),Tt(s(eu),{key:0,data:q,"onUpdate:data":rt=>p(rt,q.id)},null,8,["data","onUpdate:data"])):tt("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),h(s(uu),{show:T.value,"onUpdate:show":c[20]||(c[20]=q=>T.value=q),onClick:Rt},{extra:U(()=>[t("div",no,[h($t,null,{default:U(()=>[t("label",null,[oo,h(s(Yt),{class:"mini-input",min:"0",max:"70",value:s(R).v,"onUpdate:value":c[14]||(c[14]=q=>s(R).v=q)},null,8,["value"])]),t("label",null,[ao,h(s(Yt),{class:"mini-input",min:"0",max:"16",value:s(R).eq,"onUpdate:value":c[15]||(c[15]=q=>s(R).eq=q)},null,8,["value"])]),t("label",null,[so,j(t("input",{type:"checkbox","onUpdate:modelValue":c[16]||(c[16]=q=>It(ut)?ut.value=q:null)},null,512),[[kt,s(ut)]])]),t("label",null,[lo,j(t("input",{type:"checkbox","onUpdate:modelValue":c[17]||(c[17]=q=>It(at)?at.value=q:null)},null,512),[[kt,s(at)]])]),t("label",null,[io,j(t("input",{type:"checkbox","onUpdate:modelValue":c[18]||(c[18]=q=>It(ft)?ft.value=q:null)},null,512),[[kt,s(ft)]])]),t("label",null,[ro,j(t("input",{type:"checkbox","onUpdate:modelValue":c[19]||(c[19]=q=>It(dt)?dt.value=q:null)},null,512),[[kt,s(dt)]])])]),_:1})])]),_:1},8,["show"])])}}});const po=Bt(co,[["__scopeId","data-v-4a6228d0"]]),Ei=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),yo={},_o={class:"table-wrap"},fo=t("table",{class:"table",style:{"min-width":"100%"}},[t("thead",{style:{position:"sticky",top:"0"}},[t("tr",null,[t("th",null,"#"),t("th",null,"ID"),t("th",null,"\u540D\u79F0"),t("th",null,"\u63CF\u8FF0"),t("th",null,"\u7C7B\u578B"),t("th",null,"\u53C2\u6570")])]),t("tbody")],-1),xo=[fo];function vo(o,f){return d(),_("div",_o,xo)}const mo=Bt(yo,[["render",vo]]),bi=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),ho={},Eo={class:"table-wrap"},bo=Me('<table class="table" style="min-width:100%;"><thead style="position:sticky;top:0;"><tr><th>#</th><th>ID</th><th>\u540D\u79F0</th><th>\u63CF\u8FF0</th><th>\u53EF\u9A71\u6563</th><th>\u53EF\u6269\u6563</th><th>\u53EF\u590D\u5236</th><th>\u53C2\u6570</th></tr></thead><tbody></tbody></table>',1),Do=[bo];function Bo(o,f){return d(),_("div",Eo,Do)}const Fo=Bt(ho,[["render",Bo]]),Di=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Co=[30,70,150,300,600,600,600,800,800,800,1e3,1e3,1e3,1200,1200,1200,2e3,2e3,2e3,0];function $o(o){const f=[];for(let y=0,k=0;y<o.length;y++)f[y]={lvl:y+1,exp:o[y],total:k},k+=o[y];return f}const te=$o(Co),wo=Ct({setup(){const o=M(1),f=M(0),y=ue(()=>{const k=te[o.value-1];return te[te.length-1].total-k.total-f.value});return{levels:te,curLvl:o,curExp:f,curReq:y}}}),go=""+new URL("../assets/selected.svg",import.meta.url).href;const ne=o=>(Ut("data-v-a71401e9"),o=o(),Vt(),o),Ao={class:"wrapper"},ko={class:"content"},So={class:"table table-bordered text-center no-select",style:{width:"100%"}},qo=ne(()=>t("thead",null,[t("tr",null,[t("th",null,"\u4F4D\u9636"),t("th",null,"\u5347\u7EA7\u5386\u7EC3"),t("th",null,"\u7D2F\u8BA1\u5386\u7EC3")])],-1)),Io=["onClick"],To={style:{position:"relative","padding-left":"24px"}},Uo={key:0,src:go,alt:"",width:"16",height:"16",style:{position:"absolute",left:"4px",top:"0",bottom:"0",margin:"auto"}},Vo={class:"row"},zo={class:"col-8"},Oo=ne(()=>t("div",{class:"label"},"\u5F53\u524D\u4F4D\u9636",-1)),Ro=["value"],No={class:"col-8"},Go=ne(()=>t("div",{class:"label"},"\u5F53\u524D\u5386\u7EC3",-1)),jo={class:"col-8"},Mo=ne(()=>t("div",{class:"label"},"\u6EE1\u9636\u8FD8\u9700",-1)),Ho=["value"];function Lo(o,f,y,k,I,P){return d(),_("div",Ao,[t("div",ko,[t("table",So,[qo,t("tbody",null,[(d(!0),_(J,null,lt(o.levels,g=>(d(),_("tr",{key:g.lvl,onClick:B=>o.curLvl=g.lvl},[t("td",null,[t("div",To,[o.curLvl===g.lvl?(d(),_("img",Uo)):tt("",!0),ot(" "+v(g.lvl),1)])]),t("td",null,v(g.exp),1),t("td",null,v(g.total),1)],8,Io))),128))])]),t("div",Vo,[t("div",zo,[Oo,t("input",{class:"input",type:"number",min:"1",max:"20",readonly:"",value:o.curLvl},null,8,Ro)]),t("div",No,[Go,j(t("input",{class:"input",type:"number","onUpdate:modelValue":f[0]||(f[0]=g=>o.curExp=g)},null,512),[[Et,o.curExp]])]),t("div",jo,[Mo,t("input",{class:"input",type:"number",readonly:"",value:o.curReq},null,8,Ho)])])])])}const Po=Bt(wo,[["render",Lo],["__scopeId","data-v-a71401e9"]]),Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Ko=o=>(Ut("data-v-ad305fc0"),o=o(),Vt(),o),Wo={class:"table text-center",style:{width:"100%"}},Jo=Ko(()=>t("thead",null,[t("tr",null,[t("th",null,"\u804C\u4E1A"),t("th",null,"\u6C14\u8840"),t("th",null,"\u7269\u653B"),t("th",null,"\u7269\u9632"),t("th",null,"\u6CD5\u653B"),t("th",null,"\u6CD5\u9632"),t("th",null,"\u4F1A\u5FC3")])],-1)),Yo=Ct({__name:"WuNei",setup(o){const f=Object.keys(jt);return(y,k)=>(d(),_("table",Wo,[Jo,t("tbody",null,[(d(!0),_(J,null,lt(s(f),I=>(d(),_("tr",{key:I},[t("td",null,v(s(pu)[I]),1),t("td",null,v(s(jt)[I].u[0]),1),t("td",null,v(s(jt)[I].c[1]),1),t("td",null,v(s(jt)[I].d[2]),1),t("td",null,v(s(jt)[I].c[3]),1),t("td",null,v(s(jt)[I].d[4]),1),t("td",null,v(s(jt)[I].u[5]),1)]))),128))])]))}});const Xo=Bt(Yo,[["__scopeId","data-v-ad305fc0"]]),Fi=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),Qo=o=>(Ut("data-v-1b51bddc"),o=o(),Vt(),o),Zo={class:"content"},ta=Qo(()=>t("table",{class:"table text-center eq-sticky",style:{width:"100%"}},[t("thead",null,[t("tr",null,[t("th",null,"\u90E8\u4F4D"),t("th",null,"\u6C14\u8840"),t("th",null,"\u7269\u653B"),t("th",null,"\u7269\u9632"),t("th",null,"\u6CD5\u653B"),t("th",null,"\u6CD5\u9632"),t("th",null,"\u4F1A\u5FC3")])])],-1)),ea={class:"table text-center",style:{width:"100%"}},ua=Ct({__name:"Equipment",setup(o){const f={xk:"\u4FA0\u5BA2",xk_f:"\u4FA0\u5BA2\u6CD5",ys:"\u7FBD\u58EB",tw:"\u94C1\u536B",tw2:"\u94C1\u536B2",zs:"\u5492\u5E08",zs2:"\u5492\u5E082",zy:"\u795D\u7531",yf:"\u5FA1\u98CE",yf2:"\u5FA1\u98CE2",dj:"\u6597\u5C06"},y=Object.keys(f),k=M("");function I(P){k.value=k.value===P?"":P}return(P,g)=>(d(),_("div",Zo,[(d(!0),_(J,null,lt(s(y),B=>(d(),Tt(s(Fe),{class:"eq-panel",key:B,activeKey:k.value===B,header:f[B],onToggle:x=>I(B)},{default:U(()=>[ta,t("table",ea,[t("tbody",null,[(d(!0),_(J,null,lt(s(yu)[B],(x,b)=>(d(),_(J,{key:b},[t("tr",{class:zt({odd:b%2===1})},[t("td",null,"\u5934\u90E8+"+v(b),1),t("td",null,v(x[0][0]),1),t("td",null,v(x[0][1]),1),t("td",null,v(x[0][2]),1),t("td",null,v(x[0][3]),1),t("td",null,v(x[0][4]),1),t("td",null,v(x[0][5]),1)],2),t("tr",{class:zt({odd:b%2===1})},[t("td",null,"\u8EAB\u4F53+"+v(b),1),t("td",null,v(x[1][0]),1),t("td",null,v(x[1][1]),1),t("td",null,v(x[1][2]),1),t("td",null,v(x[1][3]),1),t("td",null,v(x[1][4]),1),t("td",null,v(x[1][5]),1)],2),t("tr",{class:zt({odd:b%2===1})},[t("td",null,"\u8170\u90E8+"+v(b),1),t("td",null,v(x[2][0]),1),t("td",null,v(x[2][1]),1),t("td",null,v(x[2][2]),1),t("td",null,v(x[2][3]),1),t("td",null,v(x[2][4]),1),t("td",null,v(x[2][5]),1)],2),t("tr",{class:zt({odd:b%2===1})},[t("td",null,"\u624B\u90E8+"+v(b),1),t("td",null,v(x[3][0]),1),t("td",null,v(x[3][1]),1),t("td",null,v(x[3][2]),1),t("td",null,v(x[3][3]),1),t("td",null,v(x[3][4]),1),t("td",null,v(x[3][5]),1)],2)],64))),128))])])]),_:2},1032,["activeKey","header","onToggle"]))),128))]))}});const na=Bt(ua,[["__scopeId","data-v-1b51bddc"]]),Ci=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),we={a1:"\u653B\u51FB",a2:"\u4F24\u5BB3",a3:"\u7A7F\u900F",a4:"\u53CD\u51FB",a5:"\u66B4\u51FB",d1:"\u6C14\u8840",d2:"\u7269\u514D",d3:"\u6CD5\u514D",d4:"\u7269\u9632",d5:"\u6CD5\u9632",d6:"\u66B4\u6297"},ge={T:{a1:[4,10],a2:[4,10],a3:[4,10],a4:[4,10],a5:[4,10],d1:[2,5],d2:[2,5],d3:[2,5],d4:[2,5],d5:[2,5],d6:[2,5]},D:{a1:[2,5],a2:[2,5],a3:[2,5],a4:[2,5],a5:[2,5],d1:[4,10],d2:[4,10],d3:[4,10],d4:[4,10],d5:[4,10],d6:[4,10]},H:{a1:[3,7],a2:[3,7],a3:[3,7],a4:[3,7],a5:[3,7],d1:[3,7],d2:[3,7],d3:[3,7],d4:[3,7],d5:[3,7],d6:[3,7]}},Ae=[{name:"a1"},{name:"a2"},{name:"a3"},{name:"a4"},{name:"a5"},{name:"d1"},{name:"d2"},{name:"d3"},{name:"d4"},{name:"d5"},{name:"d6"}],oa=Ct({components:{StoneList:_u},setup(){const o=M(!1),f=yt({a1:11,a2:10,a3:6,a4:3,a5:1,d1:7,d2:5,d3:5,d4:1,d5:1,d6:0}),y=yt({a1:0,a2:0,a3:0,a4:0,a5:1,d1:12,d2:9,d3:9,d4:2,d5:2,d6:0}),k=yt({a1:12,a2:1,a3:0,a4:0,a5:0,d1:9,d2:8,d3:8,d4:1,d5:1,d6:0}),I=[{name:"p1",text:"\u6781\u54C1"},{name:"p2",text:"\u4F18\u79C0"},{name:"p3",text:"\u826F\u597D"},{name:"p4",text:"\u4E00\u822C"}],P=["one","two","three","four"],g=yt({one:"a1",two:"a2",three:"a3",four:"a4"}),B=yt({one:1,two:1,three:1,four:1}),x=M("A"),b=M("T"),S=a=>{let m=0;return a[g.one]&&(m+=a[g.one]*B.one),a[g.two]&&(m+=a[g.two]*B.two),a[g.three]&&(m+=a[g.three]*B.three),a[g.four]&&(m+=a[g.four]*B.four),m};function X(){let a=0;switch(x.value){case"A":a+=S(f);break;case"D":a+=S(y);break;case"N":a+=S(k);break}return a}const D=M(0);return{t:we,setting:o,stateA:f,stateD:y,stateN:k,rules:ge,models:Ae,models2:I,names:P,formState:g,formStateValue:B,jobType:x,stoneType:b,score:D,onUpdate:a=>{a.currentTarget.reportValidity()&&(D.value=X())}}}});const St=o=>(Ut("data-v-f3fb6e8a"),o=o(),Vt(),o),aa={class:"wrapper"},sa={class:"toobar"},la={class:"table table-horizontal table-nopadding",style:{width:"280px"}},ia=St(()=>t("thead",null,[t("tr",null,[t("th",{width:"25%"},[t("div",{class:"label"},"\u8BCD\u6761")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u8F93\u51FA")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u5766\u514B")]),t("th",{width:"25%"},[t("div",{class:"label"},"\u6CBB\u7597")])])],-1)),ra={class:"label"},da=["onUpdate:modelValue"],ca=["onUpdate:modelValue"],pa=["onUpdate:modelValue"],ya={class:"affix"},_a={class:"form-item-inline"},fa=St(()=>t("div",{class:"label-control"},"\u804C\u4E1A\u7C7B\u578B",-1)),xa=St(()=>t("option",{value:"A"},"\u8F93\u51FA",-1)),va=St(()=>t("option",{value:"D"},"\u5766\u514B",-1)),ma=St(()=>t("option",{value:"N"},"\u6CBB\u7597",-1)),ha=[xa,va,ma],Ea={class:"form-item-inline"},ba=St(()=>t("div",{class:"label-control"},"\u9B42\u77F3\u7C7B\u578B",-1)),Da=St(()=>t("option",{value:"T"},"\u5929",-1)),Ba=St(()=>t("option",{value:"D"},"\u5730",-1)),Fa=St(()=>t("option",{value:"H"},"\u8352",-1)),Ca=[Da,Ba,Fa],$a={class:"label-control"},wa=["onUpdate:modelValue"],ga=["value"],Aa={class:"score-box"},ka=St(()=>t("span",{class:"text-bold"},"\u9B42\u77F3\u5F97\u5206\uFF1A",-1)),Sa={style:{color:"#ff4446","font-size":"125%"}},qa={class:"content"};function Ia(o,f,y,k,I,P){const g=bt("c-col"),B=bt("c-row"),x=bt("c-input-number"),b=fu;return d(),_("div",aa,[t("div",sa,[h(B,{flex:"",middle:"",style:{padding:"5px 15px"}},{default:U(()=>[h(g,{flex:"1 0 auto"}),h(g,{flex:"0 0 auto"},{default:U(()=>[t("button",{class:"btn",onClick:f[0]||(f[0]=S=>o.setting=!o.setting)},"\u8BBE\u7F6E")]),_:1})]),_:1}),t("div",{class:zt(["setting",{block:o.setting}])},[h(B,null,{default:U(()=>[h(g,{span:"24"},{default:U(()=>[t("table",la,[ia,t("tbody",null,[(d(!0),_(J,null,lt(o.models,S=>(d(),_("tr",{key:S.name},[t("td",null,[t("div",ra,v(o.t[S.name]),1)]),t("td",null,[j(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":X=>o.stateA[S.name]=X},null,8,da),[[Et,o.stateA[S.name]]])]),t("td",null,[j(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":X=>o.stateD[S.name]=X},null,8,ca),[[Et,o.stateD[S.name]]])]),t("td",null,[j(t("input",{type:"number",class:"input",min:"0","onUpdate:modelValue":X=>o.stateN[S.name]=X},null,8,pa),[[Et,o.stateN[S.name]]])])]))),128))])])]),_:1})]),_:1})],2)]),t("div",ya,[t("form",{onChange:f[3]||(f[3]=(...S)=>o.onUpdate&&o.onUpdate(...S))},[h(B,null,{default:U(()=>[h(g,{span:"18"},{default:U(()=>[t("div",_a,[fa,j(t("select",{class:"select","onUpdate:modelValue":f[1]||(f[1]=S=>o.jobType=S)},ha,512),[[Dt,o.jobType]])]),t("div",Ea,[ba,j(t("select",{class:"select","onUpdate:modelValue":f[2]||(f[2]=S=>o.stoneType=S)},Ca,512),[[Dt,o.stoneType]])])]),_:1}),h(g,{span:"18"},{default:U(()=>[(d(!0),_(J,null,lt(o.names,(S,X)=>(d(),_("div",{class:"form-item",key:S},[t("div",$a,"\u8BCD\u6761"+v("1234"[X]),1),j(t("select",{class:"select","onUpdate:modelValue":D=>o.formState[S]=D},[(d(!0),_(J,null,lt(o.models,D=>(d(),_("option",{value:D.name,key:D.name},v(o.t[D.name]),9,ga))),128))],8,wa),[[Dt,o.formState[S]]]),h(x,{class:"auto-width",value:o.formStateValue[S],"onUpdate:value":D=>o.formStateValue[S]=D,min:o.rules[o.stoneType][o.formState[S]][0],max:o.rules[o.stoneType][o.formState[S]][1]},null,8,["value","onUpdate:value","min","max"])]))),128))]),_:1})]),_:1})],32),t("div",Aa,[ka,t("span",Sa,v(o.score),1)])]),t("div",qa,[h(b)])])}const Ta=Bt(oa,[["render",Ia],["__scopeId","data-v-f3fb6e8a"]]),$i=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"})),Ua=Ct({components:{CDivider:xu},setup(){const o={T:"\u5929",D:"\u5730",H:"\u8352"},f=M("T"),y=M([]);function k(){y.value=[]}function I(g,B){return g+Math.floor(Math.random()*(B-g+1))}function P(g){const B=[];for(let x=0;x<g;x++){const b=[],S=[...Ae];for(let X=0,D=S.length-1;X<4;X++){const n=I(0,D),a=S[n],m=ge[f.value][a.name],p=I(m[0],m[1]);b.push({type:o[f.value],name:a.name,value:p,rate:p/m[1]}),S[n]=S[D],D--}B.push(b)}B.length>0&&(y.value=B)}return{t:we,randomType:f,randomList:y,cleanRandom:k,tryRandom:P}}});const Xt=o=>(Ut("data-v-95209f08"),o=o(),Vt(),o),Va={class:"page-container"},za=Xt(()=>t("span",null,"\u6A21\u62DF\u9B42\u77F3",-1)),Oa=Xt(()=>t("option",{value:"T"},"\u5929",-1)),Ra=Xt(()=>t("option",{value:"D"},"\u5730",-1)),Na=Xt(()=>t("option",{value:"H"},"\u8352",-1)),Ga=[Oa,Ra,Na],ja={class:"random-stone-items"},Ma=Xt(()=>t("div",null,null,-1));function Ha(o,f,y,k,I,P){const g=bt("CDivider");return d(),_("div",Va,[h(g,{orientation:"left",style:{position:"sticky",top:"40px","background-color":"#fff"}},{action:U(()=>[j(t("select",{class:"select","onUpdate:modelValue":f[0]||(f[0]=B=>o.randomType=B),style:{"margin-right":"8px"}},Ga,512),[[Dt,o.randomType]]),t("button",{class:"btn",onClick:f[1]||(f[1]=B=>o.tryRandom(1))},"\u6765\u4E00\u679A"),t("button",{class:"btn",onClick:f[2]||(f[2]=B=>o.tryRandom(10))},"\u6765\u5341\u679A"),t("button",{class:"btn",onClick:f[3]||(f[3]=B=>o.tryRandom(100))},"\u6765\u767E\u679A"),t("button",{class:"btn",onClick:f[4]||(f[4]=B=>o.cleanRandom())},"\u6E05\u7A7A")]),default:U(()=>[za]),_:1}),t("div",ja,[(d(!0),_(J,null,lt(o.randomList,(B,x)=>(d(),_("div",{class:"random-stone-item",key:x},[t("div",null,v(B[0].type),1),Ma,(d(!0),_(J,null,lt(B,b=>(d(),_(J,{key:b},[t("div",{class:zt({"random-stone-lv0":b.rate<.6,"random-stone-lv1":b.rate>=.6&&b.rate<.8,"random-stone-lv2":b.rate>=.8&&b.rate<.9,"random-stone-lv3":b.rate>=.9})},v(o.t[b.name]),3),t("div",{class:zt({"random-stone-lv0":b.rate<.6,"random-stone-lv1":b.rate>=.6&&b.rate<.8,"random-stone-lv2":b.rate>=.8&&b.rate<.9,"random-stone-lv3":b.rate>=.9})},v(b.value)+"% ",3)],64))),128))]))),128))])])}const La=Bt(Ua,[["render",Ha],["__scopeId","data-v-95209f08"]]),wi=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Pa=o=>(Ut("data-v-8c2745cd"),o=o(),Vt(),o),Ka={class:"wrapper"},Wa={class:"toolbar"},Ja=Pa(()=>t("span",{class:"title"},"\u661F\u4E4B\u6676\u5217\u8868",-1)),Ya={class:"content"},Xa={class:"star-pos"},Qa=["onClick","onContextmenu"],Za={key:0},ts={key:1},es={key:2},us={key:3},ns={key:4},os={key:5},as={key:0},ss={key:1},ls={key:2},is={key:3},rs={key:4},ds={key:5},cs=Ct({__name:"StarCrystals",setup(o){const f=M(!1),y=M(),k=M([{name:"\u6676\u7CB9\xB7\u9633",position:Pt.ATT},{name:"\u6676\u7CB9\xB7\u9633",position:Pt.ATT},{name:"\u6676\u7CB9\xB7\u9716",position:Pt.XUE},{name:"\u6676\u7CB9\xB7\u9716",position:Pt.XUE},{name:"\u6676\u7CB9\xB7\u8679",position:Pt.DEF},{name:"\u6676\u7CB9\xB7\u8679",position:Pt.DEF}]),I=x=>{y.value=x,f.value=!0},P=x=>{x.value=void 0,f.value=!0},g=x=>{!y.value||(y.value.value=x)},B=ue(()=>{const x=[0,0,0,0,0,0];return k.value.forEach(b=>{!b.value||(x[0]+=b.value.qixue,x[1]+=b.value.patt,x[2]+=b.value.pdef,x[3]+=b.value.matt,x[4]+=b.value.mdef,x[5]+=b.value.huixin)}),x});return(x,b)=>{const S=bt("c-col"),X=bt("c-row");return d(),_("div",Ka,[t("div",Wa,[h(X,{flex:"",middle:""},{default:U(()=>[h(S,{flex:"1 1 0"},{default:U(()=>[Ja]),_:1})]),_:1})]),t("div",Ya,[t("div",Xa,[(d(!0),_(J,null,lt(k.value,(D,n)=>(d(),_("div",{key:n,class:zt(["star-pos-item",{active:D===y.value}]),onClick:a=>I(D),onContextmenu:Kt(a=>P(D),["prevent"])},[t("div",null,v(D.name),1),D.value?(d(),_(J,{key:0},[D.value.patt?(d(),_("div",Za,"\u7269\u653B +"+v(D.value.patt),1)):tt("",!0),D.value.matt?(d(),_("div",ts,"\u6CD5\u653B +"+v(D.value.matt),1)):tt("",!0),D.value.huixin?(d(),_("div",es,"\u4F1A\u5FC3 +"+v(D.value.huixin),1)):tt("",!0),D.value.qixue?(d(),_("div",us,"\u6C14\u8840 +"+v(D.value.qixue),1)):tt("",!0),D.value.pdef?(d(),_("div",ns,"\u7269\u9632 +"+v(D.value.pdef),1)):tt("",!0),D.value.mdef?(d(),_("div",os,"\u6CD5\u9632 +"+v(D.value.mdef),1)):tt("",!0)],64)):tt("",!0)],42,Qa))),128))]),(d(!0),_(J,null,lt([B.value],(D,n)=>(d(),_("div",{class:"sum-result props",key:n},[D[0]?(d(),_("span",as,"\u6C14\u8840 +"+v(D[0]),1)):tt("",!0),D[1]?(d(),_("span",ss,"\u7269\u653B +"+v(D[1]),1)):tt("",!0),D[2]?(d(),_("span",ls,"\u7269\u9632 +"+v(D[2]),1)):tt("",!0),D[3]?(d(),_("span",is,"\u6CD5\u653B +"+v(D[3]),1)):tt("",!0),D[4]?(d(),_("span",rs,"\u6CD5\u9632 +"+v(D[4]),1)):tt("",!0),D[5]?(d(),_("span",ds,"\u4F1A\u5FC3 +"+v(D[5]),1)):tt("",!0)]))),128)),y.value?(d(),Tt(s(vu),{key:0,show:f.value,"onUpdate:show":b[0]||(b[0]=D=>f.value=D),position:y.value.position,onSelect:g},null,8,["show","position"])):tt("",!0)])])}}});const ps=Bt(cs,[["__scopeId","data-v-8c2745cd"]]),gi=Object.freeze(Object.defineProperty({__proto__:null,default:ps},Symbol.toStringTag,{value:"Module"})),ys=[{name:"\u7A7A\u767D\u573A\u666F",width:15,height:15,data:[]},{name:"\u5316\u8352\u5E7B\u5883",width:17,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:14,y:0,type:1},{x:15,y:0,type:1},{x:16,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:15,y:1,type:1},{x:16,y:1,type:1},{x:0,y:2,type:1},{x:7,y:2,type:6},{x:8,y:2,type:6},{x:9,y:2,type:6},{x:16,y:2,type:1},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:5,y:4,type:6},{x:6,y:4,type:6},{x:10,y:4,type:6},{x:11,y:4,type:6},{x:5,y:6,type:6},{x:6,y:6,type:6},{x:10,y:6,type:6},{x:11,y:6,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:9,y:7,type:6},{x:10,y:7,type:6},{x:0,y:8,type:1},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:16,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:15,y:9,type:1},{x:16,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:14,y:10,type:1},{x:15,y:10,type:1},{x:16,y:10,type:1}]},{name:"\u96EA\u5CAD\u5E7B\u5883",width:15,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:3,y:1,type:6},{x:4,y:1,type:6},{x:5,y:1,type:6},{x:6,y:1,type:6},{x:7,y:1,type:6},{x:8,y:1,type:6},{x:9,y:1,type:6},{x:10,y:1,type:6},{x:11,y:1,type:6},{x:12,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:2,type:1},{x:1,y:2,type:1},{x:2,y:2,type:1},{x:3,y:2,type:6},{x:11,y:2,type:6},{x:12,y:2,type:1},{x:13,y:2,type:1},{x:14,y:2,type:1},{x:6,y:4,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:3,y:5,type:6},{x:11,y:5,type:6},{x:6,y:6,type:6},{x:7,y:6,type:6},{x:8,y:6,type:6},{x:0,y:8,type:1},{x:1,y:8,type:1},{x:2,y:8,type:1},{x:3,y:8,type:6},{x:11,y:8,type:6},{x:12,y:8,type:1},{x:13,y:8,type:1},{x:14,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:2,y:9,type:1},{x:3,y:9,type:6},{x:4,y:9,type:6},{x:5,y:9,type:6},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:11,y:9,type:6},{x:12,y:9,type:1},{x:13,y:9,type:1},{x:14,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:5,y:10,type:6},{x:6,y:10,type:6},{x:7,y:10,type:6},{x:8,y:10,type:6},{x:9,y:10,type:6},{x:12,y:10,type:1},{x:13,y:10,type:1},{x:14,y:10,type:1}]},{name:"\u5730\u754C\u5E7B\u5883",width:17,height:13,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:10,y:0,type:6},{x:11,y:0,type:6},{x:14,y:0,type:1},{x:15,y:0,type:1},{x:16,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:6,y:1,type:6},{x:10,y:1,type:6},{x:14,y:1,type:1},{x:15,y:1,type:1},{x:16,y:1,type:1},{x:0,y:2,type:1},{x:1,y:2,type:1},{x:6,y:2,type:6},{x:10,y:2,type:6},{x:15,y:2,type:1},{x:16,y:2,type:1},{x:0,y:3,type:1},{x:1,y:3,type:1},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:15,y:3,type:1},{x:16,y:3,type:1},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:9,y:4,type:6},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:15,y:9,type:1},{x:16,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:6,y:10,type:6},{x:10,y:10,type:6},{x:15,y:10,type:1},{x:16,y:10,type:1},{x:0,y:11,type:1},{x:1,y:11,type:1},{x:2,y:11,type:1},{x:6,y:11,type:6},{x:10,y:11,type:6},{x:14,y:11,type:1},{x:15,y:11,type:1},{x:16,y:11,type:1},{x:0,y:12,type:1},{x:1,y:12,type:1},{x:2,y:12,type:1},{x:5,y:12,type:6},{x:6,y:12,type:6},{x:7,y:12,type:6},{x:8,y:12,type:6},{x:9,y:12,type:6},{x:10,y:12,type:6},{x:11,y:12,type:6},{x:14,y:12,type:1},{x:15,y:12,type:1},{x:16,y:12,type:1}]},{name:"\u7ED3\u754C\u5E7B\u5883",width:11,height:11,data:[{x:5,y:8,type:1},{x:2,y:5,type:1},{x:5,y:5,type:1},{x:8,y:5,type:1},{x:5,y:2,type:1}]},{name:"\u57CE\u9685\u5E7B\u5883",width:15,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:5,y:0,type:1},{x:6,y:0,type:1},{x:7,y:0,type:1},{x:8,y:0,type:1},{x:9,y:0,type:1},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:6,y:1,type:1},{x:8,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:2,type:1},{x:14,y:2,type:1},{x:4,y:4,type:5},{x:5,y:5,type:5},{x:9,y:5,type:5},{x:10,y:6,type:5},{x:0,y:8,type:1},{x:14,y:8,type:1},{x:0,y:9,type:1},{x:1,y:9,type:1},{x:6,y:9,type:1},{x:8,y:9,type:1},{x:13,y:9,type:1},{x:14,y:9,type:1},{x:0,y:10,type:1},{x:1,y:10,type:1},{x:2,y:10,type:1},{x:5,y:10,type:1},{x:6,y:10,type:1},{x:7,y:10,type:1},{x:8,y:10,type:1},{x:9,y:10,type:1},{x:12,y:10,type:1},{x:13,y:10,type:1},{x:14,y:10,type:1}]},{name:"\u5E7D\u7A74\u5E7B\u5883",width:11,height:11,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:0,y:1,type:1},{x:0,y:2,type:1},{x:3,y:2,type:6},{x:4,y:2,type:6},{x:2,y:3,type:6},{x:3,y:3,type:6},{x:4,y:3,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:6,y:8,type:6},{x:7,y:8,type:6},{x:10,y:8,type:1},{x:10,y:9,type:1},{x:9,y:10,type:1},{x:10,y:10,type:1}]},{name:"\u5996\u5C71\u5E7B\u5883",width:17,height:11,data:[]},{name:"\u8D64\u7802\u5E7B\u5883",width:15,height:7,data:[{x:0,y:0,type:1},{x:1,y:0,type:1},{x:2,y:0,type:1},{x:6,y:0,type:1},{x:7,y:0,type:1},{x:8,y:0,type:1},{x:12,y:0,type:1},{x:13,y:0,type:1},{x:14,y:0,type:1},{x:0,y:1,type:1},{x:1,y:1,type:1},{x:2,y:1,type:1},{x:12,y:1,type:1},{x:13,y:1,type:1},{x:14,y:1,type:1},{x:0,y:5,type:1},{x:1,y:5,type:1},{x:2,y:5,type:1},{x:12,y:5,type:1},{x:13,y:5,type:1},{x:14,y:5,type:1},{x:0,y:6,type:1},{x:1,y:6,type:1},{x:2,y:6,type:1},{x:6,y:6,type:1},{x:7,y:6,type:1},{x:8,y:6,type:1},{x:12,y:6,type:1},{x:13,y:6,type:1},{x:14,y:6,type:1}]}],N=o=>(Ut("data-v-e2aa6b1b"),o=o(),Vt(),o),_s={class:"wrapper"},fs={class:"toolbar"},xs={class:"setting"},vs={class:"label-control"},ms=N(()=>t("span",null,"\u7F16\u8F91\u6A21\u5F0F",-1)),hs={class:"label-control"},Es=N(()=>t("span",null,"\u8303\u56F4",-1)),bs={class:"label-control"},Ds=N(()=>t("span",null,"\u5F62\u72B6",-1)),Bs=N(()=>t("option",{value:1},"\u83F1\u5F62",-1)),Fs=N(()=>t("option",{value:2},"\u5708\u6570",-1)),Cs=[Bs,Fs],$s={class:"label-control"},ws=N(()=>t("span",null,"\u6392\u5E8F",-1)),gs=N(()=>t("option",{value:1},"\u8DDD\u79BBX",-1)),As=N(()=>t("option",{value:2},"\u8DDD\u79BBY",-1)),ks=N(()=>t("option",{value:3},"X\u4F18\u5148",-1)),Ss=N(()=>t("option",{value:4},"Y\u4F18\u5148",-1)),qs=[gs,As,ks,Ss],Is=N(()=>t("button",{class:"btn"},"\u9884\u8BBE\u573A\u666F",-1)),Ts={class:"list"},Us=["onClick"],Vs=N(()=>t("div",{style:{flex:"1 1 0"}},null,-1)),zs=N(()=>t("article",null,[t("h2",null,"\u8BF4\u660E"),t("p",null,"\u70B9\u51FB\u9884\u8BBE\u573A\u666F\uFF0C\u53EF\u4EE5\u8F7D\u5165\u4E00\u4E9B\u9884\u8BBE\u7684\u573A\u666F\u3002"),t("p",null,"\u53F3\u4FA7\u5355\u4F4D\u53EF\u901A\u8FC7\u62D6\u66F3\u62C9\u5165\u7F51\u683C\u3002"),t("p",null,[ot(" \u9009\u4E2D\u7F51\u683C\u4E2D\u7684\u5355\u4F4D\u53EF\u4EE5\u4F7F\u7528\u201C\u602A\u529B\u4E71\u795E\u201D\u3001\u201C\u5F00\u8F66\u201D\u529F\u80FD\u3002"),t("br"),ot(" \u201C\u602A\u529B\u4E71\u795E\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u975E\u540C\u961F\u5355\u4F4D\u3002"),t("br"),ot(" \u201C\u5F00\u8F66\u201D\u529F\u80FD\u53EA\u4F1A\u4F5C\u7528\u4E8E\u540C\u961F\u5355\u4F4D\u3002"),t("br"),ot(" \u4F7F\u7528\u529F\u80FD\u524D\uFF0C\u4F60\u53EF\u4EE5\u4FDD\u5B58\u5F53\u524D\u5E03\u5C40\uFF0C\u65B9\u4FBF\u9884\u89C8\u7ED3\u679C\u540E\u5FEB\u901F\u8FD8\u539F\u5E03\u5C40\u3002 ")])],-1)),Os={class:"color-container"},Rs={class:"label-control"},Ns=N(()=>t("span",null,"\u9884\u89C8",-1)),Gs={class:"label-control"},js=N(()=>t("span",null,"\u6587\u5B57",-1)),Ms={class:"label-control"},Hs=N(()=>t("span",null,"\u80CC\u666F",-1)),Ls=N(()=>t("label",{class:"label-control"},[t("span",null,"\u9884\u8BBE")],-1)),Ps={class:"color-tpls"},Ks={width:"32",height:"32",viewBox:"0 0 24 24",fill:"#a9a9a9",style:{"pointer-events":"none"}},Ws=N(()=>t("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},null,-1)),Js=[Ws],Ys={class:"props-container"},Xs={key:0,class:"props-content"},Qs={class:"label-control"},Zs=N(()=>t("span",null,"\u9884\u89C8",-1)),tl={class:"label-control"},el=N(()=>t("span",null,"\u6587\u5B57",-1)),ul={class:"label-control"},nl=N(()=>t("span",null,"\u80CC\u666F",-1)),ol={class:"label-control"},al=N(()=>t("span",null,"\u5927\u5C0F",-1)),sl={class:"label-control"},ll=N(()=>t("span",null,"\u5185\u5BB9",-1)),il={class:"label-control"},rl=N(()=>t("span",null,"\u5730\u5F62",-1)),dl=["value"],cl=["value"],pl=["value"],yl=["value"],_l={class:"label-control"},fl=N(()=>t("span",null,"Id",-1)),xl={class:"label-control"},vl=N(()=>t("span",null,"\u7C7B\u578B",-1)),ml=["value"],hl=["value"],El=["value"],bl=["value"],Dl={class:"label-control"},Bl=N(()=>t("span",null,"\u98DE\u884C",-1)),Fl={class:"controls"},Cl={key:0,class:"label-control"},$l=N(()=>t("span",null,"\u5355\u4F4DID",-1)),wl=["value"],gl={key:1,class:"label-control"},Al=N(()=>t("span",null,"\u961F\u4F0D",-1)),kl=N(()=>t("option",{value:void 0},"\u961F\u4F0D\u7A7A",-1)),Sl=N(()=>t("option",{value:0},"\u961F\u4F0D0",-1)),ql=N(()=>t("option",{value:1},"\u961F\u4F0D1",-1)),Il=N(()=>t("option",{value:2},"\u961F\u4F0D2",-1)),Tl=[kl,Sl,ql,Il],Ul={class:"content"},Vl={class:"grids"},zl={class:"panel-right"},Ol={class:"controls"},Rl={class:"label-control"},Nl=N(()=>t("span",null,"\u961F\u4F0D",-1)),Gl=N(()=>t("option",{value:0},"\u961F\u4F0D0",-1)),jl=N(()=>t("option",{value:1},"\u961F\u4F0D1",-1)),Ml=N(()=>t("option",{value:2},"\u961F\u4F0D2",-1)),Hl=[Gl,jl,Ml],Ll={class:"heroes-scroll"},Pl={class:"heroes"},Kl=Ct({__name:"Grids",setup(o){const{rows:f,cols:y,actorId:k,grids:I,selects:P,gridColors:g,defGridUnit:B,defGridState:x,defGrid:b,cleanGrid:S,cleanGrids:X,setSize:D,getGrid:n,gridForEach:a}=mu(),m=M(),p=yt({editor:1,selectRange:5,shape:1,sortType:1,color:g[0].color,bgcolor:g[0].bgcolor,terrain:void 0}),et=b();et.terrain={image:xe,type:Z.DISABLED};const it=b();it.terrain={image:ve,type:Z.CLIFF};const _t=b();_t.terrain={image:me,type:Z.BLOCKED};function R(u){p.color=u.color,p.bgcolor=u.bgcolor,p.terrain=void 0}function ut(u){p.color="",p.bgcolor="",p.terrain=u.terrain}const{heroes:at}=hu(),ft=ye(b(B())),dt=ye(at.value.map(u=>{const e=b(),r=B();return r.unitId=u.id,r.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${u.hero_icon}.png`,r.name=u.name,e.unit=r,e}));He(at,()=>{dt.value=at.value.map(u=>{const e=b(),r=B();return r.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${u.hero_icon}.png`,e.unit=r,e})});function ct(u,e,r,H){const z=[];return a(K=>{K.state=x()}),a(K=>{const A=Math.abs(u-K.x),G=Math.abs(e-K.y),F=A+G,Ft=Math.max(A,G),$=A>1?A-1:A+G>1?G-1:G;switch(H){case 1:F<=r&&(K.state.d=F,K.state.q=Ft,K.state.d1=$,z.push(K));break;case 2:Math.abs(A)<=r&&Math.abs(G)<=r&&(K.state.d=F,K.state.q=Ft,K.state.d1=$,z.push(K));break}}),z}function E(u,e,r,H,z,K,A){const G=ct(u,e,r,H);switch(G.forEach(F=>{F.data.color=K,F.data.bgcolor=A}),P.value=G,z){case 1:P.value.sort(l);break;case 2:P.value.sort(C);break;case 3:P.value.sort(T);break;case 4:P.value.sort(L);break}for(let F=0;F<P.value.length;F++){const Ft=P.value[F];Ft.data.txt=String(F+1)}}function l(u,e){return u.state.q!==e.state.q?u.state.q-e.state.q:u.state.d!==e.state.d?u.state.d-e.state.d:u.x!==e.x?u.x-e.x:u.y!==e.y?u.y-e.y:0}function C(u,e){return u.state.q!==e.state.q?u.state.q-e.state.q:u.state.d!==e.state.d?u.state.d-e.state.d:u.y!==e.y?u.y-e.y:u.x!==e.x?u.x-e.x:0}function T(u,e){return u.x!==e.x?u.x-e.x:u.y!==e.y?u.y-e.y:0}function L(u,e){return u.y!==e.y?u.y-e.y:u.x!==e.x?u.x-e.x:0}const i=yt({enabled:!1});function Rt(){X()}function xt(){i.enabled=!1}function Nt(u,e){var r;switch(p.editor){case 1:case 4:i.current=e,(r=m.value)==null||r.focus();break;case 3:X(),E(e.x,e.y,p.selectRange,p.shape,p.sortType,p.color,p.bgcolor);break}}function V(u,e){if(u.button===0)switch(p.editor){case 2:{i.enabled=!0,e.data.color=p.color,e.data.bgcolor=p.bgcolor,p.terrain?(e.terrain.type=p.terrain.type,e.terrain.image=p.terrain.image):(e.terrain.type=Z.NONE,e.terrain.image="");break}}}function c(u,e){u.button===0&&i.enabled&&(e.data.color=p.color,e.data.bgcolor=p.bgcolor,p.terrain?(e.terrain.type=p.terrain.type,e.terrain.image=p.terrain.image):(e.terrain.type=Z.NONE,e.terrain.image=""))}function O(){i.current=void 0}const nt=M({width:15,height:15});function vt(){try{const u=localStorage.getItem("grids");if(!u)return;const e=JSON.parse(u);nt.value=e}catch{}}function $t(){if(!confirm("\u786E\u5B9A\u8981\u4FDD\u5B58\u5417\uFF1F"))return;let e=I.value.flat().filter(r=>r.terrain.type!==Z.NONE||r.unit&&r.unit.actorId>0);e=Mt.cloneDeep(e),nt.value={width:y.value,height:f.value,data:e},localStorage.setItem("grids",JSON.stringify(nt.value))}function Gt(){const u=nt.value;if(!!u.data){D(u.width,u.height);for(const e of u.data){const r=n(e.x,e.y);!r||(e.data&&(r.data=e.data),e.terrain&&(r.terrain=e.terrain),e.unit&&e.unit.actorId>0&&(r.unit=e.unit))}}}const q=M(!1);function Ht(u){D(u.width,u.height),u.data.forEach(e=>{const r=n(e.x,e.y);if(!!r)switch(e.type){case Z.DISABLED:r.terrain={image:xe,type:Z.DISABLED};break;case Z.CLIFF:r.terrain={image:ve,type:Z.CLIFF};break;case Z.BLOCKED:r.terrain={image:me,type:Z.BLOCKED};break}}),q.value=!1}function rt(){var G;const u=i.current;if(!u)return;nt.value||$t();const e=(G=u.unit)==null?void 0:G.team;let r,H,z=[];for(r=u.x-2;r<=u.x+2;r++)for(H=u.y-2;H<=u.y+2;H++){const F=n(r,H);!F||F.terrain.type!==Z.DISABLED&&(F.x===u.x&&F.y===u.y?(z[0]&&z.push(z[0]),z[0]=F):z.push(F))}z=z.filter(F=>F.unit&&F.unit.team!==e&&!(F.x===u.x&&F.y===u.y));const K=z.map(F=>({data:F.data,unit:F.unit}));z.forEach(F=>{S(F)});const A=ct(u.x,u.y,4,2).filter(F=>F.terrain.type!==Z.BLOCKED&&!(F.x===u.x&&F.y===u.y)).sort(C).map(F=>[F.x,F.y]);for(const F of K)for(const[Ft,$]of A){const w=n(Ft,$);if(!!w&&!(w.unit&&w.unit.actorId>0)&&w.terrain.type!==Z.DISABLED&&w.terrain.type!==Z.BLOCKED&&!(w.terrain.type===Z.CLIFF&&!F.unit.fly)){w.data=F.data,w.unit=F.unit;break}}}let mt;function ke(){const u=i.current;if(!u)return;const e=[{x:0,y:1,overlay:At.ARROW_UP},{x:1,y:0,overlay:At.ARROW_RIGHT},{x:0,y:-1,overlay:At.ARROW_DOWN},{x:-1,y:0,overlay:At.ARROW_LEFT}];for(const r of e){const H=n(u.x+r.x,u.y+r.y);if(!!H){H.overlay=r.overlay;for(let z=2;z<=4;z++){const K=n(u.x+r.x*z,u.y+r.y*z);!K||(K.overlay=At.HIGHLIGHT)}}}mt=u}function Se(u){var $;if(!mt||!u||u===At.HIGHLIGHT)return;const e=($=mt.unit)==null?void 0:$.team;let r,H,z=[];for(r=mt.x-1;r<=mt.x+1;r++)for(H=mt.y-1;H<=mt.y+1;H++){if(r===mt.x&&H===mt.y)continue;const w=n(r,H);!w||!w.unit||w.unit.team===e&&(w.state.d=ae(mt,w),z.push(w))}z.sort((w,W)=>!w.unit||!W.unit?0:w.state.d!==W.state.d?w.state.d-W.state.d:w.unit.actorId-W.unit.actorId),z=z.slice(0,2);const K=z.map(w=>({data:w.data,unit:w.unit}));z.forEach(w=>{w.unit=void 0}),console.log(K);const G={[At.ARROW_UP]:{x:0,y:1},[At.ARROW_RIGHT]:{x:1,y:0},[At.ARROW_DOWN]:{x:0,y:-1},[At.ARROW_LEFT]:{x:-1,y:0}}[u];let F;for(let w=1;w<=4;w++){const W=n(mt.x+w*G.x,mt.y+w*G.y);W&&W.terrain.type===Z.NONE&&(F=W)}if(!F)return;a(w=>{w.overlay=void 0});const Ft=ct(F.x,F.y,4,2).filter(w=>w.terrain.type!==Z.BLOCKED&&!(w.x===(F==null?void 0:F.x)&&w.y===(F==null?void 0:F.y))).sort(C).map(w=>[w.x,w.y]);for(const w of K)for(const[W,st]of Ft){const ht=n(W,st);if(!!ht&&!(ht.unit&&ht.unit.actorId>0)&&ht.terrain.type!==Z.DISABLED&&ht.terrain.type!==Z.BLOCKED&&!(ht.terrain.type===Z.CLIFF&&!w.unit.fly)){ht.data=w.data,ht.unit=w.unit;break}}F&&(ce(F,mt),i.current=F)}const Q=yt({team:1}),re=["#ffffff00","#FF3C4132","#0EBEFF32","#48CF7432","#FCD00032","#80008032"],qe=(u,e)=>{switch(p.editor){case 2:u.preventDefault();break;default:Q.grid=e,Q.action="swap",u.dataTransfer&&(u.dataTransfer.effectAllowed="move")}},Ie=(u,e)=>{const r=b();r.data.color=e.color,r.data.bgcolor=e.bgcolor,r.data.txt="E",Q.grid=r,Q.action="color"},oe=(u,e)=>{Q.grid=Mt.cloneDeep(e),Q.action="terrain"},de=(u,e)=>{Q.grid=Mt.cloneDeep(e),Q.action="unit"},Te=(u,e)=>{if(u.preventDefault(),!Q.grid)return;const r=Q.grid.unit,H=Q.grid.terrain;switch(Q.action){case"color":e.unit||(e.unit=B()),e.unit.actorId||(e.unit.actorId=++k.value),e.data=Q.grid.data;break;case"unit":if(e.unit||(e.unit=B()),e.unit.actorId||(e.unit.actorId=++k.value),!r)break;e.unit.image=r.image,e.unit.unitId=r.unitId,e.unit.team=Q.team;break;case"swap":ce(Q.grid,e,!r||r.actorId===0);break;case"terrain":e.terrain=H;break}Q.grid=void 0,Q.action=void 0,i.current&&(i.current=e),p.editor===4&&Wt()};function Ue(u,e){let r=u[0].state[e];for(let H=1;H<u.length;H++)u[H].state[e]<r&&(r=u[H].state[e]);return r}function ae(u,e){return Math.abs(u.x-e.x)+Math.abs(u.y-e.y)}function ce(u,e,r){const H=u.data,z=u.unit,K=u.terrain;u.data=e.data,u.unit=e.unit,e.data=H,e.unit=z,r&&(u.terrain=e.terrain,e.terrain=K)}function pe(u,e,r){u.sort((A,G)=>!A.unit||!G.unit?0:+A.unit.actorId-+G.unit.actorId),u.forEach(A=>{A.state.d1=ae(A,r),A.state.d2=ae(A,e),A.unit&&(A.unit.guard=!1)});const H=Ue(u,"d1");if(u=u.filter(A=>A.state.d1===H),u.length===1)return u[0];let z=u[0],K=u.length;for(;K--;)if(u[K].state.d2<z.state.d2){z=u[K];break}return z}function Ve(){D(15,15),k.value=0;const u=[{x:7,y:9,txt:"",type:pt.GUARD,bg:"#0ebeff"},{x:9,y:7,txt:"",type:pt.GUARD,bg:"#0ebeff"},{x:7,y:5,txt:"",type:pt.GUARD,bg:"#0ebeff"},{x:5,y:7,txt:"",type:pt.GUARD,bg:"#0ebeff"},{x:8,y:6,txt:"",type:pt.ATTACKER,bg:"#ff3c41"},{x:7,y:7,txt:"",type:pt.SHEEP,bg:"#fcd000"}];for(const e of u){const r=n(e.x,e.y);!r||(r.unit||(r.unit=B()),r.unit.actorId=++k.value,r.unit.actorType=e.type,r.disabled=!1,r.data.txt=e.txt,r.data.bgcolor=e.bg)}p.editor=4}const Wt=()=>{const u=I.value.flat();u.forEach(A=>{A.data.opacity=1});const e=u.filter(A=>A.unit&&!A.disabled),r=e.filter(A=>{var G;return((G=A.unit)==null?void 0:G.actorType)===pt.ATTACKER})[0],H=e.filter(A=>{var G;return((G=A.unit)==null?void 0:G.actorType)===pt.SHEEP})[0],z=e.filter(A=>{var G;return((G=A.unit)==null?void 0:G.actorType)===pt.GUARD});if(!H||z.length===0){alert("\u7F3A\u5C11\u89D2\u8272\uFF0C\u5C06\u81EA\u52A8\u751F\u6210"),Ve(),Wt();return}const K=u.filter(A=>!A.unit);for(const A of K){const G=pe(z,A,H);!G.unit||(A.data.image=G.unit.image,A.data.bgcolor=re[G.unit.actorId]||re[0],G.data.image?A.data.sup="":A.data.sup=String(G.unit.actorId),A.data.opacity=.6)}if(r){const A=pe(z,r,H);A.unit&&(A.unit.guard=!0)}},ze=u=>{if(!!u.unit&&p.editor===4){switch(u.unit.actorType){case pt.GUARD:u.disabled=!u.disabled;break}Wt()}},Oe=u=>{var e;!Q.grid||!u.dataTransfer||Q.action==="swap"&&(p.editor===4&&((e=Q.grid.unit)==null?void 0:e.actorType)===pt.SHEEP||u.preventDefault())},Re=u=>{if(!!Q.grid&&!!u)switch(Q.action){case"swap":S(u),Q.grid=void 0,Q.action=void 0,p.editor===4&&Wt()}},se=M(!1);function Ne(){se.value=!0}return Ee(()=>{vt(),window.addEventListener("mouseup",xt,!1)}),Le(()=>{window.removeEventListener("mouseup",xt,!1)}),(u,e)=>{var A,G,F,Ft;const r=Eu,H=bu,z=bt("c-space"),K=be("autofocus");return d(),_("div",_s,[t("div",fs,[t("div",xs,[t("label",vs,[ms,h(H,{placeholder:"\u9009\u62E9",modelValue:p.editor,"onUpdate:modelValue":e[0]||(e[0]=$=>p.editor=$)},{default:U(()=>[h(r,{value:1},{default:U(()=>[ot("\u7F16\u8F91\u7F51\u683C")]),_:1}),h(r,{value:2},{default:U(()=>[ot("\u5237\u5B50\u6A21\u5F0F")]),_:1}),h(r,{value:3},{default:U(()=>[ot("\u9009\u62E9\u5F62\u72B6")]),_:1}),h(r,{value:4},{default:U(()=>[ot("\u62A4\u536B\u8BA1\u7B97")]),_:1})]),_:1},8,["modelValue"])]),t("label",hs,[Es,j(t("input",{type:"number",min:"0","onUpdate:modelValue":e[1]||(e[1]=$=>p.selectRange=$),style:{width:"5em"}},null,512),[[Et,p.selectRange]])]),t("label",bs,[Ds,j(t("select",{"onUpdate:modelValue":e[2]||(e[2]=$=>p.shape=$)},Cs,512),[[Dt,p.shape]])]),t("label",$s,[ws,j(t("select",{"onUpdate:modelValue":e[3]||(e[3]=$=>p.sortType=$)},qs,512),[[Dt,p.sortType]])]),t("button",{class:"btn",onClick:Rt},"\u6E05\u7A7A"),t("button",{class:"btn",onClick:Wt},"\u8BA1\u7B97\u62A4\u536B"),t("button",{class:"btn btn-success",onClick:$t},"\u4FDD\u5B58\u5E03\u5C40"),t("button",{class:"btn btn-success",onClick:Gt},"\u8FD8\u539F\u5E03\u5C40"),tt("",!0),h(s(Du),{modelValue:q.value,"onUpdate:modelValue":e[4]||(e[4]=$=>q.value=$)},{popover:U(()=>[t("div",Ts,[(d(!0),_(J,null,lt(s(ys),($,w)=>(d(),_("div",{class:"list-item",key:w,onClick:W=>Ht($)},v($.name),9,Us))),128))])]),default:U(()=>[Is]),_:1},8,["modelValue"]),Vs,t("div",{class:"btn btn-link",onClick:Ne},"\u5E2E\u52A9"),h(s(Bu),{show:se.value,"onUpdate:show":e[5]||(e[5]=$=>se.value=$),width:"600px"},{default:U(()=>[zs]),_:1},8,["show"])]),t("div",Os,[h(z,null,{default:U(()=>{var $,w,W;return[t("label",Rs,[Ns,h(s(qt),{draggable:!1,data:{txt:"E",size:14,opacity:1,color:p.color,bgcolor:p.bgcolor},terrain:p.terrain},null,8,["data","terrain"])]),t("label",Gs,[js,h(s(Zt),{modelValue:p.color,"onUpdate:modelValue":e[6]||(e[6]=st=>p.color=st)},null,8,["modelValue"])]),t("label",Ms,[Hs,h(s(Zt),{modelValue:p.bgcolor,"onUpdate:modelValue":e[7]||(e[7]=st=>p.bgcolor=st)},null,8,["modelValue"])]),Ls,t("div",Ps,[(d(!0),_(J,null,lt(s(g),(st,ht)=>(d(),Tt(s(qt),{key:ht,selected:p.bgcolor===st.bgcolor,style:_e([`--color:${st.color};--bgcolor:${st.bgcolor}`]),onClick:Jt=>R(st),onDragstart:Jt=>Ie(Jt,st)},{default:U(()=>[ot(" E ")]),_:2},1032,["selected","style","onClick","onDragstart"]))),128)),h(s(qt),{selected:(($=p.terrain)==null?void 0:$.type)===s(et).terrain.type,terrain:s(et).terrain,onClick:e[8]||(e[8]=st=>ut(s(et))),onDragstart:e[9]||(e[9]=st=>oe(st,s(et)))},null,8,["selected","terrain"]),h(s(qt),{selected:((w=p.terrain)==null?void 0:w.type)===s(it).terrain.type,terrain:s(it).terrain,onClick:e[10]||(e[10]=st=>ut(s(it))),onDragstart:e[11]||(e[11]=st=>oe(st,s(it)))},null,8,["selected","terrain"]),h(s(qt),{selected:((W=p.terrain)==null?void 0:W.type)===s(_t).terrain.type,terrain:s(_t).terrain,onClick:e[12]||(e[12]=st=>ut(s(_t))),onDragstart:e[13]||(e[13]=st=>oe(st,s(_t)))},null,8,["selected","terrain"])]),t("div",{class:"trush",onDragover:Oe,onDrop:e[14]||(e[14]=st=>Re(Q.grid))},[(d(),_("svg",Ks,Js))],32)]}),_:1})]),t("div",Ys,[i.current?(d(),_("div",Xs,[h(z,null,{default:U(()=>[t("label",Qs,[Zs,h(s(qt),{draggable:!1,style:_e([`--color:${i.current.data.color};--bgcolor:${i.current.data.bgcolor}`]),data:i.current.data,terrain:i.current.terrain,overlay:i.current.overlay,unit:i.current.unit},null,8,["style","data","terrain","overlay","unit"])]),t("label",tl,[el,h(s(Zt),{modelValue:i.current.data.color,"onUpdate:modelValue":e[15]||(e[15]=$=>i.current.data.color=$)},null,8,["modelValue"])]),t("label",ul,[nl,h(s(Zt),{modelValue:i.current.data.bgcolor,"onUpdate:modelValue":e[16]||(e[16]=$=>i.current.data.bgcolor=$)},null,8,["modelValue"])]),t("label",ol,[al,j(t("input",{type:"number",style:{width:"4em"},min:"12",step:"1","onUpdate:modelValue":e[17]||(e[17]=$=>i.current.data.size=$)},null,512),[[Et,i.current.data.size]])]),t("label",sl,[ll,j(t("input",{type:"text",ref_key:"txtInput",ref:m,"onUpdate:modelValue":e[18]||(e[18]=$=>i.current.data.txt=$),style:{width:"6em"}},null,512),[[K],[Et,i.current.data.txt]])]),t("label",il,[rl,j(t("select",{"onUpdate:modelValue":e[19]||(e[19]=$=>i.current.terrain.type=$)},[t("option",{value:s(Z).NONE},"\u65E0",8,dl),t("option",{value:s(Z).DISABLED},"\u7981\u6B62",8,cl),t("option",{value:s(Z).BLOCKED},"\u969C\u788D",8,pl),t("option",{value:s(Z).CLIFF},"\u60AC\u5D16",8,yl)],512),[[Dt,i.current.terrain.type]])]),i.current.unit?(d(),Tt(z,{key:0},{default:U(()=>[t("label",_l,[fl,j(t("input",{type:"number","onUpdate:modelValue":e[20]||(e[20]=$=>i.current.unit.actorId=$),style:{width:"4em"}},null,512),[[Et,i.current.unit.actorId]])]),t("label",xl,[vl,j(t("select",{"onUpdate:modelValue":e[21]||(e[21]=$=>i.current.unit.actorType=$)},[t("option",{value:s(pt).NONE},"\u65E0",8,ml),t("option",{value:s(pt).GUARD},"\u62A4\u536B",8,hl),t("option",{value:s(pt).SHEEP},"\u9776\u5B50",8,El),t("option",{value:s(pt).ATTACKER},"\u653B\u51FB\u8005",8,bl)],512),[[Dt,i.current.unit.actorType]])]),t("label",Dl,[Bl,j(t("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=$=>i.current.unit.fly=$)},null,512),[[kt,i.current.unit.fly]])])]),_:1})):tt("",!0),t("button",{class:"btn",onClick:O},"\u5B8C\u6210")]),_:1})])):tt("",!0)]),t("div",Fl,[(A=i.current)!=null&&A.unit?(d(),_("label",Cl,[$l,t("input",{type:"text",readonly:"",value:i.current.unit.unitId,style:{width:"4em"}},null,8,wl)])):tt("",!0),(G=i.current)!=null&&G.unit?(d(),_("label",gl,[Al,j(t("select",{"onUpdate:modelValue":e[23]||(e[23]=$=>i.current.unit.team=$)},Tl,512),[[Dt,i.current.unit.team]])])):tt("",!0),(F=i.current)!=null&&F.unit?(d(),_("button",{key:2,class:"btn btn-success",onClick:rt},"\u602A\u529B\u4E71\u795E")):tt("",!0),(Ft=i.current)!=null&&Ft.unit?(d(),_("button",{key:3,class:"btn btn-success",onClick:ke},"\u5F00\u8F66")):tt("",!0)])]),t("div",Ul,[t("div",Vl,[(d(!0),_(J,null,lt(s(I),($,w)=>(d(),_("div",{class:"grids-row",key:w},[(d(!0),_(J,null,lt($,(W,st)=>{var ht,Jt;return d(),Tt(s(qt),{key:st,draggable:!0,selected:W.x===((ht=i.current)==null?void 0:ht.x)&&W.y===((Jt=i.current)==null?void 0:Jt.y),disabled:W.disabled,dot:W.unit&&W.unit.guard,data:W.data,terrain:W.terrain,overlay:W.overlay,unit:W.unit,onDragstart:wt=>qe(wt,W),onDragover:e[24]||(e[24]=Kt(()=>{},["prevent"])),onDrop:wt=>Te(wt,W),onContextmenu:Kt(wt=>ze(W),["prevent"]),onClick:wt=>Nt(wt,W),onMousedown:wt=>V(wt,W),onMouseenter:wt=>c(wt,W),onClickoverlay:Se},null,8,["selected","disabled","dot","data","terrain","overlay","unit","onDragstart","onDrop","onContextmenu","onClick","onMousedown","onMouseenter"])}),128))]))),128))]),t("div",zl,[t("div",Ol,[t("label",Rl,[Nl,j(t("select",{"onUpdate:modelValue":e[25]||(e[25]=$=>Q.team=$)},Hl,512),[[Dt,Q.team]])])]),t("div",Ll,[t("div",Pl,[h(s(qt),{item:ft.value,onDragstart:e[26]||(e[26]=$=>de($,ft.value))},null,8,["item"]),(d(!0),_(J,null,lt(dt.value,($,w)=>(d(),Tt(s(qt),{key:w,data:$.data,terrain:$.terrain,overlay:$.overlay,unit:$.unit,onDragstart:W=>de(W,$)},null,8,["data","terrain","overlay","unit","onDragstart"]))),128))])])])])])}}});const Wl=Bt(Kl,[["__scopeId","data-v-e2aa6b1b"]]),Ai=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"}));let Jl=0;window.jsonpcard={};const Yl={503101:"\u60A8\u586B\u5199\u7684\u670D\u52A1\u5668\u6216\u89D2\u8272ID\u4F3C\u4E4E\u6709\u9519\uFF0C\u8BF7\u68C0\u67E5\uFF01"},Xl={101:"\u5151\u6362\u7801\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5C11\u4FA0\u786E\u8BA4\u5151\u6362\u7801\u662F\u5426\u6B63\u786E[101]",104:"\u8BE5\u5151\u6362\u7801\u5DF2\u88AB\u4F7F\u7528[104]",108:"\u8BE5\u5151\u6362\u7801\u5DF2\u8FC7\u671F[108]",113:"\u8BE5\u5151\u6362\u7801\u9650\u5236\u4F7F\u7528\uFF0C\u8BF7\u5230\u6E38\u620F\u5185\u4F7F\u7528[113]",115:"\u5DF2\u6210\u529F\u9886\u53D6\u5151\u6362\u7801[115]",120:"\u8BE5\u5151\u6362\u7801\u5DF2\u8FBE\u4F7F\u7528\u6B21\u6570\u4E0A\u9650[120]"},Ql=[{id:"3001",name:"\u4F53\u9A8C\u670D"},{id:"6001",name:"\u6C34\u955C\u4E4B\u6BBF-\u5B98\u670D"},{id:"6002",name:"\u4E09\u754C\u4E4B\u95E8-\u5B98\u670D"},{id:"6003",name:"\u697C\u5170\u5E7B\u57CE-\u5B98\u670D"},{id:"6004",name:"\u955C\u5E7B\u5E7D\u754C-\u5B98\u670D"},{id:"6005",name:"\u6708\u9690\u5927\u6F20-\u5B98\u670D"},{id:"6006",name:"\u601D\u8C12\u4E4B\u95F4-\u5B98\u670D"},{id:"6007",name:"\u9647\u5357\u98CE\u4E91-\u5B98\u670D"},{id:"6008",name:"\u70DF\u96E8\u51C9\u5DDE-\u5B98\u670D"},{id:"6009",name:"\u8FE6\u590F\u4E4B\u7A9F-\u5B98\u670D"},{id:"6010",name:"\u5317\u5C71\u7EFF\u6D32-\u5B98\u670D"},{id:"6011",name:"\u9AD8\u660C\u53E4\u57CE-\u5B98\u670D"},{id:"6012",name:"\u6CB3\u5DDE\u5C0F\u9547-\u5B98\u670D"},{id:"6013",name:"\u4E03\u6B65\u8FF7\u9635-\u5B98\u670D"},{id:"6014",name:"\u592A\u865A\u7384\u7A79-\u5B98\u670D"},{id:"6015",name:"\u5BF0\u795E\u4E5D\u5C71-\u5B98\u670D"},{id:"6016",name:"\u82CD\u7A79\u4E4B\u57DF-\u5B98\u670D"},{id:"6017",name:"\u697C\u5170\u79D8\u5883-\u5B98\u670D"},{id:"6018",name:"\u82CD\u5C18\u5BA2\u6808-\u5B98\u670D"},{id:"6019",name:"\u8352\u4E4B\u5251\u51A2-\u5B98\u670D"},{id:"6020",name:"\u9041\u4E16\u6E05\u5C45-\u5B98\u670D"},{id:"6021",name:"\u60AC\u5929\u53E4\u5F84-\u5B98\u670D"},{id:"6022",name:"\u796D\u5929\u795E\u5854-\u5B98\u670D"},{id:"6023",name:"\u5316\u8574\u795E\u53F0-\u5B98\u670D"},{id:"6024",name:"\u8BA1\u90FD\u5E7B\u7891-\u5B98\u670D"},{id:"6025",name:"\u795E\u79FB\u661F\u53F0-\u5B98\u670D"},{id:"6026",name:"\u79BB\u9B42\u5E7D\u539F-\u5B98\u670D"},{id:"6027",name:"\u5343\u9B42\u714C\u6D77-\u5B98\u670D"},{id:"6028",name:"\u795E\u70E8\u4E4B\u5385-\u5B98\u670D"},{id:"6029",name:"\u5C01\u4EEA\u4E4B\u95F4-\u5B98\u670D"},{id:"6030",name:"\u5929\u5DC5\u5730\u5D16-\u5B98\u670D"},{id:"6031",name:"\u65CB\u5203\u5377\u5C9A-\u5B98\u670D"},{id:"6032",name:"\u5343\u95C7\u4E4B\u6E0A-\u5B98\u670D"},{id:"6033",name:"\u7D2B\u7430\u98DE\u714C-\u5B98\u670D"},{id:"6034",name:"\u5E7D\u51A5\u6697\u89E6-\u5B98\u670D"},{id:"6035",name:"\u6108\u795E\u5E7B\u96FE-\u5B98\u670D"},{id:"6036",name:"\u6697\u9B45\u5E7B\u751F-\u5B98\u670D"},{id:"6037",name:"\u65E5\u8F6E\u795E\u5251-\u5B98\u670D"},{id:"6038",name:"\u77AC\u970E\u795E\u4EEA-\u5B98\u670D"},{id:"6039",name:"\u78A7\u6D77\u6F6E\u751F-\u5B98\u670D"},{id:"6040",name:"\u98DE\u661F\u795E\u5251-\u5B98\u670D"},{id:"6041",name:"\u711A\u706B\u771F\u708E-\u5B98\u670D"},{id:"6042",name:"\u5251\u5F71\u9010\u5149-\u5B98\u670D"},{id:"6043",name:"\u4E91\u6A2A\u534E\u5C71-\u5B98\u670D"},{id:"6044",name:"\u8F89\u65E5\u5723\u5492-\u5B98\u670D"},{id:"6045",name:"\u63FD\u98CE\u795E\u884C-\u5B98\u670D"},{id:"6046",name:"\u6D41\u5149\u834F\u82D2-\u5B98\u670D"},{id:"6047",name:"\u516D\u7532\u795E\u4EEA-\u5B98\u670D"},{id:"6048",name:"\u706D\u5251\u8840\u80E7-\u5B98\u670D"},{id:"6049",name:"\u65E0\u65B9\u5251\u6C14-\u5B98\u670D"},{id:"6050",name:"\u79BB\u706B\u795E\u8BC0-\u5B98\u670D"},{id:"6051",name:"\u541F\u72D0\u730E\u58F0-\u5B98\u670D"},{id:"6052",name:"\u98CE\u5377\u6B8B\u4E91-\u5B98\u670D"},{id:"6053",name:"\u58C1\u95F4\u86C7\u5F71-\u5B98\u670D"},{id:"6054",name:"\u767D\u8679\u8D2F\u65E5-\u5B98\u670D"},{id:"6055",name:"\u5C01\u9B54\u795E\u9053-\u5B98\u670D"},{id:"6056",name:"\u6DF7\u5143\u6C14\u805A-\u5B98\u670D"},{id:"6057",name:"\u4E5D\u5929\u795E\u96F7-\u5B98\u670D"},{id:"6058",name:"\u53CC\u73AF\u6620\u6708-\u5B98\u670D"},{id:"6059",name:"\u795E\u534E\u5929\u821E-\u5B98\u670D"},{id:"6060",name:"\u7F57\u5239\u4E00\u51FB-\u5B98\u670D"},{id:"6061",name:"\u8BF8\u661F\u795E\u66DC-\u5B98\u670D"},{id:"6062",name:"\u77E9\u5B50\u4E4B\u57DF-\u5B98\u670D"},{id:"6063",name:"\u9F99\u7EDD\u634D\u536B-\u5B98\u670D"},{id:"6064",name:"\u51A5\u5E7B\u4E4B\u9635-\u5B98\u670D"},{id:"6065",name:"\u72C2\u9F99\u7EDD\u606F-\u5B98\u670D"},{id:"6066",name:"\u5343\u714C\u96F7\u70C8-\u5B98\u670D"},{id:"6067",name:"\u7FA4\u661F\u805A\u534E-\u5B98\u670D"},{id:"6068",name:"\u795E\u6C14\u6D41\u8F6C-\u5B98\u670D"},{id:"6069",name:"\u8E0F\u6B65\u5C01\u5FC3-\u5B98\u670D"},{id:"6070",name:"\u5929\u971C\u96EA\u821E-\u5B98\u670D"},{id:"6071",name:"\u8BDB\u5929\u5251\u9635-\u5B98\u670D"},{id:"6072",name:"\u50B2\u96EA\u5BD2\u971C-\u5B98\u670D"},{id:"6073",name:"\u51B0\u534E\u4E4B\u9635-\u5B98\u670D"},{id:"6074",name:"\u6697\u661F\u5149\u8000-\u5B98\u670D"},{id:"6075",name:"\u5C01\u9B42\u7F1A\u63A0-\u5B98\u670D"},{id:"6076",name:"\u5929\u5730\u6218\u7EAA-\u5B98\u670D"},{id:"6077",name:"\u72C2\u98CE\u708E\u65A9-\u5B98\u670D"},{id:"6078",name:"\u9F99\u7130\u51F6\u53F7-\u5B98\u670D"},{id:"6079",name:"\u7EEE\u7F57\u5929\u9999-\u5B98\u670D"},{id:"6080",name:"\u795E\u6C1B\u5316\u6CD5-\u5B98\u670D"},{id:"6081",name:"\u5929\u5C06\u5954\u70C8-\u5B98\u670D"},{id:"6082",name:"\u534F\u5FC3\u60CA\u96F7-\u5B98\u670D"},{id:"6083",name:"\u5929\u745E\u4ED9\u821E-\u5B98\u670D"},{id:"6084",name:"\u7FBD\u5203\u675F\u7F1A-\u5B98\u670D"},{id:"6085",name:"\u4E91\u5F71\u96FE\u5E7B-\u5B98\u670D"},{id:"6086",name:"\u8F89\u65E5\u4E4B\u5251-\u5B98\u670D"},{id:"6087",name:"\u7F57\u777A\u4E4B\u94A5-\u5B98\u670D"},{id:"6088",name:"\u51E4\u51F0\u7EC7\u9526-\u5B98\u670D"},{id:"6089",name:"\u897F\u57DF\u795E\u5FBD-\u5B98\u670D"},{id:"2001",name:"\u7D2B\u91D1\u738B\u9F0E-\u6E20\u9053"},{id:"2001",name:"\u4E03\u8272\u7F28\u73DE-\u6E20\u9053"},{id:"2003",name:"\u4E5D\u4EEA\u5929\u5C0A-\u6E20\u9053"},{id:"2003",name:"\u51DB\u65E5\u795E\u5200-\u6E20\u9053"},{id:"2005",name:"\u592A\u4E59\u5360\u76D8-\u6E20\u9053"},{id:"2005",name:"\u5E7D\u57A0\u4E4B\u6212-\u6E20\u9053"},{id:"2005",name:"\u8840\u7075\u795E\u73E0-\u6E20\u9053"},{id:"2005",name:"\u5E7D\u714C\u4E4B\u7130-\u6E20\u9053"},{id:"2005",name:"\u9547\u9F99\u4E4B\u7389-\u6E20\u9053"},{id:"2010",name:"\u90AA\u714C\u9738\u5251-\u6E20\u9053"},{id:"2010",name:"\u4E94\u5C0A\u795E\u4EE4-\u6E20\u9053"},{id:"2010",name:"\u7D2B\u7430\u714C\u77F3-\u6E20\u9053"},{id:"2010",name:"\u4E5D\u5E7D\u5316\u7389-\u6E20\u9053"},{id:"2010",name:"\u7D2B\u7B71\u51C0\u7389-\u6E20\u9053"},{id:"2010",name:"\u7B71\u795E\u4E91\u73E0-\u6E20\u9053"},{id:"2016",name:"\u6731\u7EB6\u796D\u5251-\u6E20\u9053"},{id:"2016",name:"\u7D2B\u8574\u7CBE\u7389-\u6E20\u9053"},{id:"2016",name:"\u7834\u9B54\u6731\u7EEB-\u6E20\u9053"},{id:"2016",name:"\u7405\u73AF\u7389\u74A7-\u6E20\u9053"},{id:"2016",name:"\u5343\u5E7B\u6D41\u5149-\u6E20\u9053"},{id:"2016",name:"\u5929\u90FD\u6C34\u6708-\u6E20\u9053"},{id:"2016",name:"\u5E7D\u90FD\u738B\u73BA-\u6E20\u9053"},{id:"2016",name:"\u56DE\u5149\u94F6\u73AF-\u6E20\u9053"},{id:"2016",name:"\u9F99\u795E\u5929\u94E0-\u6E20\u9053"},{id:"2025",name:"\u519B\u795E\u523B\u7B26-\u6E20\u9053"},{id:"2025",name:"\u7476\u5149\u7EEB\u7D22-\u6E20\u9053"},{id:"2025",name:"\u5730\u754C\u5E7D\u59EC-\u6E20\u9053"},{id:"2029",name:"\u53E4\u5251\u9F99\u7687-\u6E20\u9053"},{id:"2030",name:"\u7D2B\u7535\u91D1\u621F-\u6E20\u9053"}],le="userids",ie="giftcodes";function Zl(){const o="1571725187985",f="0123456789",y="2",k="https://activity.zlongame.com";function I(R){return R.info===115}function P(R){return!!R.code}function g(R,ut,at){return new Promise((ft,dt)=>{const ct=`cb_${Jl++}`,E=document.createElement("script");window.jsonpcard[ct]=l=>{ft(l),delete window.jsonpcard[ct]},E.src=`${k}/activity/cmn/card/csmweb.do?pd_acti_cb=jsonpcard.${ct}&appkey=${o}&card_user=${R}&card_channel=${f}&card_server=${ut}&card_role=${R}&card_code=${at}&type=${y}&_=${Date.now()}`,document.head.appendChild(E),E.onload=()=>{E.remove()},E.onerror=()=>{E.remove(),dt(new Error("failed"))}})}const B=M([]);function x(){try{const R=localStorage.getItem(le);B.value=R?JSON.parse(R):[]}catch{B.value=[]}}function b(){localStorage.setItem(le,JSON.stringify(B.value))}function S(R){B.value.findIndex(ut=>ut.user===R.user)===-1&&(B.value.push(R),b())}function X(R){const ut=B.value.findIndex(at=>at.user===R.user);ut!==-1&&(B.value.splice(ut,1),b())}function D(){B.value=[],localStorage.removeItem(le)}const n=M([]);function a(){try{const R=localStorage.getItem(ie);n.value=R?JSON.parse(R):[]}catch{n.value=[]}}function m(){localStorage.setItem(ie,JSON.stringify(n.value))}function p(R){n.value.findIndex(at=>at===R)===-1&&(n.value.push(R),m())}function et(R){const ut=n.value.findIndex(at=>at===R);ut!==-1&&(n.value.splice(ut,1),m())}function it(){n.value=[],localStorage.removeItem(ie)}function _t(){x(),a()}return _t(),{userids:B,servers:Ql,giftcodes:n,putGiftcode:g,addUserid:S,delUserid:X,clearUserid:D,addGiftcode:p,delGiftcode:et,clearGiftcode:it,isSuccess:I,isError:P,giftcodeCode:Yl,giftcodeInfo:Xl}}function ti(){return Fu}const ei={class:"toolbar giftcode-toolbar"},ui={class:"input-group"},ni=t("div",{class:"input-ext"},"\u670D\u52A1\u5668",-1),oi={class:"input-group"},ai=t("div",{class:"input-ext"},"\u89D2\u8272ID",-1),si={class:"input-group"},li=t("div",{class:"input-ext"},"\u5151\u6362\u7801",-1),ii=t("a",{href:"https://wiki.biligame.com/tdj/Giftcode",target:"_blank",class:"btn btn-link"},"BiliWiki",-1),ri={class:"giftcode-grid"},di={class:"giftcode-subgrid"},ci={class:"giftcode-tag"},pi={class:"giftcode-subgrid"},yi=["onClick"],_i=["onClick"],fi=Ct({__name:"Giftcode",setup(o){const{servers:f,userids:y,giftcodes:k,addUserid:I,delUserid:P,clearUserid:g,addGiftcode:B,delGiftcode:x,putGiftcode:b,isSuccess:S,isError:X,giftcodeCode:D,giftcodeInfo:n}=Zl(),a=M(""),m=ti(),p=M(),et=M("");function it(E){p.value=E}function _t(E){et.value=E.user;const l=f.find(C=>C.id===E.server);!l||(p.value=l)}async function R(E){!await m.confirm("\u786E\u8BA4\u5220\u9664\u6B64\u7528\u6237\u5417\uFF1F")||P(E)}function ut(){g()}const at=M("");async function ft(E){!await m.confirm("\u786E\u8BA4\u5220\u9664\u6B64\u5151\u6362\u7801\uFF1F")||x(E)}async function dt(E,l,C){if(!E){m.alert("\u672A\u9009\u62E9\u670D\u52A1\u5668\u3002");return}if(!l){m.alert("\u672A\u8F93\u5165\u89D2\u8272ID\u3002");return}if(!/^\d{19}$/.test(l)){m.alert("\u89D2\u8272ID\u957F\u5EA6\u4E0D\u6B63\u786E\u3002");return}if(!C){m.alert("\u672A\u8F93\u5165\u793C\u5305\u7801\u3002");return}const T=await b(l,E,C);if(console.log(T),X(T)){m.alert(D[T.code]||`code: ${T.code}`);return}if(I({user:l,server:E}),[104,113,115,120].indexOf(T.info)!==-1&&B(C),S(T)){m.alert(n[T.info]);return}m.alert(n[T.info]||`info: ${T.info}`)}function ct(){var E;dt((E=p.value)==null?void 0:E.id,et.value,at.value)}return(E,l)=>(d(),_(J,null,[t("div",ei,[h(s(Cu),{wrap:""},{default:U(()=>{var C;return[t("div",ui,[ni,h(s(he),{readonly:"",name:"name",list:s(f),value:((C=p.value)==null?void 0:C.name)||"","item-width":"120px","overlay-width":"500px",onSelect:it},null,8,["list","value"])]),t("div",oi,[ai,h(s(he),{name:"user","show-delete":"",list:s(y),value:et.value,"onUpdate:value":l[0]||(l[0]=T=>et.value=T),onSelect:_t,onDelete:R,width:"185px"},null,8,["list","value"])]),t("div",si,[li,j(t("input",{class:"input",type:"text","onUpdate:modelValue":l[1]||(l[1]=T=>at.value=T),style:{width:"100px"}},null,512),[[Et,at.value]])]),t("button",{type:"button",class:"btn btn-default",onClick:ut},"\u6E05\u7A7A"),t("button",{type:"button",class:"btn btn-primary",onClick:ct},"\u9886\u53D6"),ii]}),_:1})]),t("div",ri,[j(t("input",{class:"input",type:"text",placeholder:"\u8F93\u5165\u8981\u6DFB\u52A0\u7684\u5151\u6362\u7801","onUpdate:modelValue":l[2]||(l[2]=C=>a.value=C)},null,512),[[Et,a.value]]),t("div",di,[t("button",{class:"btn btn-primary",onClick:l[3]||(l[3]=C=>a.value&&s(B)(a.value))},"\u6DFB\u52A0")]),(d(!0),_(J,null,lt(s(k),C=>(d(),_(J,{key:C},[t("span",ci,v(C),1),t("div",pi,[t("button",{class:"btn btn-primary",onClick:T=>{var L;return dt((L=p.value)==null?void 0:L.id,et.value,C)}},"\u9886\u53D6",8,yi),t("button",{class:"btn btn-danger",onClick:T=>ft(C)},"\u5220\u9664",8,_i)])],64))),128))])],64))}});const ki=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"}));export{Di as B,Ei as C,Ci as E,Ai as G,mi as H,bi as S,Fi as W,hi as a,Bi as b,$i as c,wi as d,gi as e,ki as f};
