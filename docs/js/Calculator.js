import{_ as j,E as et,o as v,c as h,e as s,G as tt,H as st,I as nt,J as ot,K as pe,d as W,s as K,L as qe,M as L,j as le,n as ke,f as S,N as at,O as De,q as Z,a as M,g as o,h as p,w as P,B as X,F as q,r as R,k as A,i as Y,P as Ce,A as O,p as ve,l as me,Q as Te,R as lt,S as ae,b as ue,T as ut,U as a,V as it,z as dt,W as rt,X as ct,v as Ie,Y as H,Z as pt,u as vt,C as re}from"./index.js";import{_ as he}from"./lodash.js";import{u as mt}from"./useHeroes.js";import ft from"./InputNumber.js";import{b as Ne,d as Be,a as _t,i as ht}from"./shared.js";import{s as Re}from"./data.js";const bt=["width","height"],$t=s("path",{d:"M13 16 l-10 -10 l3 -3 l10 10 l10 -10 l3 3 l-10 10 l10 10 l-3 3 l-10 -10 l-10 10 l-3 -3 z"},null,-1),gt=[$t];function Ft(e,t,n,_,f,m){return v(),h("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},gt,8,bt)}const yt=j(et,[["render",Ft]]),Ct=["width","height"],Bt=s("path",{d:"M16 3 l-14 14 l0 6 l14 -14 l14 14 l0 -6 l-14 -14 z"},null,-1),wt=[Bt];function kt(e,t,n,_,f,m){return v(),h("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},wt,8,Ct)}const Dt=j(tt,[["render",kt]]),Et=["width","height"],St=s("path",{d:"M16 27 l-14 -14 l0 -6 l14 14 l14 -14 l0 6 l-14 14 z"},null,-1),Mt=[St];function Ut(e,t,n,_,f,m){return v(),h("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32"},Mt,8,Et)}const At=j(st,[["render",Ut]]),It=["width","height"],Vt=s("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},null,-1),Ht=[Vt];function Pt(e,t,n,_,f,m){return v(),h("svg",{width:e.width,height:e.height,viewBox:"0 0 24 24"},Ht,8,It)}const Oe=j(nt,[["render",Pt]]),qt=["width","height"],Tt=s("path",{d:"M18 12.13V10H20V10.3C19.78 10.42 19.57 10.56 19.39 10.74L18 12.13M9.5 11C9.22 11 9 11.22 9 11.5V13H15V11.5C15 11.22 14.78 11 14.5 11H9.5M6 10H4V21H11V19.13L11.13 19H6V10M21 9H3V3H21V9M19 5H5V7H19V5M13 19.96V22H15.04L21.17 15.88L19.13 13.83L13 19.96M22.85 13.47L21.53 12.15C21.33 11.95 21 11.95 20.81 12.15L19.83 13.13L21.87 15.17L22.85 14.19C23.05 14 23.05 13.67 22.85 13.47Z"},null,-1),Nt=[Tt];function Rt(e,t,n,_,f,m){return v(),h("svg",{width:e.width,height:e.height,viewBox:"0 0 24 24"},Nt,8,qt)}const Ot=j(ot,[["render",Rt]]);let ye=0,Ve=0;const jt=500;function He(){const e=Math.floor(new Date().getTime()/1e3);Ve===e?ye++:ye=0,Ve=e;const t=e.toString(16);return`${(jt<<16|ye&255).toString(16)}.${t}`}async function Kt(){try{return await pe.getAll("calculator")}catch{return[]}}async function Gt(){try{await pe.clear("calculator")}catch(e){alert(e.message)}}async function Lt(e){try{await pe.add("calculator",JSON.parse(JSON.stringify(e)))}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}async function ce(e){try{await pe.put("calculator",JSON.parse(JSON.stringify(e)))}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}async function Pe(e){try{await pe.delete("calculator",e)}catch(t){t instanceof Error?console.log(t.message):console.log(t)}}function Qt(){return{w:2438,g:0,a:"403+363",c:20,x:0}}function zt(){return{a:0}}function Jt(){return{att:0,k:0}}function je(){return{name:"1.5\u6280\u80FD",desc:"",a1:1.5,a2:0,att:"15+10+8",da:"10+10",db:"4+10+20",dc:"0",dx:"0",id:"0",cd:"30",att2:"0",da2:"0",dx2:"0",defGain:"0"}}function Wt(){return{a1:1.5,a2:0,att:0,id:0,da:0,db:0,dc:0,dx:0,cd:0,att2:0,da2:0,dx2:0,defGain:0}}function Xt(){return[je()]}function Zt(){return{hp:"10000",def:"1872",defGain:"15+5",ra:"0",rb:"4+10"}}const Yt=W({props:{active:Boolean,label:String,dir:String,inline:Boolean,color:String,wait:{type:Number,default:500}},emits:["update:active"],setup(e,{emit:t}){const n=K(),_=K({}),f=K(e.active),m=()=>{const d=n.value.getBoundingClientRect();switch(f.value=!0,t("update:active",f.value),e.dir){case"left":_.value={top:`${d.top+d.height/2}px`,right:`${window.innerWidth-d.left-4}px`,maxWidth:"100%"};break;case"right":_.value={top:`${d.top+d.height/2}px`,left:`${d.right+4}px`,maxWidth:"100%"};break;case"top":_.value={bottom:`${window.innerHeight-d.top-4}px`,left:`${d.left+d.width/2}px`,maxWidth:"100%"};break;default:_.value={top:`${d.bottom+4}px`,left:`${d.left+d.width/2}px`,maxWidth:"100%"}}};let i;const B=()=>{i=setTimeout(m,e.wait)},k=()=>{clearTimeout(i),f.value=!1,t("update:active",f.value)};return qe(()=>e.active,D=>{f.value=D}),{el:n,style:_,tActive:f,onEnter:B,onOut:k}}});const xt={class:"c-tooltip-label"};function es(e,t,n,_,f,m){return v(),h("div",{ref:"el",class:le(["c-tooltip",{active:e.tActive,inline:e.inline}]),onMouseenter:t[0]||(t[0]=(...i)=>e.onEnter&&e.onEnter(...i)),onMouseout:t[1]||(t[1]=(...i)=>e.onOut&&e.onOut(...i))},[L(e.$slots,"label",{},()=>[s("div",xt,S(e.label),1)]),s("div",{class:le(["c-tooltip-inner",e.dir?`c-tooltip-${e.dir}`:"c-tooltip-bottom",e.color?`c-tooltip-${e.color}`:""]),style:ke(e.style)},[L(e.$slots,"default")],6)],34)}const Ee=j(Yt,[["render",es]]),ts=W({components:{Divider:at,Tooltip:Ee,CalcInput:De,IconUp:Dt,IconDown:At,IconClose:yt,IconCopy:Oe},props:{panel:{type:Object,required:!0},state:{type:Object,required:!0},enemyState:{type:Object,required:!0},itemState:{type:Object,required:!0},showUp:Boolean,showDown:Boolean},emits:["update:itemState","close","up","down","copy"],setup(e,{emit:t}){const n=Z({editor:!1,name:"",desc:{f:!1,v:""}}),_=(r,C)=>{if(r==="name")return;const N=e.itemState;switch(r){case"a1":case"a2":typeof C=="number"&&(N[r]=C);break;default:typeof C=="string"&&(N[r]=C)}t("update:itemState",N)},f=Z(Wt()),m=M({set:r=>_("a1",r),get:()=>e.itemState.a1}),i=M({set:r=>_("a2",r),get:()=>e.itemState.a2}),B=M({set:r=>_("att",r),get:()=>e.itemState.att}),k=M({set:r=>_("id",r),get:()=>e.itemState.id}),D=M({set:r=>_("da",r),get:()=>e.itemState.da}),d=M({set:r=>_("db",r),get:()=>e.itemState.db}),$=M({set:r=>_("dc",r),get:()=>e.itemState.dc}),V=M({set:r=>_("dx",r),get:()=>e.itemState.dx}),G=M({set:r=>_("cd",r),get:()=>e.itemState.cd}),c=M({set:r=>_("att2",r),get:()=>e.itemState.att2}),I=M({set:r=>_("da2",r),get:()=>e.itemState.da2}),Q=M({set:r=>_("dx2",r),get:()=>e.itemState.dx2}),z=M({set:r=>_("defGain",r),get:()=>e.itemState.defGain}),g=Z({a1:m,a2:i,att:B,da:D,db:d,dc:$,dx:V,id:k,cd:G,att2:c,da2:I,dx2:Q,defGain:z}),F=M(()=>{const{state:r}=e,C=(100+f.att)/100;return Math.ceil(r.att*C)}),b=M(()=>{const{state:r}=e,C=(100+f.att+f.att2)/100;return Math.ceil(r.att*C)}),l=()=>{const{state:r,enemyState:C}=e,N=(100+r.k)/100,se=(100+f.da-C.ra)/100,de=(100+f.da+f.da2-C.ra)/100,ne=(100+f.db-C.rb)/100,_e=(100+f.dc)/100,Fe=(100+f.dx)/100,Le=(100+f.dx+f.dx2)/100,Se=(100+f.cd)/100,Me=(100-f.id)/100,Qe=(100+C.defGain)/100,ze=(100+C.defGain+f.defGain)/100,Je=Math.max(0,Math.max(0,C.def*Qe)*Me),We=Math.max(0,Math.max(0,C.def*ze)*Me),Xe=Math.max(1,F.value*N-Je),Ze=Math.max(1,b.value*N-We),Ue=Xe*m.value*se*ne*Fe,Ye=Math.ceil(Ue*Se),Ae=Ze*i.value*de*ne*_e*Le,xe=Math.ceil(Ae*Se);return{r01:Math.ceil(Ue),r01c:Ye,r02:Math.ceil(Ae),r02c:xe}},T=M(()=>l().r01),E=M(()=>l().r01c),ee=M(()=>l().r02),u=M(()=>l().r02c);l();function J(){confirm(`\u786E\u8BA4\u8981\u5220\u9664\u6280\u80FD\u6A21\u677F"${e.itemState.name}"\u5417\uFF1F`)&&t("close")}function te(){n.editor=!0,n.name=e.itemState.name}function be(){const r=n.name;if(n.editor=!1,n.name="",!r)return;const C=e.itemState;C.name=r,t("update:itemState",C)}function $e(){n.desc.f=!0,n.desc.v=e.itemState.desc}function ge(){const r=n.desc.v;if(n.desc.f=!1,n.desc.v="",!r)return;const C=e.itemState;C.desc=r,t("update:itemState",C)}function fe(){t("up")}function y(){t("down")}function w(){t("copy")}return{vars:n,values:g,result:f,satt:F,r01:T,r01c:E,r02:ee,r02c:u,onClose:J,onRename:te,onNameEnter:be,onEditDesc:$e,onDescEnter:ge,onUp:fe,onDown:y,onCopy:w}}});const x=e=>(ve("data-v-42477edf"),e=e(),me(),e),ss={class:"row"},ns={class:"col-item"},os=x(()=>s("div",{class:"label"},"\u6280\u80FD\u3001\u666E\u653B",-1)),as=O(" \u6280\u80FD\u3001\u666E\u653B\u500D\u7387 "),ls={class:"input-group"},us=["step"],is=x(()=>s("div",{class:"input-ext"},"\u500D",-1)),ds={class:"label"},rs={class:"input-group"},cs=x(()=>s("div",{style:{clear:"both"}},null,-1)),ps={class:"col-item"},vs=x(()=>s("div",{class:"label"},"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB",-1)),ms=O(" \u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u500D\u7387 "),fs={class:"input-group"},_s=["step"],hs=x(()=>s("div",{class:"input-ext"},"\u500D",-1)),bs={class:"label"},$s={class:"input-group"},gs={class:"col-item"},Fs=x(()=>s("div",{class:"label"},"\u6700\u7EC8\u653B\u51FB",-1)),ys={class:"static-control text-center"},Cs={class:"darkgold"},Bs=x(()=>s("div",{style:{clear:"both"}},null,-1)),ws={class:"label"},ks={class:"bold darkgold"},Ds=x(()=>s("span",{class:"bold red"},"(\u66B4\u51FB)",-1)),Es={class:"static-control text-center"},Ss={class:"bold darkgold"},Ms={class:"bold red"},Us={class:"label bold"},As={class:"static-control text-center"},Is={class:"bold darkgold"},Vs={key:0,class:"bold red"};function Hs(e,t,n,_,f,m){const i=A("IconCopy"),B=A("IconUp"),k=A("IconDown"),D=A("IconClose"),d=A("Divider"),$=A("Tooltip"),V=A("CalcInput"),G=Te("autofocus");return v(),h(q,null,[o(d,{orientation:"left"},{action:p(()=>[s("span",{onClick:t[8]||(t[8]=(...c)=>e.onCopy&&e.onCopy(...c))},[o(i,{class:"close"})]),e.showUp?(v(),h("span",{key:0,onClick:t[9]||(t[9]=(...c)=>e.onUp&&e.onUp(...c))},[o(B,{class:"close"})])):Y("",!0),e.showDown?(v(),h("span",{key:1,onClick:t[10]||(t[10]=(...c)=>e.onDown&&e.onDown(...c))},[o(k,{class:"close"})])):Y("",!0),s("span",{onClick:t[11]||(t[11]=(...c)=>e.onClose&&e.onClose(...c))},[o(D,{class:"close"})])]),default:p(()=>[e.vars.editor?P((v(),h("input",{key:0,class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=c=>e.vars.name=c),onKeypress:t[1]||(t[1]=Ce((...c)=>e.onNameEnter&&e.onNameEnter(...c),["enter"])),onBlur:t[2]||(t[2]=(...c)=>e.onNameEnter&&e.onNameEnter(...c))},null,544)),[[X,e.vars.name],[G]]):(v(),h("span",{key:1,class:"calc-item-title",onClick:t[3]||(t[3]=(...c)=>e.onRename&&e.onRename(...c))},S(e.itemState.name||"\u6A21\u677F"),1)),e.vars.desc.f?P((v(),h("input",{key:2,class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=c=>e.vars.desc.v=c),onKeypress:t[5]||(t[5]=Ce((...c)=>e.onDescEnter&&e.onDescEnter(...c),["enter"])),onBlur:t[6]||(t[6]=(...c)=>e.onDescEnter&&e.onDescEnter(...c))},null,544)),[[X,e.vars.desc.v],[G]]):(v(),h("span",{key:3,class:"calc-item-desc",onClick:t[7]||(t[7]=(...c)=>e.onEditDesc&&e.onEditDesc(...c))},S(e.itemState.desc||"\u6CA1\u6709\u63CF\u8FF0"),1))]),_:1}),s("div",ss,[s("div",ns,[o($,{dir:"top"},{label:p(()=>[os]),default:p(()=>[as]),_:1}),s("div",ls,[P(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":t[12]||(t[12]=c=>e.values.a1=c)},null,8,us),[[X,e.values.a1,void 0,{number:!0}]]),is])]),(v(),h(q,null,R([{name:"att",label:"\u653B\u51FB%",tip:"\u4F5C\u7528\u4E8E\u6240\u6709\u60C5\u51B5"},{name:"da",label:"A\u7C7B\u589E\u4F24%",tip:"\u9970\u54C1\u3001\u5404\u7C7Bbuff\u3001\u5929\u8D4B"},{name:"db",label:"B\u7C7B\u589E\u4F24%",tip:"\u661F\u8000\u3001\u661F\u76D8\u3001\u8BCD\u6761"},{name:"dx",label:"X\u7C7B\u589E\u4F24%",tip:"\u6700\u7EC8\u4FEE\u6B63\uFF0C\u5982\u4E00\u5B57\u7535\u65A9"},{name:"id",label:"\u7A7F\u900F%",tip:"\u65E0\u89C6\u9632\u5FA1"},{name:"cd",label:"\u66B4\u4F24%",tip:"\u66B4\u51FB\u4F24\u5BB3"}],c=>s("div",{class:"col-item",key:c.name},[o($,{dir:"top"},{label:p(()=>[s("div",ds,S(c.label),1)]),default:p(()=>[O(" "+S(c.tip),1)]),_:2},1024),s("div",rs,[o(V,{class:"input",modelValue:e.values[c.name],"onUpdate:modelValue":I=>e.values[c.name]=I,result:e.result[c.name],"onUpdate:result":I=>e.result[c.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),cs,s("div",ps,[o($,{dir:"top"},{label:p(()=>[vs]),default:p(()=>[ms]),_:1}),s("div",fs,[P(s("input",{type:"number",class:"input",min:"0",step:.1,"onUpdate:modelValue":t[13]||(t[13]=c=>e.values.a2=c)},null,8,_s),[[X,e.values.a2,void 0,{number:!0}]]),hs])]),(v(),h(q,null,R([{name:"dc",label:"C\u7C7B\u589E\u4F24%",tip:"\u8FDE\u51FB\u3001\u8FFD\u51FB\u3001\u53CD\u51FB\u589E\u4F24"},{name:"att2",label:"\u653B\u51FB\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u653B\u51FB\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"da2",label:"\u4F24\u5BB3\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u4F24\u5BB3\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u53CD\u51FB\u65F6"},{name:"defGain",label:"\u9632\u5FA1\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"},{name:"dx2",label:"X\u7C7B\u4FEE\u6B63%",tip:"\u6389\u8840\u540E\u9632\u5FA1\u4FEE\u6B63\uFF0C\u4E00\u822C\u5728\u8FFD\u51FB\u6216\u8FDE\u51FB\u65F6"}],c=>s("div",{class:"col-item",key:c.name},[o($,{dir:"top"},{label:p(()=>[s("div",bs,S(c.label),1)]),default:p(()=>[O(" "+S(c.tip),1)]),_:2},1024),s("div",$s,[o(V,{class:"input",modelValue:e.values[c.name],"onUpdate:modelValue":I=>e.values[c.name]=I,result:e.result[c.name],"onUpdate:result":I=>e.result[c.name]=I},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])])])),64)),s("div",gs,[Fs,s("div",ys,[s("span",Cs,S(e.satt),1)])]),Bs,(v(!0),h(q,null,R([{label:"\u4E00\u6BB5\u4F24\u5BB3",v:e.r01,v2:e.r01c},{label:"\u4E8C\u6BB5\u4F24\u5BB3",v:e.r02,v2:e.r02c}],(c,I)=>(v(),h("div",{class:"col-item",key:I},[s("div",ws,[s("span",ks,S(c.label),1),Ds]),s("div",Es,[s("span",Ss,S(c.v),1),s("span",Ms,"("+S(c.v2)+")",1)])]))),128)),(v(!0),h(q,null,R([{label:"\u4E0D\u66B4\u51FB",value:e.r01+e.r02},{label:"\u4E00\u6BB5\u66B4\u51FB",value:e.r01c+e.r02},{label:"\u4E8C\u6BB5\u66B4\u51FB",value:e.r01+e.r02c},{label:"\u5168\u66B4\u51FB",value:e.r01c+e.r02c}],(c,I)=>(v(),h("div",{class:"col-item",key:I},[s("div",Us,S(c.label),1),s("div",As,[s("span",Is,S(c.value),1),(+e.enemyState.hp||0)<=c.value?(v(),h("span",Vs," \u51FB\u6740 ")):Y("",!0)])]))),128))])],64)}const Ps=j(ts,[["render",Hs],["__scopeId","data-v-42477edf"]]),qs=["onClick"],Ts=W({__name:"dropdown",props:{pos:{default:"lt"}},setup(e){const t=K(!1),n=()=>{t.value=!0},_=()=>{t.value=!1};return window.addEventListener("click",_,!1),lt(()=>{window.removeEventListener("click",_,!1)}),(f,m)=>(v(),h("div",{class:le(["dropdown",[{active:t.value}]]),onClick:ae(n,["stop"])},[L(f.$slots,"default",{},void 0,!0),s("div",{class:le(["dropdown-popover",["dropdown-"+e.pos]]),onClick:m[0]||(m[0]=ae(()=>{},["stop"]))},[L(f.$slots,"popover",{onClose:_},void 0,!0)],2)],10,qs))}});const Ke=j(Ts,[["__scopeId","data-v-3bf2fdb0"]]);Ke.install=e=>{e.component("dropdown",Ge)};const Ge=Ke,Ns=W({components:{CalcItem:Ps,CalcInput:De,Tooltip:Ee,Dropdown:Ge},props:{data:{type:Object,required:!0}},emits:["update:data"],setup(e,{emit:t}){const n=M(()=>e.data.basic),_=M(()=>e.data.state),f=M(()=>e.data.enemyState),m=M(()=>e.data.items),i=Z(zt()),B=Z({hp:0,def:0,defGain:0,ra:0,rb:0}),k=[{label:"\u9762\u677F\u653B\u51FB",name:"w",step:1,align:"right"},{label:"\u9B42\u77F3\u653B\u51FB",name:"a",step:1},{label:"\u8BCD\u6761\u653B\u51FB%",name:"c",step:1},{label:"\u661F\u4E4B\u6676\u653B\u51FB",name:"x",step:1}],D=[{label:"\u6C14\u8840",name:"hp",step:1},{label:"\u9632\u5FA1",name:"def",step:1},{label:"\u9632\u5FA1\u4FEE\u6B63%",name:"defGain",step:1},{label:"A\u7C7B\u514D\u4F24%",name:"ra",step:1},{label:"B\u7C7B\u514D\u4F24%",name:"rb",step:1}],d=()=>{const F=n.value.c/100;n.value.g=Math.ceil(i.a+n.value.w*F+n.value.x),_.value.att=n.value.w+n.value.g},$=async()=>{t("update:data",e.data)},V=(F,b)=>{b==="panel"&&d(),$()},G=(F,b)=>{const l=e.data.items;!l||(l[b]=F,$())},c=()=>{const F=e.data.items;!F||(F.push(je()),$())},I=F=>{const b=e.data.items;!b||(b.splice(F,1),$())},Q=F=>{const b=e.data.items;if(!b)return;const l=b[F],T=b[F-1];b[F-1]=l,b[F]=T,$()},z=F=>{const b=e.data.items;if(!b)return;const l=b[F],T=b[F+1];b[F+1]=l,b[F]=T,$()},g=F=>{const b=e.data.items;if(!b)return;const l=b[F];b.push(he.cloneDeep(l)),$()};return qe(()=>[e.data.basic.w],()=>{d()}),{panel:n,state:_,enemyState:f,panelResult:i,enemyStateResult:B,panelModels:k,enemyModels:D,update:V,items:m,updateItemState:G,addItem:c,delItem:I,upItem:Q,downItem:z,copyItem:g}}});const oe=e=>(ve("data-v-910b1719"),e=e(),me(),e),Rs=oe(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u57FA\u672C\u53C2\u6570")],-1)),Os={class:"row"},js={class:"label"},Ks={class:"input-group"},Gs=["step","onUpdate:modelValue","onChange"],Ls=["value"],Qs={class:"col-item"},zs=oe(()=>s("div",{class:"label"},"\u8FDB\u56FE\u653B\u51FB",-1)),Js={class:"static-control text-center"},Ws={class:"darkgold"},Xs={class:"col-item"},Zs=oe(()=>s("div",{class:"label"},"\u514B\u5236%",-1)),Ys=O(" \u514B\u523630%"),xs=oe(()=>s("br",null,null,-1)),en=O("\u88AB\u514B\u5236-25%"),tn=oe(()=>s("br",null,null,-1)),sn=O("\u6FC0\u836150% "),nn=["onClick"],on=oe(()=>s("div",{class:"heading"},[s("div",{class:"heading-title"},"\u654C\u4EBA\u9762\u677F")],-1)),an={class:"row"},ln={class:"label"},un={class:"input-group"},dn={key:0,class:"input-ext"},rn={class:"heading"},cn=oe(()=>s("div",{class:"heading-title"},"\u6280\u80FD\u6A21\u677F",-1)),pn={class:"heading-actions"};function vn(e,t,n,_,f,m){const i=A("CalcInput"),B=A("Tooltip"),k=A("Dropdown"),D=A("CalcItem");return v(),h("div",null,[Rs,s("div",Os,[(v(!0),h(q,null,R(e.panelModels,d=>(v(),h("div",{class:"col-item",key:d.name},[s("div",js,S(d.label),1),s("div",Ks,[d.name in e.panelResult?(v(),ue(i,{key:0,modelValue:e.panel[d.name],"onUpdate:modelValue":$=>e.panel[d.name]=$,result:e.panelResult[d.name],"onUpdate:result":$=>e.panelResult[d.name]=$,onChange:$=>e.update(d.name,"panel")},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"])):P((v(),h("input",{key:1,type:"number",class:"input",style:ke({textAlign:d.align}),min:"0",step:d.step,"onUpdate:modelValue":$=>e.panel[d.name]=$,onChange:$=>e.update(d.name,"panel")},null,44,Gs)),[[X,e.panel[d.name],void 0,{number:!0}]]),d.name==="w"?(v(),h("input",{key:2,class:"input green",readonly:"",style:{textAlign:"left"},value:`+${e.panel.g}`},null,8,Ls)):Y("",!0)])]))),128)),s("div",Qs,[zs,s("div",Js,[s("span",Ws,S(e.state.att),1)])]),s("div",Xs,[o(B,{dir:"top"},{label:p(()=>[Zs]),default:p(()=>[Ys,xs,en,tn,sn]),_:1}),s("div",null,[o(k,null,{popover:p(({onClose:d})=>[s("div",{class:"list",onClick:()=>{d(),e.update("k","state")}},[s("div",{class:"list-item",onClick:t[2]||(t[2]=$=>e.state.k=0)},"\u666E\u901A"),s("div",{class:"list-item",onClick:t[3]||(t[3]=$=>e.state.k=30)},"\u514B\u5236"),s("div",{class:"list-item",onClick:t[4]||(t[4]=$=>e.state.k=-25)},"\u88AB\u514B\u5236"),s("div",{class:"list-item",onClick:t[5]||(t[5]=$=>e.state.k=50)},"\u6FC0\u8361")],8,nn)]),default:p(()=>[P(s("input",{class:"input",type:"number","onUpdate:modelValue":t[0]||(t[0]=d=>e.state.k=d),onChange:t[1]||(t[1]=d=>e.update("k","state")),list:"d1"},null,544),[[X,e.state.k,void 0,{number:!0}]])]),_:1})])])]),on,s("div",an,[(v(!0),h(q,null,R(e.enemyModels,d=>(v(),h("div",{class:"col-item",key:d.name},[s("div",ln,S(d.label),1),s("div",un,[o(i,{modelValue:e.enemyState[d.name],"onUpdate:modelValue":$=>e.enemyState[d.name]=$,result:e.enemyStateResult[d.name],"onUpdate:result":$=>e.enemyStateResult[d.name]=$,onChange:$=>e.update(d.name)},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result","onChange"]),d.precent?(v(),h("div",dn,"%")):Y("",!0)])]))),128))]),s("div",rn,[cn,s("div",pn,[s("div",{class:"btn btn-primary btn-sm",onClick:t[6]||(t[6]=(...d)=>e.addItem&&e.addItem(...d))},"\u6DFB\u52A0")])]),(v(!0),h(q,null,R(e.items,(d,$)=>(v(),ue(D,{key:d,panel:e.panel,state:e.state,enemyState:e.enemyStateResult,itemState:d,showUp:$>0,showDown:e.items&&$<e.items.length-1,"onUpdate:itemState":V=>e.updateItemState(V,$),onClose:V=>e.delItem($),onUp:V=>e.upItem($),onDown:V=>e.downItem($),onCopy:V=>e.copyItem($)},null,8,["panel","state","enemyState","itemState","showUp","showDown","onUpdate:itemState","onClose","onUp","onDown","onCopy"]))),128))])}const mn=j(Ns,[["render",vn],["__scopeId","data-v-910b1719"]]),fn=W({props:{show:Boolean,list:Array,class:String,height:String},emits:["click","close","update:show"],setup(e,{emit:t}){return{wrapClass:M(()=>["c-action-sheet-wrapper",e.class,{show:e.show}]),onClick:(m,i)=>{t("click",{item:m,index:i}),t("close",!1)},onClose:()=>{t("update:show",!1),t("close",!1)}}}});const _n={class:"c-action-sheet-section"},hn={class:"c-action-sheet-extra"},bn={class:"c-action-sheet-list"},$n=["onClick"];function gn(e,t,n,_,f,m){return v(),ue(ut,{to:"body"},[s("div",{class:le(e.wrapClass)},[s("div",{class:"c-action-sheet-mask",onClick:t[0]||(t[0]=(...i)=>e.onClose&&e.onClose(...i))}),s("div",_n,[s("div",{class:"c-action-sheet-body",style:ke({maxHeight:e.height})},[s("div",hn,[L(e.$slots,"extra")]),s("div",bn,[(v(!0),h(q,null,R(e.list,(i,B)=>(v(),h("div",{class:"c-action-sheet-item",key:B,onClick:k=>e.onClick(i,B)},[L(e.$slots,"default",{record:i})],8,$n))),128))])],4)])],2)])}const we=j(fn,[["render",gn]]);we.install=e=>{e.component("action-sheet",we)};const Fn={class:"hero-item"},yn=["src","alt","title"],Cn={class:"hero-item-label"},Bn=W({__name:"HeroSelect",props:{show:{type:Boolean}},emits:["click","update:show"],setup(e,{emit:t}){const{heroes:n,getHeroIcon:_}=mt(),f=m=>{t("click",m)};return(m,i)=>(v(),ue(a(we),{class:"hero-select",show:e.show,list:a(n),height:"80vh",onClick:f,"onUpdate:show":i[0]||(i[0]=B=>m.$emit("update:show",B))},{extra:p(()=>[L(m.$slots,"extra")]),default:p(({record:B})=>[s("div",Fn,[s("img",{src:a(_)(B),alt:B.name,title:B.name,width:"128",height:"128"},null,8,yn),s("div",Cn,S(B.name),1)])]),_:3},8,["show","list"]))}});const wn=W({props:{header:String,activeKey:Boolean},emits:["update:activeKey","toggle"],setup(e,{emit:t}){const n=M({get:()=>e.activeKey,set:f=>{t("update:activeKey",f)}});return{active:n,toggle:()=>{const f=!n.value;n.value=f,t("toggle",f)}}}});const kn=e=>(ve("data-v-829ec263"),e=e(),me(),e),Dn=kn(()=>s("div",{class:"panel-icon"},[s("svg",{width:"16",height:"16",viewBox:"-16 -16 32 32"},[s("path",{d:"M6 0 l-12 -12 l0 2 l10 10 l-10 10 l0 2 l12 -12z",fill:"currentColor"})])],-1)),En={class:"panel-title"},Sn={class:"panel-body"},Mn={class:"panel-content"};function Un(e,t,n,_,f,m){return v(),h("div",{class:le(["panel",{active:e.active}])},[s("div",{class:"panel-header",onClick:t[1]||(t[1]=(...i)=>e.toggle&&e.toggle(...i))},[Dn,s("div",En,[L(e.$slots,"header",{},()=>[O(S(e.header)+"\xA0",1)],!0)]),s("div",{class:"panel-actions",onClick:t[0]||(t[0]=ae(()=>{},["stop"]))},[L(e.$slots,"actions",{},void 0,!0)])]),s("div",Sn,[s("div",Mn,[L(e.$slots,"default",{},void 0,!0)])])],2)}const An=j(wn,[["render",Un],["__scopeId","data-v-829ec263"]]);function In(){const e="red_team",t=it(),n=K([]),_=async k=>await t.put(e,k).then(D=>{if(n.value.findIndex(d=>d._id===D)===-1){const d=he.cloneDeep(k);d._id=D,n.value.push(d)}return D}),f=async k=>await t.delete(e,k._id).then(()=>{n.value=n.value.filter(D=>D._id!==k._id)}),m=async k=>{const D=JSON.parse(await k.text());if(!Ne(D)||D.type!=="red_team"){alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}const d=D.data;for(const $ of d)await _($)},i=async()=>{const k={type:"red_team",data:n.value},D=new Blob([JSON.stringify(k)],{type:"application/json"});Be(D,"red_team.json")};return(async()=>{const k=await t.getAll(e).catch(()=>[]);console.log(k),n.value=k})(),{put:_,del:f,list:n,importData:m,exportData:i}}function Vn(){const e=()=>({name:"",qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0,stoneName:"",hsQixue:0,hsPatt:0,hsPdef:0,hsMatt:0,hsMdef:0,hsHuixin:0,xQixue:0,xPatt:0,xPdef:0,xMatt:0,xMdef:0,xHuixin:0,cQixue:"40+5+5+5",cPatt:"0",cPdef:"0",cMatt:"0",cMdef:"0",cHuixin:"0",rQixue:0,rPatt:0,rPdef:0,rMatt:0,rMdef:0,rHuixin:0}),t=K(e()),n=M(()=>{const m={qixue:0,patt:0,pdef:0,matt:0,mdef:0,huixin:0},i=Re.find(k=>t.value.stoneName===k.name);i&&(m.qixue=i.t[0]+i.d[0]+i.h[0],m.patt=i.t[1]+i.d[1]+i.h[1],m.matt=i.t[2]+i.d[2]+i.h[2],m.pdef=i.t[3]+i.d[3]+i.h[3],m.mdef=i.t[4]+i.d[4]+i.h[4]);const B={qixue:t.value.hsQixue/100,patt:t.value.hsPatt/100,pdef:t.value.hsPdef/100,matt:t.value.hsMatt/100,mdef:t.value.hsMdef/100,huixin:t.value.hsHuixin/100};return{qixue:Math.round(t.value.qixue*B.qixue+m.qixue+t.value.xQixue),patt:Math.round(t.value.patt*B.patt+m.patt+t.value.xPatt),pdef:Math.round(t.value.pdef*B.pdef+m.pdef+t.value.xPdef),matt:Math.round(t.value.matt*B.matt+m.matt+t.value.xMatt),mdef:Math.round(t.value.mdef*B.mdef+m.mdef+t.value.xMdef),huixin:Math.round(t.value.huixin*B.huixin+m.huixin+t.value.xHuixin)}}),_=M(()=>{const m=n.value,i={qixue:(100+t.value.rQixue)/100,patt:(100+t.value.rPatt)/100,pdef:(100+t.value.rPdef)/100,matt:(100+t.value.rMatt)/100,mdef:(100+t.value.rMdef)/100,huixin:(100+t.value.rHuixin)/100};return{qixue:Math.round((t.value.qixue+m.qixue)*i.qixue),patt:Math.round((t.value.patt+m.patt)*i.patt),pdef:Math.round((t.value.pdef+m.pdef)*i.pdef),matt:Math.round((t.value.matt+m.matt)*i.matt),mdef:Math.round((t.value.mdef+m.mdef)*i.mdef),huixin:Math.round((t.value.huixin+m.huixin)*i.huixin)}});return{state:t,pValue:n,ckValue:_,reset:()=>{t.value=e()},defState:e}}const Hn={},Pn={class:"c-upload"};function qn(e,t){return v(),h("div",Pn,[L(e.$slots,"default",{},void 0,!0),s("input",dt({type:"file",class:"c-upload-input",accept:"application/json"},e.$attrs),null,16)])}const Tn=j(Hn,[["render",qn],["__scopeId","data-v-b3879154"]]),U=e=>(ve("data-v-65f1a23b"),e=e(),me(),e),Nn={class:"transform-tools-popover"},Rn={class:"transform-tools-popover-toolbar"},On=["value"],jn=["value"],Kn=U(()=>s("button",{class:"btn btn-sm btn-success"},"\u5BFC\u5165",-1)),Gn={class:"transform-tools-popover-content"},Ln={class:"grid-group"},Qn={class:"grid-group-item"},zn={class:"input-group-title"},Jn=U(()=>s("span",null,"\u57FA\u7840",-1)),Wn={class:"grids"},Xn=U(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),Zn=U(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),Yn=U(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),xn=U(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),eo=U(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),to=U(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),so={class:"grid-group-item"},no={class:"input-group-title"},oo=U(()=>s("span",null,"\u9B42\u77F3",-1)),ao=U(()=>s("option",{value:""},"\u65E0",-1)),lo=["value"],uo={class:"grids"},io=U(()=>s("label",{class:"input-label"},"\u6C14\u8840%",-1)),ro=U(()=>s("label",{class:"input-label"},"\u7269\u653B%",-1)),co=U(()=>s("label",{class:"input-label"},"\u7269\u9632%",-1)),po=U(()=>s("label",{class:"input-label"},"\u6CD5\u653B%",-1)),vo=U(()=>s("label",{class:"input-label"},"\u6CD5\u9632%",-1)),mo={class:"grid-group-item"},fo={class:"input-group-title"},_o=O(" \u661F\u4E4B\u6676 "),ho=U(()=>s("div",null,"\u6781\u9650\u653B\uFF1A202\u653B\uFF0C198\u8840\uFF0C70\u9632",-1)),bo=U(()=>s("div",null,"\u6781\u9650\u8840\uFF1A456\u8840\uFF0C70\u9632\uFF0C88\u653B",-1)),$o=U(()=>s("div",null,"\u6781\u9650\u9632\uFF1A150\u9632\uFF0C198\u8840\uFF0C88\u653B",-1)),go={class:"grids"},Fo=U(()=>s("label",{class:"input-label"},"\u6C14\u8840",-1)),yo=U(()=>s("label",{class:"input-label"},"\u7269\u653B",-1)),Co=U(()=>s("label",{class:"input-label"},"\u7269\u9632",-1)),Bo=U(()=>s("label",{class:"input-label"},"\u6CD5\u653B",-1)),wo=U(()=>s("label",{class:"input-label"},"\u6CD5\u9632",-1)),ko=U(()=>s("label",{class:"input-label"},"\u4F1A\u5FC3",-1)),Do={class:"grid-group-item"},Eo=U(()=>s("div",{class:"input-group-title"},"\u9762\u677F",-1)),So={class:"grids"},Mo={class:"input-label"},Uo={class:"input-group"},Ao={class:"input green"},Io={class:"grid-group-item"},Vo=U(()=>s("div",{class:"input-group-title"},"\u4FEE\u6B63",-1)),Ho={class:"grids"},Po={class:"input-label"},qo={class:"grid-group-item"},To=U(()=>s("div",{class:"input-group-title"},"\u53C2\u8003",-1)),No={class:"grids"},Ro={class:"input-label"},Oo=["value"],jo=W({__name:"transform-tools-modal",props:{show:{type:Boolean}},emits:["init","reference","update:show"],setup(e,{emit:t}){const{state:n,pValue:_,ckValue:f,reset:m,defState:i}=Vn(),{list:B,put:k,del:D,importData:d,exportData:$}=In(),V=[{t:"\u6C14\u8840",n:"qixue"},{t:"\u7269\u653B",n:"patt"},{t:"\u7269\u9632",n:"pdef"},{t:"\u6CD5\u653B",n:"matt"},{t:"\u6CD5\u9632",n:"mdef"},{t:"\u4F1A\u5FC3",n:"huixin"}],G=[{t:"\u6C14\u8840%",c:"cQixue",r:"rQixue"},{t:"\u7269\u653B%",c:"cPatt",r:"rPatt"},{t:"\u7269\u9632%",c:"cPdef",r:"rPdef"},{t:"\u6CD5\u653B%",c:"cMatt",r:"rMatt"},{t:"\u6CD5\u9632%",c:"cMdef",r:"rMdef"},{t:"\u4F1A\u5FC3%",c:"cHuixin",r:"rHuixin"}],c=()=>{const b=he.cloneDeep(n.value);k(b).then(l=>{n.value._id=l,alert("\u5DF2\u4FDD\u5B58")}).catch(()=>{alert("\u4FDD\u5B58\u5931\u8D25")})},I=()=>{!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F")||D(n.value).then(()=>{m()}).catch(()=>{alert("\u5220\u9664\u5931\u8D25")})},Q=b=>{const l=b.currentTarget,T=Array.prototype.slice.call(l.files);l.value="",T[0]&&d(T[0])},z=()=>{$()},g=(b,l)=>{n.value.name=b,n.value.qixue=l.qixue,n.value.patt=l.patt,n.value.pdef=l.pdef,n.value.matt=l.matt,n.value.mdef=l.mdef,n.value.huixin=l.huixin},F=()=>{t("reference")};return t("init",g),(b,l)=>{const T=A("c-col"),E=A("c-space"),ee=A("c-row");return P((v(),h("div",Nn,[s("div",Rn,[o(ee,{flex:"",middle:"",gutter:8},{default:p(()=>[o(T,null,{default:p(()=>[s("button",{class:"btn btn-sm btn-link",onClick:F}," \u53C2\u8003 ")]),_:1}),o(T,null,{default:p(()=>[O("ID: "+S(a(n)._id),1)]),_:1}),o(T,{flex:"1 1 auto"},{default:p(()=>[o(E,null,{default:p(()=>[P(s("select",{class:"input input-select",placeholder:"\u8BF7\u9009\u62E9\u5DF2\u6709\u6A21\u677F","onUpdate:modelValue":l[0]||(l[0]=u=>ct(n)?n.value=u:null)},[s("option",{value:a(i)()},"\u7A7A\u6A21\u7248",8,On),(v(!0),h(q,null,R(a(B),u=>(v(),h("option",{key:u._id,value:u},S(u.name),9,jn))),128))],512),[[Ie,a(n)]]),s("button",{class:"btn btn-sm btn-primary",onClick:c},"\u4FDD\u5B58"),a(n)._id?(v(),h("button",{key:0,class:"btn btn-sm btn-danger",onClick:I}," \u5220\u9664 ")):Y("",!0),o(Tn,{onInput:Q},{default:p(()=>[Kn]),_:1}),s("button",{class:"btn btn-sm btn-success",onClick:z}," \u5BFC\u51FA ")]),_:1})]),_:1}),o(T,null,{default:p(()=>[s("span",{class:"transform-tools-popover-close",onClick:l[1]||(l[1]=u=>t("update:show",!1))}," \xD7 ")]),_:1})]),_:1})]),s("div",Gn,[s("div",Ln,[s("div",Qn,[s("div",zn,[o(E,null,{default:p(()=>[Jn,P(s("input",{type:"text",class:"input input-text","onUpdate:modelValue":l[2]||(l[2]=u=>a(n).name=u)},null,512),[[X,a(n).name]])]),_:1})]),s("div",Wn,[o(E,null,{default:p(()=>[Xn,o(a(H),{value:a(n).qixue,"onUpdate:value":l[3]||(l[3]=u=>a(n).qixue=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[Zn,o(a(H),{value:a(n).patt,"onUpdate:value":l[4]||(l[4]=u=>a(n).patt=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[Yn,o(a(H),{value:a(n).pdef,"onUpdate:value":l[5]||(l[5]=u=>a(n).pdef=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[xn,o(a(H),{value:a(n).matt,"onUpdate:value":l[6]||(l[6]=u=>a(n).matt=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[eo,o(a(H),{value:a(n).mdef,"onUpdate:value":l[7]||(l[7]=u=>a(n).mdef=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[to,o(a(H),{value:a(n).huixin,"onUpdate:value":l[8]||(l[8]=u=>a(n).huixin=u)},null,8,["value"])]),_:1})])]),s("div",so,[s("div",no,[o(E,null,{default:p(()=>[oo,P(s("select",{class:"input input-select","onUpdate:modelValue":l[9]||(l[9]=u=>a(n).stoneName=u)},[ao,(v(!0),h(q,null,R(a(Re),(u,J)=>(v(),h("option",{key:J,value:u.name},S(u.name),9,lo))),128))],512),[[Ie,a(n).stoneName]])]),_:1})]),s("div",uo,[o(E,null,{default:p(()=>[io,o(a(H),{value:a(n).hsQixue,"onUpdate:value":l[10]||(l[10]=u=>a(n).hsQixue=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[ro,o(a(H),{value:a(n).hsPatt,"onUpdate:value":l[11]||(l[11]=u=>a(n).hsPatt=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[co,o(a(H),{value:a(n).hsPdef,"onUpdate:value":l[12]||(l[12]=u=>a(n).hsPdef=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[po,o(a(H),{value:a(n).hsMatt,"onUpdate:value":l[13]||(l[13]=u=>a(n).hsMatt=u)},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[vo,o(a(H),{value:a(n).hsMdef,"onUpdate:value":l[14]||(l[14]=u=>a(n).hsMdef=u)},null,8,["value"])]),_:1})])]),s("div",mo,[s("div",fo,[_o,o(a(Ee),{label:"?",inline:"",dir:"right"},{default:p(()=>[ho,bo,$o]),_:1})]),s("div",go,[o(E,null,{default:p(()=>[Fo,o(a(H),{value:a(n).xQixue,"onUpdate:value":l[15]||(l[15]=u=>a(n).xQixue=u),min:0,max:456,placeholder:"0~456"},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[yo,o(a(H),{value:a(n).xPatt,"onUpdate:value":l[16]||(l[16]=u=>a(n).xPatt=u),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[Co,o(a(H),{value:a(n).xPdef,"onUpdate:value":l[17]||(l[17]=u=>a(n).xPdef=u),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[Bo,o(a(H),{value:a(n).xMatt,"onUpdate:value":l[18]||(l[18]=u=>a(n).xMatt=u),min:0,max:202,placeholder:"0~202"},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[wo,o(a(H),{value:a(n).xMdef,"onUpdate:value":l[19]||(l[19]=u=>a(n).xMdef=u),min:0,max:150,placeholder:"0~150"},null,8,["value"])]),_:1}),o(E,null,{default:p(()=>[ko,o(a(H),{value:a(n).xHuixin,"onUpdate:value":l[20]||(l[20]=u=>a(n).xHuixin=u),min:0,max:104,placeholder:"0~104"},null,8,["value"])]),_:1})])]),s("div",Do,[Eo,s("div",So,[(v(),h(q,null,R(V,u=>o(E,{key:u.n},{default:p(()=>[s("label",Mo,S(u.t),1),s("div",Uo,[o(a(H),{readonly:"",value:a(n)[u.n]},null,8,["value"]),s("div",Ao,"+"+S(a(_)[u.n]),1)])]),_:2},1024)),64))])]),s("div",Io,[Vo,s("div",Ho,[(v(),h(q,null,R(G,(u,J)=>o(E,{key:J},{default:p(()=>[s("label",Po,S(u.t),1),o(a(De),{modelValue:a(n)[u.c],"onUpdate:modelValue":te=>a(n)[u.c]=te,result:a(n)[u.r],"onUpdate:result":te=>a(n)[u.r]=te},null,8,["modelValue","onUpdate:modelValue","result","onUpdate:result"])]),_:2},1024)),64))])]),s("div",qo,[To,s("div",No,[(v(),h(q,null,R(V,u=>o(E,{key:u.n},{default:p(()=>[s("label",Ro,S(u.t),1),s("input",{class:"input",readonly:"",value:a(f)[u.n]},null,8,Oo)]),_:2},1024)),64))])])])])],512)),[[rt,e.show]])}}});const Ko=j(jo,[["__scopeId","data-v-65f1a23b"]]),Go=W({components:{Calculator:mn,CollapsePanel:An,InputNumber:ft,HeroSelect:Bn,IconCopy:Oe,IconEdit:Ot,TransformToolsModal:Ko},setup(){const e=Z({index:-1,title:"",selecteds:[]}),t=K([]),n=async()=>{const w={id:He(),title:"\u6A21\u677F",basic:Qt(),state:Jt(),enemyState:Zt(),items:Xt()};await Lt(w),t.value.push(w)},_=async y=>{if(!confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"))return;const r=t.value[y];await Pe(r.id),t.value.splice(y,1)},f=async y=>{const w=t.value[y];if(!w)return;const r=e.title;if(!r){m();return}w.title=r,m(),await ce(w)},m=()=>{e.index=-1,e.title=""},i=y=>{const w={type:"calculator",data:[y]},r=new Blob([JSON.stringify(w)],{type:"application/json"});Be(r,`${y.title}.json`)},B=async y=>{t.value=y},k=K(""),D=y=>new Promise((w,r)=>{const C=new FileReader;C.onload=()=>{w(C.result)},C.onerror=()=>{r(C.error)},C.readAsText(y)}),d=async()=>{if(!!confirm("\u786E\u8BA4\u8981\u6E05\u7A7A\u6240\u6709\u6570\u636E\u5417\uFF1F")){if(e.selecteds.length>0){const w=e.selecteds.map(r=>t.value[r]);for(const r of w)await Pe(r.id)}else await Gt();fe()}},$=async y=>{const w=y.currentTarget,r=Array.prototype.slice.call(w.files);if(w.value="",!r||!r[0])return;const C=r[0],N=await D(C),se=JSON.parse(N);let de=[];if(ht(se))de=se;else if(Ne(se)&&se.type==="calculator")de=se.data;else{alert("\u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E");return}for(const ne of de){await ce(ne);const _e=t.value.findIndex(Fe=>Fe.id===ne.id);_e===-1?t.value.push(ne):t.value[_e]=ne}},V=async()=>{let y="calculator.json",w=t.value;e.selecteds.length>0&&(w=e.selecteds.map(N=>t.value[N]),y="calculator-selected.json");const r={type:"calculator",data:w},C=new Blob([JSON.stringify(r)],{type:"application/json"});Be(C,y)};async function G(y,w){!t.value[w]||(t.value[w]=y,await ce(y))}const c=K(-1),I=Z({input:"2283/1.35*1.39",result:0}),{translate:Q,xingyao:z,huazhen:g,xinghun:F,xinghui:b}=_t(),l=y=>Math.ceil(y),T=Z({show:!1}),E=y=>{const w=Q(y);ee.value&&ee.value(y.name,w)},ee=K(),u=K(!1),J=K(-1),te=K(null),be=y=>{u.value=!0,J.value=y},$e=({item:y})=>{u.value=!1;const w=J.value;if(w===-1)E(y);else{const C=t.value[w],N=Q(y);C.title==="\u6A21\u677F"&&(C.title=y.name),C.basic.w=Math.max(N.patt,N.matt),ce(C)}},ge=y=>{const w=he.cloneDeep(y);w.id=He(),console.log(w),t.value.push(w),ce(w)};async function fe(){const y=await Kt();e.selecteds=[],B(y)}return pt(()=>{fe()}),{vars:e,activeKey:c,quick:I,list:t,add:n,rename:f,renameClose:m,remove:_,itemExport:i,download:k,onUpdateData:G,clearAll:d,importData:$,exportData:V,heroes:vt,max:Math.max,modal:T,ceilResult:l,selectTpl:E,updateBasic:ee,selectShow:u,selectIndex:J,selectValue:te,openSelect:be,selectHero:$e,copyItem:ge,xingyao:z,huazhen:g,xinghun:F,xinghui:b}}});const ie=e=>(ve("data-v-a44b4640"),e=e(),me(),e),Lo={class:"wrapper"},Qo={class:"toolbar"},zo={style:{padding:"6px 16px"}},Jo=O("\u4F24\u5BB3\u8BA1\u7B97\u5668"),Wo={class:"c-upload"},Xo=ie(()=>s("button",{class:"btn btn-success"},"\u5BFC\u5165",-1)),Zo={style:{padding:"6px 16px"}},Yo={class:"input-group"},xo=ie(()=>s("div",{class:"input-ext"},"=",-1)),ea={class:"content"},ta={class:"container"},sa=["value"],na=O(" \u2007 "),oa=["onKeypress"],aa={key:1},la=["onClick"],ua=["onClick"],ia=["onClick"],da=O(" \u91CD\u547D\u540D "),ra=["onClick"],ca=O(" \u590D\u5236 "),pa=["onClick"],va=["onClick"],ma={style:{"text-align":"center"}},fa=ie(()=>s("span",null,"\u661F\u8000",-1)),_a=ie(()=>s("span",null,"\u5316\u81FB",-1)),ha=ie(()=>s("span",null,"\u661F\u9B42",-1)),ba=ie(()=>s("span",null,"\u661F\u8F89",-1));function $a(e,t,n,_,f,m){const i=A("c-col"),B=A("c-row"),k=A("transform-tools-modal"),D=A("calc-input"),d=A("input-number"),$=A("IconEdit"),V=A("IconCopy"),G=A("Calculator",!0),c=A("CollapsePanel"),I=A("c-space"),Q=A("HeroSelect"),z=Te("autofocus");return v(),h("div",Lo,[s("div",Qo,[s("div",zo,[o(B,{flex:"",middle:"",gutter:16},{default:p(()=>[o(i,{flex:"0 0 auto"},{default:p(()=>[Jo]),_:1}),o(i,{flex:"0 0 auto"},{default:p(()=>[s("button",{class:"btn btn-sm btn-link",onClick:t[0]||(t[0]=g=>e.modal.show=!e.modal.show)}," \u9762\u677F "),e.vars.selecteds.length>0?(v(),h("button",{key:0,class:"btn btn-success",onClick:t[1]||(t[1]=g=>e.vars.selecteds=[])}," \u53D6\u6D88\u6240\u9009 ")):Y("",!0)]),_:1}),o(i,{flex:"1 1 0"}),o(i,{flex:"0 0 auto"},{default:p(()=>[s("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...g)=>e.clearAll&&e.clearAll(...g))},S(e.vars.selecteds.length>0?"\u5220\u9664\u6240\u9009":"\u6E05\u7A7A"),1),s("div",Wo,[Xo,s("input",{type:"file",class:"c-upload-input",accept:"application/json",onInput:t[3]||(t[3]=(...g)=>e.importData&&e.importData(...g))},null,32)]),s("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...g)=>e.exportData&&e.exportData(...g))},S(e.vars.selecteds.length>0?"\u5BFC\u51FA\u6240\u9009":"\u5BFC\u51FA"),1),s("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=g=>e.add())},"\u6DFB\u52A0")]),_:1})]),_:1}),o(k,{show:e.modal.show,"onUpdate:show":t[6]||(t[6]=g=>e.modal.show=g),onReference:t[7]||(t[7]=g=>e.openSelect(-1)),onInit:t[8]||(t[8]=g=>e.updateBasic=g)},null,8,["show"])]),s("div",Zo,[s("div",Yo,[o(D,{modelValue:e.quick.input,"onUpdate:modelValue":t[9]||(t[9]=g=>e.quick.input=g),result:e.quick.result,"onUpdate:result":t[10]||(t[10]=g=>e.quick.result=g),style:{flex:"3 3 0"}},null,8,["modelValue","result"]),xo,o(d,{readonly:"",value:e.ceilResult(e.quick.result),style:{flex:"2 2 0"}},null,8,["value"])])])]),s("div",ea,[s("div",ta,[(v(!0),h(q,null,R(e.list,(g,F)=>(v(),ue(c,{key:g.id,activeKey:F===e.activeKey,onToggle:b=>e.activeKey=b?F:-1},{header:p(()=>[o(B,{flex:"",middle:""},{default:p(()=>[o(i,null,{default:p(()=>[P(s("input",{class:"c-switch",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=b=>e.vars.selecteds=b),value:F,onClick:t[12]||(t[12]=ae(()=>{},["stop"]))},null,8,sa),[[re,e.vars.selecteds]]),na]),_:2},1024),o(i,null,{default:p(()=>[e.vars.index===F?P((v(),h("input",{key:0,type:"text",class:"input","onUpdate:modelValue":t[13]||(t[13]=b=>e.vars.title=b),onClick:t[14]||(t[14]=ae(()=>{},["stop"])),onKeypress:Ce(b=>e.rename(F),["enter"])},null,40,oa)),[[X,e.vars.title],[z]]):(v(),h("span",aa,S(g.title),1))]),_:2},1024),o(i,{class:"ml-4",onClick:t[15]||(t[15]=ae(()=>{},["stop"]))},{default:p(()=>[e.vars.index===F?(v(),h("button",{key:0,class:"btn btn-sm btn-link",onClick:b=>e.rename(F)}," \u786E\u8BA4 ",8,la)):(v(),h(q,{key:1},[s("button",{class:"btn btn-sm btn-link",onClick:b=>e.openSelect(F)}," \u9009\u62E9 ",8,ua),s("button",{class:"btn btn-sm btn-link",onClick:b=>{e.vars.index=F,e.vars.title=g.title}},[o($,{class:"svg-icon"}),da],8,ia),s("button",{class:"btn btn-sm btn-link",onClick:b=>e.copyItem(g)},[o(V,{class:"svg-icon"}),ca],8,ra)],64))]),_:2},1024)]),_:2},1024)]),actions:p(()=>[s("button",{class:"btn btn-sm btn-success-outline",onClick:b=>e.itemExport(g)}," \u5BFC\u51FA ",8,pa),s("button",{class:"btn btn-sm btn-danger-outline",onClick:b=>e.remove(F)}," \u5220\u9664 ",8,va)]),default:p(()=>[F===e.activeKey?(v(),ue(G,{key:0,data:g,"onUpdate:data":b=>e.onUpdateData(b,F)},null,8,["data","onUpdate:data"])):Y("",!0)]),_:2},1032,["activeKey","onToggle"]))),128))])]),o(Q,{show:e.selectShow,"onUpdate:show":t[20]||(t[20]=g=>e.selectShow=g),onClick:e.selectHero},{extra:p(()=>[s("div",ma,[o(I,null,{default:p(()=>[s("label",null,[fa,P(s("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=g=>e.xingyao=g)},null,512),[[re,e.xingyao]])]),s("label",null,[_a,P(s("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=g=>e.huazhen=g)},null,512),[[re,e.huazhen]])]),s("label",null,[ha,P(s("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=g=>e.xinghun=g)},null,512),[[re,e.xinghun]])]),s("label",null,[ba,P(s("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=g=>e.xinghui=g)},null,512),[[re,e.xinghui]])])]),_:1})])]),_:1},8,["show","onClick"])])}const ka=j(Go,[["render",$a],["__scopeId","data-v-a44b4640"]]);export{ka as default};
