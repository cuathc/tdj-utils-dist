import{d as bt,h as P,a as le,i as dt,O as Rt,Z as St,$ as Mt,_ as ht,o as w,c as $,b as n,n as q,j as ut,p as R,W as xt,w as ot,G as Z,T as ie,y as gt,z as _t,f as X,m as ct,e as v,g as ye,a0 as It,v as lt,l as z,k as et,F as it,s as yt,x as ue,q as ce,D as Lt,V as de}from"./index.js";import{_ as pt}from"./lodash.js";import{u as pe,D as xe}from"./useHeroes.js";const $t=(e,y,C)=>{let h=0,u=0,l=0;e%=360;const a=Math.floor(e/60),m=e/60-a,_=C*(1-y),D=C*(1-y*m),S=C*(1-y*(1-m));switch(a){case 0:h=C,u=S,l=_;break;case 1:h=D,u=C,l=_;break;case 2:h=_,u=C,l=S;break;case 3:h=_,u=D,l=C;break;case 4:h=S,u=_,l=C;break;case 5:h=C,u=_,l=D;break}h=Math.floor(h*255),u=Math.floor(u*255),l=Math.floor(l*255);const O=("00"+h.toString(16)).slice(-2),L=("00"+u.toString(16)).slice(-2),E=("00"+l.toString(16)).slice(-2);return[e,y,C,h,u,l,"#"+O+L+E]},Ht=e=>{let y=0,C=0,h=0,u=0,l=0,a=0;if(/#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i.test(e))y=window.parseInt(RegExp.$1,16),C=window.parseInt(RegExp.$2,16),h=window.parseInt(RegExp.$3,16);else if(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i.test(e))y=window.parseInt(RegExp.$1,10),C=window.parseInt(RegExp.$2,10),h=window.parseInt(RegExp.$3,10);else return[0,0,0,0,0,0,"#000000"];u=y/255,l=C/255,a=h/255;let m=u;l>m&&(m=l),a>m&&(m=a);let _=u;l<_&&(_=l),a<_&&(_=a);let D=0,S=0,O=0;m===_?D=0:m===u&&l>=a?D=60*(l-a)/(m-_)+0:m===u&&l<a?D=60*(l-a)/(m-_)+360:m===l?D=60*(a-u)/(m-_)+120:m===a&&(D=60*(u-l)/(m-_)+240),m===0?S=0:S=1-_/m,O=m;const L=("00"+y.toString(16)).slice(-2),E=("00"+C.toString(16)).slice(-2),T=("00"+h.toString(16)).slice(-2);return[Math.floor(D),S,O,y,C,h,"#"+L+E+T]},fe=bt({name:"ColorPicker",emits:["update:modelValue"],props:{modelValue:{type:String,required:!0}},setup(e,{emit:y}){const C=P(!1),h=le({set:p=>{y("update:modelValue",p)},get:()=>e.modelValue}),u=dt({h:0,s:0,v:0,r:0,g:0,b:0}),l=dt({rect_down:!1,rect_left:0,rect_bottom:0,ver_down:!1,ver_bottom:0}),a={rect:{left:0,bottom:0,x:0,y:0},ver:{bottom:0,y:0}},m=P(!1),_=()=>{m.value=!0},D=pt.debounce(()=>{m.value=!1},300),S=()=>{_();const p=$t(u.h,u.s,u.v);u.r=p[3],u.g=p[4],u.b=p[5],h.value=p[6],l.ver_bottom=u.h,l.rect_left=u.s*360,l.rect_bottom=u.v*360,D()},O=()=>{_();const p=Ht(`${u.r},${u.g},${u.b}`);u.h=p[0],u.s=p[1],u.v=p[2],h.value=p[6],l.ver_bottom=u.h,l.rect_left=u.s*360,l.rect_bottom=u.v*360,D()},L=p=>{p=p||"#000000";const H=Ht(p);u.h=H[0],u.s=H[1],u.v=H[2],u.r=H[3],u.g=H[4],u.b=H[5],l.ver_bottom=u.h,l.rect_left=u.s*360,l.rect_bottom=u.v*360},E=()=>{const p=$t(l.ver_bottom,l.rect_left/360,l.rect_bottom/360);u.h=p[0],u.s=p[1],u.v=p[2],u.r=p[3],u.g=p[4],u.b=p[5],h.value=p[6]},T=p=>{l.rect_down=!0,a.rect.x=p.clientX,a.rect.y=p.clientY;const H=p.currentTarget,W=H.getBoundingClientRect().left,ft=H.getBoundingClientRect().top;a.rect.left=l.rect_left=p.clientX-W,a.rect.bottom=l.rect_bottom=360-(p.clientY-ft),E()},tt=p=>{if(!l.rect_down)return;const H=p.clientX-a.rect.x,W=p.clientY-a.rect.y;l.rect_left=Math.max(0,Math.min(360,a.rect.left+H)),l.rect_bottom=Math.max(0,Math.min(360,a.rect.bottom-W)),E()},c=()=>{!l.rect_down||(l.rect_down=!1)},j=p=>{l.ver_down=!0,a.ver.y=p.clientY;const W=p.currentTarget.getBoundingClientRect().top;a.ver.bottom=l.ver_bottom=360-(p.clientY-W),E()},B=p=>{if(!l.ver_down)return;const H=p.clientY-a.ver.y;l.ver_bottom=Math.max(0,Math.min(360,a.ver.bottom-H)),E()},A=()=>{!l.ver_down||(l.ver_down=!1)},N=()=>{C.value=!0},J=()=>{C.value=!1};return Rt(()=>e.modelValue,p=>{l.ver_down||l.rect_down||m.value||L(p)}),L(e.modelValue),St(()=>{window.addEventListener("mousemove",tt,!1),window.addEventListener("mouseup",c,!1),window.addEventListener("mousemove",B,!1),window.addEventListener("mouseup",A,!1)}),Mt(()=>{window.removeEventListener("mousemove",tt,!1),window.removeEventListener("mouseup",c,!1),window.removeEventListener("mousemove",B,!1),window.removeEventListener("mouseup",A,!1)}),{show:C,color:h,vars:u,state:l,colorRectPointerStart:T,colorVerPointerStart:j,updateHSV:S,updateRGB:O,updateHex:L,onOpen:N,onComfirm:J}}});const wt=e=>(gt("data-v-27cd0415"),e=e(),_t(),e),ve={class:"color-control"},me={class:"color-picker-layer"},be={class:"color-picker-view"},he=wt(()=>n("div",{class:"color-picker-view__label"},"HSV",-1)),ge=wt(()=>n("div",{class:"color-picker-view__label"},"RGB",-1)),_e=wt(()=>n("div",{class:"color-picker-view__label"},"Hex",-1));function we(e,y,C,h,u,l){return w(),$("div",ve,[n("div",{class:"color-preview",style:q({backgroundColor:e.color}),onClick:y[0]||(y[0]=(...a)=>e.onOpen&&e.onOpen(...a))},null,4),(w(),ut(ie,{to:"body"},[R(n("div",{class:"color-picker-mask",onWheel:y[1]||(y[1]=ot(()=>{},["prevent"])),onTouchstart:y[2]||(y[2]=ot(()=>{},["prevent"])),onClick:y[3]||(y[3]=(...a)=>e.onComfirm&&e.onComfirm(...a))},null,544),[[xt,e.show]]),R(n("div",me,[n("div",{class:"color-picker-rect",style:q(`background-color: hsl(${e.vars.h}deg, 100%, 50%)`),onMousedown:y[4]||(y[4]=ot((...a)=>e.colorRectPointerStart&&e.colorRectPointerStart(...a),["prevent","stop"]))},[n("div",{class:"color-picker-rect-cur",style:q({left:`${e.state.rect_left}px`,bottom:`${e.state.rect_bottom}px`})},null,4)],36),n("div",{class:"color-picker-hue",onMousedown:y[5]||(y[5]=ot((...a)=>e.colorVerPointerStart&&e.colorVerPointerStart(...a),["prevent","stop"]))},[n("div",{class:"color-picker-hue-cur",style:q({bottom:`${e.state.ver_bottom}px`})},null,4)],32),n("div",be,[n("div",{class:"color-picker-view-color",style:q({background:e.color})},null,4),he,R(n("input",{type:"number",max:"360",min:"0",step:"1","onUpdate:modelValue":y[6]||(y[6]=a=>e.vars.h=a),class:"color-picker-view__input",onInput:y[7]||(y[7]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[Z,e.vars.h]]),R(n("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":y[8]||(y[8]=a=>e.vars.s=a),class:"color-picker-view__input",onInput:y[9]||(y[9]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[Z,e.vars.s]]),R(n("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":y[10]||(y[10]=a=>e.vars.v=a),class:"color-picker-view__input",onInput:y[11]||(y[11]=(...a)=>e.updateHSV&&e.updateHSV(...a))},null,544),[[Z,e.vars.v]]),ge,R(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":y[12]||(y[12]=a=>e.vars.r=a),class:"color-picker-view__input",onInput:y[13]||(y[13]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[Z,e.vars.r]]),R(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":y[14]||(y[14]=a=>e.vars.g=a),class:"color-picker-view__input",onInput:y[15]||(y[15]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[Z,e.vars.g]]),R(n("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":y[16]||(y[16]=a=>e.vars.b=a),class:"color-picker-view__input",onInput:y[17]||(y[17]=(...a)=>e.updateRGB&&e.updateRGB(...a))},null,544),[[Z,e.vars.b]]),_e,R(n("input",{type:"text","onUpdate:modelValue":y[18]||(y[18]=a=>e.color=a),class:"color-picker-view__input"},null,512),[[Z,e.color]]),n("div",{class:"color-picker-view__enter",onClick:y[19]||(y[19]=(...a)=>e.onComfirm&&e.onComfirm(...a))},"\u786E\u8BA4")])],512),[[xt,e.show]])]))])}const nt=ht(fe,[["render",we],["__scopeId","data-v-27cd0415"]]);nt.install=function(e){e.component(nt.name,nt)};var M=(e=>(e[e.NONE=0]="NONE",e[e.GUARD=1]="GUARD",e[e.SHEEP=2]="SHEEP",e[e.ATTACKER=3]="ATTACKER",e))(M||{}),V=(e=>(e[e.NONE=0]="NONE",e[e.BLOCKED=5]="BLOCKED",e[e.CLIFF=6]="CLIFF",e))(V||{}),U=(e=>(e[e.NONE=0]="NONE",e[e.ARROW_UP=1]="ARROW_UP",e[e.ARROW_RIGHT=2]="ARROW_RIGHT",e[e.ARROW_DOWN=3]="ARROW_DOWN",e[e.ARROW_LEFT=4]="ARROW_LEFT",e[e.HIGHLIGHT=5]="HIGHLIGHT",e))(U||{});const Q=e=>(gt("data-v-825c84f9"),e=e(),_t(),e),ke=["title"],Ce=["onClick"],Fe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Be=Q(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),De=Q(()=>n("path",{d:"M16,13V21H8V13H2L12,3L22,13H16M7,11H10V19H14V11H17L12,6L7,11Z",fill:"#FFFF84"},null,-1)),Ee=[Be,De],Ie={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},$e=Q(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),He=Q(()=>n("path",{d:"M11,16H3V8H11V2L21,12L11,22V16M13,7V10H5V14H13V17L18,12L13,7Z",fill:"#FFFF84"},null,-1)),Ge=[$e,He],Ve={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Re=Q(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Se=Q(()=>n("path",{d:"M22,11L12,21L2,11H8V3H16V11H22M12,18L17,13H14V5H10V13H7L12,18Z",fill:"#FFFF84"},null,-1)),Me=[Re,Se],Le={key:3,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ae=Q(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Ue=Q(()=>n("path",{d:"M13,22L3,12L13,2V8H21V16H13V22M6,12L11,17V14H19V10H11V7L6,12Z",fill:"#FFFF84"},null,-1)),Oe=[Ae,Ue],Ne={key:4,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},We=Q(()=>n("path",{d:"M0,0h24v24h-24z",fill:"#E84F2E30"},null,-1)),Te=[We],ze={key:4,class:"tg lt"},qe={key:5,class:"tg rt"},Ke={key:6,class:"tg rb"},Xe={class:"overlay-dot"},Ze={class:"overlay-selected"},je=bt({__name:"GridItem",props:{disabled:{type:Boolean},selected:{type:Boolean},dot:{type:Boolean},data:null,terrain:null,overlay:null,unit:null},emits:["clickoverlay"],setup(e,{emit:y}){const C=e;function h(){y("clickoverlay",C.overlay)}return(u,l)=>{var a,m,_,D,S,O,L,E,T;return w(),$("div",{draggable:!0,class:ye(["grid-item",{disabled:e.disabled}])},[n("div",{class:"grid-item-bg",style:q({backgroundColor:(a=e.data)==null?void 0:a.bgcolor,backgroundImage:(m=e.data)!=null&&m.image?`url(${e.data.image})`:"",opacity:(_=e.data)==null?void 0:_.opacity})},null,4),e.terrain?(w(),$("div",{key:0,class:"grid-terrain",style:q({backgroundImage:e.terrain.image?`url(${e.terrain.image})`:""})},null,4)):X("",!0),e.unit?(w(),$("div",{key:1,class:"grid-unit",title:e.unit.name,style:q({backgroundImage:e.unit.image?`url(${e.unit.image})`:""})},null,12,ke)):X("",!0),(D=e.data)!=null&&D.txt?(w(),$("div",{key:2,class:"grid-item-txt",style:q({fontSize:(S=e.data)!=null&&S.size?`${e.data.size}px`:"",color:(O=e.data)==null?void 0:O.color})},ct(e.data.txt),5)):X("",!0),e.overlay?(w(),$("div",{key:3,class:"overlay",onClick:ot(h,["stop"])},[e.overlay===v(U).ARROW_UP?(w(),$("svg",Fe,Ee)):e.overlay===v(U).ARROW_RIGHT?(w(),$("svg",Ie,Ge)):e.overlay===v(U).ARROW_DOWN?(w(),$("svg",Ve,Me)):e.overlay===v(U).ARROW_LEFT?(w(),$("svg",Le,Oe)):e.overlay===v(U).HIGHLIGHT?(w(),$("svg",Ne,Te)):X("",!0)],8,Ce)):X("",!0),(L=e.unit)!=null&&L.actorId?(w(),$("i",ze,ct(e.unit.actorId),1)):X("",!0),(E=e.data)!=null&&E.sup?(w(),$("i",qe,ct(e.data.sup),1)):X("",!0),(T=e.data)!=null&&T.sub?(w(),$("i",Ke,ct(e.data.sub),1)):X("",!0),R(n("div",Xe,null,512),[[xt,e.dot]]),R(n("div",Ze,null,512),[[xt,e.selected]])],2)}}});const Y=ht(je,[["__scopeId","data-v-825c84f9"]]);function Je(){const e=P(15),y=P(15),C=P(0),h=P([]),u=P([]),l=[{color:"#202020",bgcolor:"transparent"},{color:"#f9f9fa",bgcolor:"#ff3333"},{color:"#f9f9fa",bgcolor:"#00d659"},{color:"#f9f9fa",bgcolor:"#369af7"},{color:"#f9f9fa",bgcolor:"#fec02f"},{color:"#f9f9fa",bgcolor:"#a865e7"}],a=()=>({d:0,d1:0,d2:0,q:0}),m=()=>({txt:"",size:14,color:l[0].color,bgcolor:l[0].bgcolor,image:"",opacity:1}),_=()=>({type:V.NONE,image:""}),D=()=>({actorId:0,actorType:M.NONE,name:"",image:""}),S=B=>({x:0,y:0,disabled:!1,data:m(),state:a(),terrain:_(),unit:B});function O(B){B.state=a(),B.data=m(),B.terrain=_(),B.overlay=void 0,B.unit=void 0}function L(){C.value=0,h.value.forEach(B=>{B.forEach(A=>{O(A)})}),u.value=[]}function E(B,A){const N=[];for(let J=0;J<B;J++){const p=[];for(let H=0;H<A;H++){const W=S();W.x=H,W.y=J,p.push(W)}N.push(p)}h.value=N}function T(B,A){y.value=B,e.value=A,j()}function tt(B,A){var N;return(N=h.value[A])==null?void 0:N[B]}function c(B){for(let A=0;A<e.value;A++)for(let N=0;N<y.value;N++)B(h.value[A][N])}function j(){E(e.value,y.value)}return j(),{rows:e,cols:y,actorId:C,grids:h,selects:u,gridColors:l,defGridState:a,defGridData:m,defGridTerrain:_,defGridUnit:D,defGrid:S,cleanGrid:O,cleanGrids:L,setSize:T,getGrid:tt,gridForEach:c}}const Gt=""+new URL("../assets/cliff.svg",import.meta.url).href,Vt=""+new URL("../assets/block.svg",import.meta.url).href,Pe=[{name:"\u7A7A\u767D\u573A\u666F",width:15,height:15,data:[]},{name:"\u5316\u8352\u5E7B\u5883",width:17,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:14,y:10,type:5},{x:15,y:10,type:5},{x:16,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:15,y:9,type:5},{x:16,y:9,type:5},{x:0,y:8,type:5},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:16,y:8,type:5},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:9,y:7,type:6},{x:10,y:7,type:6},{x:5,y:6,type:6},{x:6,y:6,type:6},{x:10,y:6,type:6},{x:11,y:6,type:6},{x:5,y:4,type:6},{x:6,y:4,type:6},{x:10,y:4,type:6},{x:11,y:4,type:6},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:0,y:2,type:5},{x:7,y:2,type:6},{x:8,y:2,type:6},{x:9,y:2,type:6},{x:16,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:15,y:1,type:5},{x:16,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:14,y:0,type:5},{x:15,y:0,type:5},{x:16,y:0,type:5}]},{name:"\u96EA\u5CAD\u5E7B\u5883",width:15,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:5,y:10,type:6},{x:6,y:10,type:6},{x:7,y:10,type:6},{x:8,y:10,type:6},{x:9,y:10,type:6},{x:12,y:10,type:5},{x:13,y:10,type:5},{x:14,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:2,y:9,type:5},{x:3,y:9,type:6},{x:4,y:9,type:6},{x:5,y:9,type:6},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:11,y:9,type:6},{x:12,y:9,type:5},{x:13,y:9,type:5},{x:14,y:9,type:5},{x:0,y:8,type:5},{x:1,y:8,type:5},{x:2,y:8,type:5},{x:3,y:8,type:6},{x:11,y:8,type:6},{x:12,y:8,type:5},{x:13,y:8,type:5},{x:14,y:8,type:5},{x:6,y:6,type:6},{x:7,y:6,type:6},{x:8,y:6,type:6},{x:3,y:5,type:6},{x:11,y:5,type:6},{x:6,y:4,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:0,y:2,type:5},{x:1,y:2,type:5},{x:2,y:2,type:5},{x:3,y:2,type:6},{x:11,y:2,type:6},{x:12,y:2,type:5},{x:13,y:2,type:5},{x:14,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:2,y:1,type:5},{x:3,y:1,type:6},{x:4,y:1,type:6},{x:5,y:1,type:6},{x:6,y:1,type:6},{x:7,y:1,type:6},{x:8,y:1,type:6},{x:9,y:1,type:6},{x:10,y:1,type:6},{x:11,y:1,type:6},{x:12,y:1,type:5},{x:13,y:1,type:5},{x:14,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:12,y:0,type:5},{x:13,y:0,type:5},{x:14,y:0,type:5}]},{name:"\u5730\u754C\u5E7B\u5883",width:17,height:13,data:[{x:0,y:12,type:5},{x:1,y:12,type:5},{x:2,y:12,type:5},{x:5,y:12,type:6},{x:6,y:12,type:6},{x:7,y:12,type:6},{x:8,y:12,type:6},{x:9,y:12,type:6},{x:10,y:12,type:6},{x:11,y:12,type:6},{x:14,y:12,type:5},{x:15,y:12,type:5},{x:16,y:12,type:5},{x:0,y:11,type:5},{x:1,y:11,type:5},{x:2,y:11,type:5},{x:6,y:11,type:6},{x:10,y:11,type:6},{x:14,y:11,type:5},{x:15,y:11,type:5},{x:16,y:11,type:5},{x:0,y:10,type:5},{x:1,y:10,type:5},{x:6,y:10,type:6},{x:10,y:10,type:6},{x:15,y:10,type:5},{x:16,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:6,y:9,type:6},{x:7,y:9,type:6},{x:8,y:9,type:6},{x:9,y:9,type:6},{x:10,y:9,type:6},{x:15,y:9,type:5},{x:16,y:9,type:5},{x:7,y:8,type:6},{x:8,y:8,type:6},{x:9,y:8,type:6},{x:7,y:4,type:6},{x:8,y:4,type:6},{x:9,y:4,type:6},{x:0,y:3,type:5},{x:1,y:3,type:5},{x:6,y:3,type:6},{x:7,y:3,type:6},{x:8,y:3,type:6},{x:9,y:3,type:6},{x:10,y:3,type:6},{x:15,y:3,type:5},{x:16,y:3,type:5},{x:0,y:2,type:5},{x:1,y:2,type:5},{x:6,y:2,type:6},{x:10,y:2,type:6},{x:15,y:2,type:5},{x:16,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:2,y:1,type:5},{x:6,y:1,type:6},{x:10,y:1,type:6},{x:14,y:1,type:5},{x:15,y:1,type:5},{x:16,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:6},{x:6,y:0,type:6},{x:7,y:0,type:6},{x:8,y:0,type:6},{x:9,y:0,type:6},{x:10,y:0,type:6},{x:11,y:0,type:6},{x:14,y:0,type:5},{x:15,y:0,type:5},{x:16,y:0,type:5}]},{name:"\u7ED3\u754C\u5E7B\u5883",width:11,height:11,data:[{x:5,y:8,type:5},{x:2,y:5,type:5},{x:5,y:5,type:5},{x:8,y:5,type:5},{x:5,y:2,type:5}]},{name:"\u57CE\u9685\u5E7B\u5883",width:15,height:11,data:[{x:0,y:10,type:5},{x:1,y:10,type:5},{x:2,y:10,type:5},{x:5,y:10,type:5},{x:6,y:10,type:5},{x:7,y:10,type:5},{x:8,y:10,type:5},{x:9,y:10,type:5},{x:12,y:10,type:5},{x:13,y:10,type:5},{x:14,y:10,type:5},{x:0,y:9,type:5},{x:1,y:9,type:5},{x:6,y:9,type:5},{x:8,y:9,type:5},{x:13,y:9,type:5},{x:14,y:9,type:5},{x:0,y:8,type:5},{x:14,y:8,type:5},{x:10,y:6,type:5},{x:5,y:5,type:5},{x:9,y:5,type:5},{x:4,y:4,type:5},{x:0,y:2,type:5},{x:14,y:2,type:5},{x:0,y:1,type:5},{x:1,y:1,type:5},{x:6,y:1,type:5},{x:8,y:1,type:5},{x:13,y:1,type:5},{x:14,y:1,type:5},{x:0,y:0,type:5},{x:1,y:0,type:5},{x:2,y:0,type:5},{x:5,y:0,type:5},{x:6,y:0,type:5},{x:7,y:0,type:5},{x:8,y:0,type:5},{x:9,y:0,type:5},{x:12,y:0,type:5},{x:13,y:0,type:5},{x:14,y:0,type:5}]},{name:"\u6D1E\u7A74\u5E7B\u5883",width:11,height:11,data:[{x:0,y:0,type:5},{x:1,y:0,type:5},{x:0,y:1,type:5},{x:0,y:2,type:5},{x:3,y:2,type:6},{x:4,y:2,type:6},{x:2,y:3,type:6},{x:3,y:3,type:6},{x:4,y:3,type:6},{x:6,y:7,type:6},{x:7,y:7,type:6},{x:8,y:7,type:6},{x:6,y:8,type:6},{x:7,y:8,type:6},{x:10,y:8,type:5},{x:10,y:9,type:5},{x:9,y:10,type:5},{x:10,y:10,type:5}]},{name:"\u5996\u5C71\u5E7B\u5883",width:17,height:11,data:[]}],k=e=>(gt("data-v-0f7ba1a5"),e=e(),_t(),e),Qe={class:"wrapper"},Ye={class:"toolbar"},to={class:"setting"},eo={class:"label-control"},oo=k(()=>n("span",null,"\u7F16\u8F91\u6A21\u5F0F",-1)),no=k(()=>n("option",{value:1},"\u7F16\u8F91\u7F51\u683C",-1)),ro=k(()=>n("option",{value:2},"\u5237\u5B50\u6A21\u5F0F",-1)),so=k(()=>n("option",{value:3},"\u9009\u62E9\u5F62\u72B6",-1)),ao=k(()=>n("option",{value:4},"\u62A4\u536B\u8BA1\u7B97",-1)),lo=[no,ro,so,ao],io={class:"label-control"},yo=k(()=>n("span",null,"\u8303\u56F4",-1)),uo={class:"label-control"},co=k(()=>n("span",null,"\u5F62\u72B6",-1)),po=k(()=>n("option",{value:1},"\u83F1\u5F62",-1)),xo=k(()=>n("option",{value:2},"\u5708\u6570",-1)),fo=[po,xo],vo={class:"label-control"},mo=k(()=>n("span",null,"\u6392\u5E8F",-1)),bo=k(()=>n("option",{value:1},"\u8DDD\u79BBX",-1)),ho=k(()=>n("option",{value:2},"\u8DDD\u79BBY",-1)),go=k(()=>n("option",{value:3},"X\u4F18\u5148",-1)),_o=k(()=>n("option",{value:4},"Y\u4F18\u5148",-1)),wo=[bo,ho,go,_o],ko=k(()=>n("button",{class:"btn"},"\u9884\u8BBE\u573A\u666F",-1)),Co=["onClick"],Fo=["onClick"],Bo={class:"color-container"},Do={class:"label-control"},Eo=k(()=>n("span",null,"\u9884\u89C8",-1)),Io=Lt(" E "),$o={class:"label-control"},Ho=k(()=>n("span",null,"\u6587\u5B57",-1)),Go={class:"label-control"},Vo=k(()=>n("span",null,"\u80CC\u666F",-1)),Ro=k(()=>n("label",{class:"label-control"},[n("span",null,"\u9884\u8BBE")],-1)),So={class:"color-tpls"},Mo=Lt(" E "),Lo={width:"32",height:"32",viewBox:"0 0 24 24",fill:"#a9a9a9",style:{"pointer-events":"none"}},Ao=k(()=>n("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},null,-1)),Uo=[Ao],Oo={class:"props-container"},No={key:0,class:"props-content"},Wo={class:"label-control"},To=k(()=>n("span",null,"\u9884\u89C8",-1)),zo={class:"label-control"},qo=k(()=>n("span",null,"\u6587\u5B57",-1)),Ko={class:"label-control"},Xo=k(()=>n("span",null,"\u80CC\u666F",-1)),Zo={class:"label-control"},jo=k(()=>n("span",null,"\u5927\u5C0F",-1)),Jo={class:"label-control"},Po=k(()=>n("span",null,"\u5185\u5BB9",-1)),Qo={class:"label-control"},Yo=k(()=>n("span",null,"\u5730\u5F62",-1)),tn=["value"],en=["value"],on=["value"],nn={class:"label-control"},rn=k(()=>n("span",null,"Id",-1)),sn={class:"label-control"},an=k(()=>n("span",null,"\u7C7B\u578B",-1)),ln=["value"],yn=["value"],un=["value"],cn=["value"],dn={class:"label-control"},pn=k(()=>n("span",null,"\u98DE\u884C",-1)),xn={class:"content"},fn={class:"grids"},vn={class:"heroes"},mn=bt({__name:"Grids",setup(e){const{rows:y,cols:C,actorId:h,grids:u,selects:l,gridColors:a,defGridUnit:m,defGridState:_,defGrid:D,cleanGrid:S,cleanGrids:O,setSize:L,getGrid:E,gridForEach:T}=Je(),tt=P(),c=dt({editor:1,selectRange:5,shape:1,sortType:1,color:a[0].color,bgcolor:a[0].bgcolor,terrain:void 0}),j=D();j.terrain={image:Vt,type:V.BLOCKED};const B=D();B.terrain={image:Gt,type:V.CLIFF};function A(o){c.color=o.color,c.bgcolor=o.bgcolor,c.terrain=void 0}function N(o){c.color="",c.bgcolor="",c.terrain=o.terrain}const{heroes:J}=pe(),p=It(D(m())),H=It(J.value.map(o=>{const t=D(),s=m();return s.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${o.hero_icon}.png`,s.name=o.name,t.unit=s,t}));Rt(J,()=>{H.value=J.value.map(o=>{const t=D(),s=m();return s.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${o.hero_icon}.png`,t.unit=s,t})});function W(o,t,s,f){const i=[];return T(b=>{b.state=_()}),T(b=>{const r=Math.abs(o-b.x),d=Math.abs(t-b.y),G=r+d,x=Math.max(r,d),I=r>1?r-1:r+d>1?d-1:d;switch(f){case 1:G<=s&&(b.state.d=G,b.state.q=x,b.state.d1=I,i.push(b));break;case 2:Math.abs(r)<=s&&Math.abs(d)<=s&&(b.state.d=G,b.state.q=x,b.state.d1=I,i.push(b));break}}),i}function ft(o,t,s,f,i,b,r){const d=W(o,t,s,f);switch(d.forEach(G=>{G.data.color=b,G.data.bgcolor=r}),l.value=d,i){case 1:l.value.sort(At);break;case 2:l.value.sort(vt);break;case 3:l.value.sort(Ut);break;case 4:l.value.sort(Ot);break}for(let G=0;G<l.value.length;G++){const x=l.value[G];x.data.txt=String(G+1)}}function At(o,t){return o.state.q!==t.state.q?o.state.q-t.state.q:o.state.d!==t.state.d?o.state.d-t.state.d:o.x!==t.x?o.x-t.x:o.y!==t.y?o.y-t.y:0}function vt(o,t){return o.state.q!==t.state.q?o.state.q-t.state.q:o.state.d!==t.state.d?o.state.d-t.state.d:o.y!==t.y?o.y-t.y:o.x!==t.x?o.x-t.x:0}function Ut(o,t){return o.x!==t.x?o.x-t.x:o.y!==t.y?o.y-t.y:0}function Ot(o,t){return o.y!==t.y?o.y-t.y:o.x!==t.x?o.x-t.x:0}const g=dt({enabled:!1});function Nt(){O()}function kt(){g.enabled=!1}function Wt(o,t){var s;switch(c.editor){case 1:case 4:g.current=t,(s=tt.value)==null||s.focus();break;case 3:O(),ft(t.x,t.y,c.selectRange,c.shape,c.sortType,c.color,c.bgcolor);break}}function Tt(o,t){if(o.button===0)switch(c.editor){case 2:{g.enabled=!0,t.data.color=c.color,t.data.bgcolor=c.bgcolor,c.terrain?(t.terrain.type=c.terrain.type,t.terrain.image=c.terrain.image):(t.terrain.type=V.NONE,t.terrain.image="");break}}}function zt(o,t){o.button===0&&g.enabled&&(t.data.color=c.color,t.data.bgcolor=c.bgcolor,c.terrain?(t.terrain.type=c.terrain.type,t.terrain.image=c.terrain.image):(t.terrain.type=V.NONE,t.terrain.image=""))}function qt(){g.current=void 0}const st=P({width:15,height:15});function Kt(){try{const o=localStorage.getItem("grids");if(!o)return;const t=JSON.parse(o);st.value=t}catch{}}function Ct(){if(!confirm("\u786E\u5B9A\u8981\u4FDD\u5B58\u5417\uFF1F"))return;let t=u.value.flat().filter(s=>s.terrain.type!==V.NONE||s.unit&&s.unit.actorId>0);t=pt.cloneDeep(t),st.value={width:C.value,height:y.value,data:t},localStorage.setItem("grids",JSON.stringify(st.value))}function Xt(){const o=st.value;if(!!o.data){L(o.width,o.height);for(const t of o.data){const s=E(t.x,t.y);!s||(t.data&&(s.data=t.data),t.terrain&&(s.terrain=t.terrain),t.unit&&t.unit.actorId>0&&(s.unit=t.unit))}}}function Zt(o){L(o.width,o.height),o.data.forEach(t=>{const s=E(t.x,t.y);if(!!s)switch(t.type){case V.CLIFF:s.terrain={image:Gt,type:V.CLIFF};break;case V.BLOCKED:s.terrain={image:Vt,type:V.BLOCKED};break}})}function jt(){const o=g.current;if(!o)return;st.value||Ct();let t,s,f=[];for(t=o.x-2;t<=o.x+2;t++)for(s=o.y-2;s<=o.y+2;s++){const r=E(t,s);!r||(r.x===o.x&&r.y===o.y?(f[0]&&f.push(f[0]),f[0]=r):f.push(r))}f=f.filter(r=>r.unit&&!(r.x===o.x&&r.y===o.y));const i=f.map(r=>({unit:r.unit}));f.forEach(r=>{S(r)});const b=W(o.x,o.y,4,2).filter(r=>r.terrain.type!==V.BLOCKED&&!(r.x===o.x&&r.y===o.y)).sort(vt).map(r=>[r.x,r.y]);for(const r of i)for(const[d,G]of b){const x=E(d,G);if(!!x&&!(x.unit&&x.unit.actorId>0)&&x.terrain.type!==V.BLOCKED&&!(x.terrain.type===V.CLIFF&&!r.unit.fly)){x.unit=r.unit;break}}}let K;function Jt(){const o=g.current;if(!o)return;const t=[{x:0,y:1,overlay:U.ARROW_UP},{x:1,y:0,overlay:U.ARROW_RIGHT},{x:0,y:-1,overlay:U.ARROW_DOWN},{x:-1,y:0,overlay:U.ARROW_LEFT}];for(const s of t){const f=E(o.x+s.x,o.y+s.y);if(!!f){f.overlay=s.overlay;for(let i=2;i<=4;i++){const b=E(o.x+s.x*i,o.y+s.y*i);!b||(b.overlay=U.HIGHLIGHT)}}}K=o}function Pt(o){if(!K||!o||o===U.HIGHLIGHT)return;let t,s,f=[];for(t=K.x-1;t<=K.x+1;t++)for(s=K.y-1;s<=K.y+1;s++){if(t===K.x&&s===K.y)continue;const x=E(t,s);!x||!x.unit||(x.state.d=mt(K,x),f.push(x))}f.sort((x,I)=>!x.unit||!I.unit?0:x.state.d!==I.state.d?x.state.d-I.state.d:x.unit.actorId-I.unit.actorId),f=f.slice(0,2);const i=f.map(x=>({unit:x.unit}));f.forEach(x=>{x.unit=void 0}),console.log(i);const r={[U.ARROW_UP]:{x:0,y:1},[U.ARROW_RIGHT]:{x:1,y:0},[U.ARROW_DOWN]:{x:0,y:-1},[U.ARROW_LEFT]:{x:-1,y:0}}[o];let d;for(let x=1;x<=4;x++){const I=E(K.x+x*r.x,K.y+x*r.y);I&&I.terrain.type===V.NONE&&(d=I)}if(!d)return;T(x=>{x.overlay=void 0});const G=W(d.x,d.y,4,2).filter(x=>x.terrain.type!==V.BLOCKED&&!(x.x===(d==null?void 0:d.x)&&x.y===(d==null?void 0:d.y))).sort(vt).map(x=>[x.x,x.y]);for(const x of i)for(const[I,ae]of G){const rt=E(I,ae);if(!!rt&&!(rt.unit&&rt.unit.actorId>0)&&rt.terrain.type!==V.BLOCKED&&!(rt.terrain.type===V.CLIFF&&!x.unit.fly)){rt.unit=x.unit;break}}d&&(g.current=d)}const F=dt({}),Ft=["#ffffff00","#FF3C4132","#0EBEFF32","#48CF7432","#FCD00032","#80008032"],Qt=(o,t)=>{switch(c.editor){case 2:o.preventDefault();break;default:F.grid=t,F.action="swap",o.dataTransfer&&(o.dataTransfer.effectAllowed="move")}},Yt=(o,t)=>{const s=D();s.data.color=t.color,s.data.bgcolor=t.bgcolor,s.data.txt="E",F.grid=s,F.action="color"},Bt=(o,t)=>{F.grid=pt.cloneDeep(t),F.action="terrain"},Dt=(o,t)=>{F.grid=pt.cloneDeep(t),F.action="unit"},te=(o,t)=>{if(o.preventDefault(),!F.grid)return;const s=F.grid.data,f=F.grid.unit,i=F.grid.terrain;switch(F.action){case"color":t.unit||(t.unit=m()),t.unit.actorId||(t.unit.actorId=++h.value),t.data=F.grid.data;break;case"unit":if(t.unit||(t.unit=m()),t.unit.actorId||(t.unit.actorId=++h.value),!f)break;t.unit.image=f.image;break;case"swap":F.grid.data=t.data,F.grid.unit=t.unit,t.data=s,t.unit=f,(!f||f.actorId===0)&&(F.grid.terrain=t.terrain,t.terrain=i);break;case"terrain":t.terrain=i;break}F.grid=void 0,F.action=void 0,c.editor===4&&at()};function ee(o,t){let s=o[0].state[t];for(let f=1;f<o.length;f++)o[f].state[t]<s&&(s=o[f].state[t]);return s}function mt(o,t){return Math.abs(o.x-t.x)+Math.abs(o.y-t.y)}function Et(o,t,s){o.sort((r,d)=>!r.unit||!d.unit?0:+r.unit.actorId-+d.unit.actorId),o.forEach(r=>{r.state.d1=mt(r,s),r.state.d2=mt(r,t),r.unit&&(r.unit.guard=!1)});const f=ee(o,"d1");if(o=o.filter(r=>r.state.d1===f),o.length===1)return o[0];let i=o[0],b=o.length;for(;b--;)if(o[b].state.d2<i.state.d2){i=o[b];break}return i}function oe(){L(15,15),h.value=0;const o=[{x:7,y:9,txt:"",type:M.GUARD,bg:"#0ebeff"},{x:9,y:7,txt:"",type:M.GUARD,bg:"#0ebeff"},{x:7,y:5,txt:"",type:M.GUARD,bg:"#0ebeff"},{x:5,y:7,txt:"",type:M.GUARD,bg:"#0ebeff"},{x:8,y:6,txt:"",type:M.ATTACKER,bg:"#ff3c41"},{x:7,y:7,txt:"",type:M.SHEEP,bg:"#fcd000"}];for(const t of o){const s=E(t.x,t.y);!s||(s.unit||(s.unit=m()),s.unit.actorId=++h.value,s.unit.actorType=t.type,s.disabled=!1,s.data.txt=t.txt,s.data.bgcolor=t.bg)}c.editor=4}const at=()=>{const o=u.value.flat();o.forEach(r=>{r.data.opacity=1});const t=o.filter(r=>r.unit&&!r.disabled),s=t.filter(r=>{var d;return((d=r.unit)==null?void 0:d.actorType)===M.ATTACKER})[0],f=t.filter(r=>{var d;return((d=r.unit)==null?void 0:d.actorType)===M.SHEEP})[0],i=t.filter(r=>{var d;return((d=r.unit)==null?void 0:d.actorType)===M.GUARD});if(!f||i.length===0){alert("\u7F3A\u5C11\u89D2\u8272\uFF0C\u5C06\u81EA\u52A8\u751F\u6210"),oe(),at();return}const b=o.filter(r=>!r.unit);for(const r of b){const d=Et(i,r,f);!d.unit||(r.data.image=d.unit.image,r.data.bgcolor=Ft[d.unit.actorId]||Ft[0],d.data.image?r.data.sup="":r.data.sup=String(d.unit.actorId),r.data.opacity=.6)}if(s){const r=Et(i,s,f);r.unit&&(r.unit.guard=!0)}},ne=o=>{if(!!o.unit&&c.editor===4){switch(o.unit.actorType){case M.GUARD:o.disabled=!o.disabled;break}at()}},re=o=>{var t;!F.grid||!o.dataTransfer||F.action==="swap"&&(c.editor===4&&((t=F.grid.unit)==null?void 0:t.actorType)===M.SHEEP||o.preventDefault())},se=o=>{if(!!F.grid&&!!o)switch(F.action){case"swap":S(o),F.grid=void 0,F.action=void 0,c.editor===4&&at()}};return St(()=>{Kt(),window.addEventListener("mouseup",kt,!1)}),Mt(()=>{window.removeEventListener("mouseup",kt,!1)}),(o,t)=>{const s=ue("c-space"),f=de("autofocus");return w(),$("div",Qe,[n("div",Ye,[n("div",to,[n("label",eo,[oo,R(n("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>c.editor=i)},lo,512),[[lt,c.editor,void 0,{number:!0}]])]),n("label",io,[yo,R(n("input",{type:"number",min:"0","onUpdate:modelValue":t[1]||(t[1]=i=>c.selectRange=i),style:{width:"5em"}},null,512),[[Z,c.selectRange]])]),n("label",uo,[co,R(n("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>c.shape=i)},fo,512),[[lt,c.shape]])]),n("label",vo,[mo,R(n("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>c.sortType=i)},wo,512),[[lt,c.sortType]])]),n("button",{class:"btn",onClick:Nt},"\u6E05\u7A7A"),n("button",{class:"btn",onClick:at},"\u8BA1\u7B97\u62A4\u536B"),n("button",{class:"btn btn-success",onClick:Ct},"\u4FDD\u5B58\u5E03\u5C40"),n("button",{class:"btn btn-success",onClick:Xt},"\u8FD8\u539F\u5E03\u5C40"),X("",!0),z(v(xe),null,{popover:et(({onClose:i})=>[n("div",{class:"list",onClick:b=>i()},[(w(!0),$(it,null,yt(v(Pe),(b,r)=>(w(),$("div",{class:"list-item",key:r,onClick:d=>Zt(b)},ct(b.name),9,Fo))),128))],8,Co)]),default:et(()=>[ko]),_:1})]),n("div",Bo,[z(s,null,{default:et(()=>{var i,b;return[n("label",Do,[Eo,z(v(Y),{draggable:!1,style:q([`--color:${c.color};--bgcolor:${c.bgcolor}`])},{default:et(()=>[Io]),_:1},8,["style"])]),n("label",$o,[Ho,z(v(nt),{modelValue:c.color,"onUpdate:modelValue":t[4]||(t[4]=r=>c.color=r)},null,8,["modelValue"])]),n("label",Go,[Vo,z(v(nt),{modelValue:c.bgcolor,"onUpdate:modelValue":t[5]||(t[5]=r=>c.bgcolor=r)},null,8,["modelValue"])]),Ro,n("div",So,[(w(!0),$(it,null,yt(v(a),(r,d)=>(w(),ut(v(Y),{key:d,selected:c.bgcolor===r.bgcolor,style:q([`--color:${r.color};--bgcolor:${r.bgcolor}`]),onClick:G=>A(r),onDragstart:G=>Yt(G,r)},{default:et(()=>[Mo]),_:2},1032,["selected","style","onClick","onDragstart"]))),128)),z(v(Y),{selected:((i=c.terrain)==null?void 0:i.type)===v(B).terrain.type,terrain:v(B).terrain,onClick:t[6]||(t[6]=r=>N(v(B))),onDragstart:t[7]||(t[7]=r=>Bt(r,v(B)))},null,8,["selected","terrain"]),z(v(Y),{selected:((b=c.terrain)==null?void 0:b.type)===v(j).terrain.type,terrain:v(j).terrain,onClick:t[8]||(t[8]=r=>N(v(j))),onDragstart:t[9]||(t[9]=r=>Bt(r,v(j)))},null,8,["selected","terrain"])]),n("div",{class:"trush",onDragover:re,onDrop:t[10]||(t[10]=r=>se(F.grid))},[(w(),$("svg",Lo,Uo))],32)]}),_:1})]),n("div",Oo,[g.current?(w(),$("div",No,[z(s,null,{default:et(()=>[n("label",Wo,[To,z(v(Y),{draggable:!1,style:q([`--color:${g.current.data.color};--bgcolor:${g.current.data.bgcolor}`]),item:g.current},null,8,["style","item"])]),n("label",zo,[qo,z(v(nt),{modelValue:g.current.data.color,"onUpdate:modelValue":t[11]||(t[11]=i=>g.current.data.color=i)},null,8,["modelValue"])]),n("label",Ko,[Xo,z(v(nt),{modelValue:g.current.data.bgcolor,"onUpdate:modelValue":t[12]||(t[12]=i=>g.current.data.bgcolor=i)},null,8,["modelValue"])]),n("label",Zo,[jo,R(n("input",{type:"number",style:{width:"4em"},min:"12",step:"1","onUpdate:modelValue":t[13]||(t[13]=i=>g.current.data.size=i)},null,512),[[Z,g.current.data.size]])]),n("label",Jo,[Po,R(n("input",{type:"text",ref_key:"txtInput",ref:tt,"onUpdate:modelValue":t[14]||(t[14]=i=>g.current.data.txt=i),style:{width:"6em"}},null,512),[[f],[Z,g.current.data.txt]])]),n("label",Qo,[Yo,R(n("select",{"onUpdate:modelValue":t[15]||(t[15]=i=>g.current.terrain.type=i)},[n("option",{value:v(V).NONE},"\u65E0",8,tn),n("option",{value:v(V).BLOCKED},"\u969C\u788D",8,en),n("option",{value:v(V).CLIFF},"\u60AC\u5D16",8,on)],512),[[lt,g.current.terrain.type]])]),g.current.unit?(w(),ut(s,{key:0},{default:et(()=>[n("label",nn,[rn,R(n("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=i=>g.current.unit.actorId=i),style:{width:"4em"}},null,512),[[Z,g.current.unit.actorId]])]),n("label",sn,[an,R(n("select",{"onUpdate:modelValue":t[17]||(t[17]=i=>g.current.unit.actorType=i)},[n("option",{value:v(M).NONE},"\u65E0",8,ln),n("option",{value:v(M).GUARD},"\u62A4\u536B",8,yn),n("option",{value:v(M).SHEEP},"\u9776\u5B50",8,un),n("option",{value:v(M).ATTACKER},"\u653B\u51FB\u8005",8,cn)],512),[[lt,g.current.unit.actorType]])]),n("label",dn,[pn,R(n("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=i=>g.current.unit.fly=i)},null,512),[[ce,g.current.unit.fly]])])]),_:1})):X("",!0),n("button",{class:"btn",onClick:qt},"\u5B8C\u6210"),n("button",{class:"btn btn-success",onClick:jt},"\u602A\u529B\u4E71\u795E"),n("button",{class:"btn btn-success",onClick:Jt},"\u5F00\u8F66")]),_:1})])):X("",!0)])]),n("div",xn,[n("div",fn,[(w(!0),$(it,null,yt(v(u),(i,b)=>(w(),$("div",{class:"grids-row",key:b},[(w(!0),$(it,null,yt(i,(r,d)=>{var G,x;return w(),ut(v(Y),{key:d,draggable:!0,selected:r.x===((G=g.current)==null?void 0:G.x)&&r.y===((x=g.current)==null?void 0:x.y),disabled:r.disabled,dot:r.unit&&r.unit.guard,data:r.data,terrain:r.terrain,overlay:r.overlay,unit:r.unit,onDragstart:I=>Qt(I,r),onDragover:t[19]||(t[19]=ot(()=>{},["prevent"])),onDrop:I=>te(I,r),onContextmenu:ot(I=>ne(r),["prevent"]),onClick:I=>Wt(I,r),onMousedown:I=>Tt(I,r),onMouseenter:I=>zt(I,r),onClickoverlay:Pt},null,8,["selected","disabled","dot","data","terrain","overlay","unit","onDragstart","onDrop","onContextmenu","onClick","onMousedown","onMouseenter"])}),128))]))),128))]),n("div",vn,[z(v(Y),{item:v(p),onDragstart:t[20]||(t[20]=i=>Dt(i,v(p)))},null,8,["item"]),(w(!0),$(it,null,yt(v(H),(i,b)=>(w(),ut(v(Y),{key:b,data:i.data,terrain:i.terrain,overlay:i.overlay,unit:i.unit,onDragstart:r=>Dt(r,i)},null,8,["data","terrain","overlay","unit","onDragstart"]))),128))])])])}}});const _n=ht(mn,[["__scopeId","data-v-0f7ba1a5"]]);export{_n as default};
