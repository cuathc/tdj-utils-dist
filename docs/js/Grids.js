import{d as ct,q as X,a as Bt,m as W,M as Et,Y as Xt,O as Vt,_ as ut,o as A,c as I,e as s,n as H,b as tt,w as V,W as ot,P as z,B as M,T as Kt,p as Ct,l as St,j as wt,z as dt,f as Z,i as et,N as Ot,Z as ht,v as J,g as U,h as Q,u as x,F as at,r as it,k as Yt,V as jt}from"./index.js";import{_ as At}from"./lodash.js";import{u as Wt}from"./useHeroes.js";const kt=(o,l,p)=>{let d=0,r=0,a=0;o%=360;const n=Math.floor(o/60),m=o/60-n,y=p*(1-l),B=p*(1-l*m),G=p*(1-l*(1-m));switch(n){case 0:d=p,r=G,a=y;break;case 1:d=B,r=p,a=y;break;case 2:d=y,r=p,a=G;break;case 3:d=y,r=B,a=p;break;case 4:d=G,r=y,a=p;break;case 5:d=p,r=y,a=B;break}d=Math.floor(d*255),r=Math.floor(r*255),a=Math.floor(a*255);const C=("00"+d.toString(16)).slice(-2),c=("00"+r.toString(16)).slice(-2),$=("00"+a.toString(16)).slice(-2);return[o,l,p,d,r,a,"#"+C+c+$]},xt=o=>{let l=0,p=0,d=0,r=0,a=0,n=0;if(/#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i.test(o))l=window.parseInt(RegExp.$1,16),p=window.parseInt(RegExp.$2,16),d=window.parseInt(RegExp.$3,16);else if(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i.test(o))l=window.parseInt(RegExp.$1,10),p=window.parseInt(RegExp.$2,10),d=window.parseInt(RegExp.$3,10);else return[0,0,0,0,0,0,"#000000"];r=l/255,a=p/255,n=d/255;let m=r;a>m&&(m=a),n>m&&(m=n);let y=r;a<y&&(y=a),n<y&&(y=n);let B=0,G=0,C=0;m===y?B=0:m===r&&a>=n?B=60*(a-n)/(m-y)+0:m===r&&a<n?B=60*(a-n)/(m-y)+360:m===a?B=60*(n-r)/(m-y)+120:m===n&&(B=60*(r-a)/(m-y)+240),m===0?G=0:G=1-y/m,C=m;const c=("00"+l.toString(16)).slice(-2),$=("00"+p.toString(16)).slice(-2),R=("00"+d.toString(16)).slice(-2);return[Math.floor(B),G,C,l,p,d,"#"+c+$+R]},Zt=ct({name:"ColorPicker",emits:["update:modelValue"],props:{modelValue:{type:String,required:!0}},setup(o,{emit:l}){const p=X(!1),d=Bt({set:u=>{l("update:modelValue",u)},get:()=>o.modelValue}),r=W({h:0,s:0,v:0,r:0,g:0,b:0}),a=W({rect_down:!1,rect_left:0,rect_bottom:0,ver_down:!1,ver_bottom:0}),n={rect:{left:0,bottom:0,x:0,y:0},ver:{bottom:0,y:0}},m=X(!1),y=()=>{m.value=!0},B=At.debounce(()=>{m.value=!1},300),G=()=>{y();const u=kt(r.h,r.s,r.v);r.r=u[3],r.g=u[4],r.b=u[5],d.value=u[6],a.ver_bottom=r.h,a.rect_left=r.s*360,a.rect_bottom=r.v*360,B()},C=()=>{y();const u=xt(`${r.r},${r.g},${r.b}`);r.h=u[0],r.s=u[1],r.v=u[2],d.value=u[6],a.ver_bottom=r.h,a.rect_left=r.s*360,a.rect_bottom=r.v*360,B()},c=u=>{u=u||"#000000";const D=xt(u);r.h=D[0],r.s=D[1],r.v=D[2],r.r=D[3],r.g=D[4],r.b=D[5],a.ver_bottom=r.h,a.rect_left=r.s*360,a.rect_bottom=r.v*360},$=()=>{const u=kt(a.ver_bottom,a.rect_left/360,a.rect_bottom/360);r.h=u[0],r.s=u[1],r.v=u[2],r.r=u[3],r.g=u[4],r.b=u[5],d.value=u[6]},R=u=>{a.rect_down=!0,n.rect.x=u.clientX,n.rect.y=u.clientY;const D=u.currentTarget,q=D.getBoundingClientRect().left,lt=D.getBoundingClientRect().top;n.rect.left=a.rect_left=u.clientX-q,n.rect.bottom=a.rect_bottom=360-(u.clientY-lt),$()},F=u=>{if(!a.rect_down)return;const D=u.clientX-n.rect.x,q=u.clientY-n.rect.y;a.rect_left=Math.max(0,Math.min(360,n.rect.left+D)),a.rect_bottom=Math.max(0,Math.min(360,n.rect.bottom-q)),$()},T=()=>{!a.rect_down||(a.rect_down=!1)},K=u=>{a.ver_down=!0,n.ver.y=u.clientY;const q=u.currentTarget.getBoundingClientRect().top;n.ver.bottom=a.ver_bottom=360-(u.clientY-q),$()},O=u=>{if(!a.ver_down)return;const D=u.clientY-n.ver.y;a.ver_bottom=Math.max(0,Math.min(360,n.ver.bottom-D)),$()},Y=()=>{!a.ver_down||(a.ver_down=!1)},st=()=>{p.value=!0},nt=()=>{p.value=!1};return Et(()=>o.modelValue,u=>{a.ver_down||a.rect_down||m.value||c(u)}),c(o.modelValue),Xt(()=>{window.addEventListener("mousemove",F,!1),window.addEventListener("mouseup",T,!1),window.addEventListener("mousemove",O,!1),window.addEventListener("mouseup",Y,!1)}),Vt(()=>{window.removeEventListener("mousemove",F,!1),window.removeEventListener("mouseup",T,!1),window.removeEventListener("mousemove",O,!1),window.removeEventListener("mouseup",Y,!1)}),{show:p,color:d,vars:r,state:a,colorRectPointerStart:R,colorVerPointerStart:K,updateHSV:G,updateRGB:C,updateHex:c,onOpen:st,onComfirm:nt}}});const ft=o=>(Ct("data-v-27cd0415"),o=o(),St(),o),Jt={class:"color-control"},Qt={class:"color-picker-layer"},te={class:"color-picker-view"},ee=ft(()=>s("div",{class:"color-picker-view__label"},"HSV",-1)),oe=ft(()=>s("div",{class:"color-picker-view__label"},"RGB",-1)),se=ft(()=>s("div",{class:"color-picker-view__label"},"Hex",-1));function ne(o,l,p,d,r,a){return A(),I("div",Jt,[s("div",{class:"color-preview",style:H({backgroundColor:o.color}),onClick:l[0]||(l[0]=(...n)=>o.onOpen&&o.onOpen(...n))},null,4),(A(),tt(Kt,{to:"body"},[V(s("div",{class:"color-picker-mask",onWheel:l[1]||(l[1]=z(()=>{},["prevent"])),onTouchstart:l[2]||(l[2]=z(()=>{},["prevent"])),onClick:l[3]||(l[3]=(...n)=>o.onComfirm&&o.onComfirm(...n))},null,544),[[ot,o.show]]),V(s("div",Qt,[s("div",{class:"color-picker-rect",style:H(`background-color: hsl(${o.vars.h}deg, 100%, 50%)`),onMousedown:l[4]||(l[4]=z((...n)=>o.colorRectPointerStart&&o.colorRectPointerStart(...n),["prevent","stop"]))},[s("div",{class:"color-picker-rect-cur",style:H({left:`${o.state.rect_left}px`,bottom:`${o.state.rect_bottom}px`})},null,4)],36),s("div",{class:"color-picker-hue",onMousedown:l[5]||(l[5]=z((...n)=>o.colorVerPointerStart&&o.colorVerPointerStart(...n),["prevent","stop"]))},[s("div",{class:"color-picker-hue-cur",style:H({bottom:`${o.state.ver_bottom}px`})},null,4)],32),s("div",te,[s("div",{class:"color-picker-view-color",style:H({background:o.color})},null,4),ee,V(s("input",{type:"number",max:"360",min:"0",step:"1","onUpdate:modelValue":l[6]||(l[6]=n=>o.vars.h=n),class:"color-picker-view__input",onInput:l[7]||(l[7]=(...n)=>o.updateHSV&&o.updateHSV(...n))},null,544),[[M,o.vars.h]]),V(s("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":l[8]||(l[8]=n=>o.vars.s=n),class:"color-picker-view__input",onInput:l[9]||(l[9]=(...n)=>o.updateHSV&&o.updateHSV(...n))},null,544),[[M,o.vars.s]]),V(s("input",{type:"number",max:"1",min:"0",step:"0.01","onUpdate:modelValue":l[10]||(l[10]=n=>o.vars.v=n),class:"color-picker-view__input",onInput:l[11]||(l[11]=(...n)=>o.updateHSV&&o.updateHSV(...n))},null,544),[[M,o.vars.v]]),oe,V(s("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":l[12]||(l[12]=n=>o.vars.r=n),class:"color-picker-view__input",onInput:l[13]||(l[13]=(...n)=>o.updateRGB&&o.updateRGB(...n))},null,544),[[M,o.vars.r]]),V(s("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":l[14]||(l[14]=n=>o.vars.g=n),class:"color-picker-view__input",onInput:l[15]||(l[15]=(...n)=>o.updateRGB&&o.updateRGB(...n))},null,544),[[M,o.vars.g]]),V(s("input",{type:"number",max:"255",min:"0",step:"1","onUpdate:modelValue":l[16]||(l[16]=n=>o.vars.b=n),class:"color-picker-view__input",onInput:l[17]||(l[17]=(...n)=>o.updateRGB&&o.updateRGB(...n))},null,544),[[M,o.vars.b]]),se,V(s("input",{type:"text","onUpdate:modelValue":l[18]||(l[18]=n=>o.color=n),class:"color-picker-view__input"},null,512),[[M,o.color]]),s("div",{class:"color-picker-view__enter",onClick:l[19]||(l[19]=(...n)=>o.onComfirm&&o.onComfirm(...n))},"\u786E\u8BA4")])],512),[[ot,o.show]])]))])}const N=ut(Zt,[["render",ne],["__scopeId","data-v-27cd0415"]]);N.install=function(o){o.component(N.name,N)};const le={draggable:!0,class:"grid-item"},re={key:0,class:"lt"},ae={key:1},ie={key:2},ce={class:"overlay-dot"},ue={class:"overlay-selected"},de=ct({__name:"GridItem",props:{disabled:{type:Boolean},selected:{type:Boolean},dot:{type:Boolean},item:null},setup(o){return(l,p)=>(A(),I("div",le,[o.item?(A(),I("div",{key:0,class:wt(["color-unit",{disabled:o.disabled}]),style:H({fontSize:`${o.item.data.size}px`,color:o.item.style.color,backgroundColor:o.item.style.bgcolor,backgroundImage:o.item.style.image?`url(${o.item.style.image})`:"",opacity:o.item.style.opacity})},[dt(Z(o.item.data.txt)+" ",1),o.item.data.actorId?(A(),I("span",re,Z(o.item.data.actorId),1)):et("",!0),o.item.data.sub?(A(),I("sub",ae,Z(o.item.data.sub),1)):et("",!0),o.item.data.sup?(A(),I("sup",ie,Z(o.item.data.sup),1)):et("",!0)],6)):(A(),I("div",{key:1,class:wt(["color-unit",{disabled:o.disabled}])},[Ot(l.$slots,"default",{},void 0,!0)],2)),V(s("div",ce,null,512),[[ot,o.dot]]),V(s("div",ue,null,512),[[ot,o.selected]])]))}});const L=ut(de,[["__scopeId","data-v-2fdd6abc"]]);var E=(o=>(o[o.NONE=0]="NONE",o[o.GUARD=1]="GUARD",o[o.SHEEP=2]="SHEEP",o[o.ATTACKER=3]="ATTACKER",o))(E||{});function fe(){const o=X(0),l=X([]),p=X([]),d=[{color:"#202020",bgcolor:"#f5fff0"},{color:"#f9f9fa",bgcolor:"#ff3333"},{color:"#f9f9fa",bgcolor:"#00d659"},{color:"#f9f9fa",bgcolor:"#369af7"},{color:"#f9f9fa",bgcolor:"#fec02f"},{color:"#f9f9fa",bgcolor:"#a865e7"}],r=()=>({actorId:0,actorType:E.NONE,size:14,txt:"",disabled:!1}),a=()=>({color:d[0].color,bgcolor:d[0].bgcolor,image:"",opacity:1}),n=()=>({d:0,d1:0,d2:0,q:0}),m=()=>({x:0,y:0,data:r(),style:a(),state:n()});function y(C){C.data=r(),C.style=a(),C.state=n()}function B(){o.value=0,l.value.forEach(C=>{y(C)}),p.value=[]}function G(C,c){const $=[];for(let R=0;R<C;R++)for(let F=0;F<c;F++){const T=m();T.x=F+1,T.y=C-R,$.push(T)}l.value=$}return{actorId:o,grids:l,selects:p,gridColors:d,defGridData:r,defGridStyle:a,defGridState:n,defGrid:m,cleanGrid:y,cleanGrids:B,generateGrids:G}}const b=o=>(Ct("data-v-e1d622af"),o=o(),St(),o),pe={class:"wrapper"},ve={class:"toolbar"},me={class:"setting"},ye={class:"label-control"},be=b(()=>s("span",null,"\u7F16\u8F91\u6A21\u5F0F\xA0",-1)),_e=b(()=>s("option",{value:1},"\u7F16\u8F91\u7F51\u683C",-1)),ge=b(()=>s("option",{value:2},"\u7F51\u683C\u4E0A\u8272",-1)),we=b(()=>s("option",{value:3},"\u9009\u62E9\u5F62\u72B6",-1)),he=b(()=>s("option",{value:4},"\u62A4\u536B\u8BA1\u7B97",-1)),ke=[_e,ge,we,he],xe={class:"label-control"},Be=b(()=>s("span",null,"\u8303\u56F4\xA0",-1)),Ee={class:"label-control"},Ve=b(()=>s("span",null,"\u5F62\u72B6\xA0",-1)),Ce=b(()=>s("option",{value:1},"\u83F1\u5F62",-1)),Se=b(()=>s("option",{value:2},"\u5708\u6570",-1)),Ae=[Ce,Se],De={class:"label-control"},Ge=b(()=>s("span",null,"\u6392\u5E8F\xA0",-1)),$e=b(()=>s("option",{value:1},"\u8DDD\u79BBX",-1)),Ie=b(()=>s("option",{value:2},"\u8DDD\u79BBY",-1)),Re=b(()=>s("option",{value:3},"X\u4F18\u5148",-1)),Me=b(()=>s("option",{value:4},"Y\u4F18\u5148",-1)),Fe=[$e,Ie,Re,Me],He={class:"color-container"},Ue={class:"label-control"},Te=b(()=>s("span",null,"\u9884\u89C8\xA0",-1)),qe=dt(" E "),Ne={class:"label-control"},Pe=b(()=>s("span",null,"\u6587\u5B57\xA0",-1)),Le={class:"label-control"},ze=b(()=>s("span",null,"\u80CC\u666F\xA0",-1)),Xe=b(()=>s("label",{class:"label-control"},[s("span",null,"\u9884\u8BBE\xA0")],-1)),Ke={class:"color-tpls"},Oe=dt(" E "),Ye={width:"32",height:"32",viewBox:"0 0 24 24",fill:"#a9a9a9",style:{"pointer-events":"none"}},je=b(()=>s("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"},null,-1)),We=[je],Ze={class:"props-container"},Je={key:0,class:"props-content"},Qe={class:"label-control"},to=b(()=>s("span",null,"\u9884\u89C8\xA0",-1)),eo={class:"label-control"},oo=b(()=>s("span",null,"\u6587\u5B57\xA0",-1)),so={class:"label-control"},no=b(()=>s("span",null,"\u80CC\u666F\xA0",-1)),lo={class:"label-control"},ro=b(()=>s("span",null,"\u5927\u5C0F\xA0",-1)),ao={class:"label-control"},io=b(()=>s("span",null,"Id\xA0",-1)),co={class:"label-control"},uo=b(()=>s("span",null,"\u7C7B\u578B\xA0",-1)),fo=["value"],po=["value"],vo=["value"],mo=["value"],yo={class:"label-control"},bo=b(()=>s("span",null,"\u5185\u5BB9\xA0",-1)),_o={class:"content"},go={class:"heroes"},wo=ct({__name:"Grids",setup(o){const{actorId:l,grids:p,selects:d,gridColors:r,defGridData:a,defGridStyle:n,defGridState:m,defGrid:y,cleanGrids:B,generateGrids:G}=fe(),C=X(),c=W({editor:1,selectRange:5,shape:1,sortType:1,color:r[0].color,bgcolor:r[0].bgcolor});function $(e){c.color=e.color,c.bgcolor=e.bgcolor}const R=15,F=15,T=Bt(()=>`--rows:${F};--cols:${R}`),{heroes:K}=Wt(),O=ht(y()),Y=ht(K.value.map(e=>{const t=y();return t.style.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${e.hero_icon}.png`,t}));Et(K,()=>{Y.value=K.value.map(e=>{const t=y();return t.style.image=`https://media.zlongame.com/media/news/cn/tdj/info/data/heroicon/${e.hero_icon}.png`,t})});function st(e,t,v,h,i,f,_){switch(p.value.forEach(g=>{const S=Math.abs(e-g.x),P=Math.abs(t-g.y),rt=S+P,_t=Math.max(S,P),gt=S>1?S-1:S+P>1?P-1:P;switch(h){case 1:rt<=v&&(g.state.d=rt,g.state.q=_t,g.state.d1=gt,g.style.color=f,g.style.bgcolor=_,d.value.push(g));break;case 2:Math.abs(S)<=v&&Math.abs(P)<=v&&(g.state.d=rt,g.state.q=_t,g.state.d1=gt,g.style.color=f,g.style.bgcolor=_,d.value.push(g));break}}),i){case 1:h===1?d.value.sort(nt):h===2&&d.value.sort(D);break;case 2:h===1?d.value.sort(u):h===2&&d.value.sort(q);break;case 3:d.value.sort(lt);break;case 4:d.value.sort(Dt);break}for(let g=0;g<d.value.length;g++)d.value[g].data.txt=String(g+1)}function nt(e,t){return e.state.d!==t.state.d?e.state.d-t.state.d:e.x!==t.x?e.x-t.x:e.y!==t.y?e.y-t.y:0}function u(e,t){return e.state.d!==t.state.d?e.state.d-t.state.d:e.y!==t.y?e.y-t.y:e.x!==t.x?e.x-t.x:0}function D(e,t){return e.state.q!==t.state.q?e.state.q-t.state.q:e.state.d!==t.state.d?e.state.d-t.state.d:e.x!==t.x?e.x-t.x:e.y!==t.y?e.y-t.y:0}function q(e,t){return e.state.q!==t.state.q?e.state.q-t.state.q:e.state.d!==t.state.d?e.state.d-t.state.d:e.y!==t.y?e.y-t.y:e.x!==t.x?e.x-t.x:0}function lt(e,t){return e.x!==t.x?e.x-t.x:e.y!==t.y?e.y-t.y:0}function Dt(e,t){return e.y!==t.y?e.y-t.y:e.x!==t.x?e.x-t.x:0}const w=W({enabled:!1});function Gt(){B()}function pt(){w.enabled=!1}function $t(e,t){var v;switch(c.editor){case 1:case 4:w.current=t,(v=C.value)==null||v.focus();break;case 3:B(),st(t.x,t.y,c.selectRange,c.shape,c.sortType,c.color,c.bgcolor);break}}function It(e,t){if(e.button===0)switch(c.editor){case 2:{w.enabled=!0,t.style.color=c.color,t.style.bgcolor=c.bgcolor;break}}}function Rt(e,t){e.button===0&&w.enabled&&(t.style.color=c.color,t.style.bgcolor=c.bgcolor)}function Mt(){w.current=void 0}const k=W({}),vt=["#ffffff00","#FF3C4132","#0EBEFF32","#48CF7432","#FCD00032","#80008032"],Ft=(e,t)=>{switch(c.editor){case 2:e.preventDefault();break;default:k.grid=t,k.action="swap",e.dataTransfer&&(e.dataTransfer.effectAllowed="move")}},Ht=(e,t)=>{const v=y();v.style.color=t.color,v.style.bgcolor=t.bgcolor,v.data.txt="E",k.grid=v,k.action="color"},mt=(e,t)=>{k.grid=At.cloneDeep(t),k.action="image"},Ut=(e,t)=>{if(e.preventDefault(),!k.grid)return;const v=k.grid.data,h=k.grid.style;switch(k.action){case"color":t.data.actorId||(t.data.actorId=++l.value),t.style.color=h.color,t.style.bgcolor=h.bgcolor;break;case"image":t.data.actorId||(t.data.actorId=++l.value),t.style.image=h.image;break;case"swap":k.grid.data=t.data,k.grid.style=t.style,t.data=v,t.style=h;break}k.grid=void 0,k.action=void 0,c.editor===4&&j()};function Tt(e,t){let v=e[0].state[t];for(let h=1;h<e.length;h++)e[h].state[t]<v&&(v=e[h].state[t]);return v}function yt(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function bt(e,t,v){e.sort((_,g)=>+_.data.actorId-+g.data.actorId),e.forEach(_=>{_.state.d1=yt(_,v),_.state.d2=yt(_,t),_.data.guard=!1});const h=Tt(e,"d1");if(e=e.filter(_=>_.state.d1===h),e.length===1)return e[0];let i=e[0],f=e.length;for(;f--;)if(e[f].state.d2<i.state.d2){i=e[f];break}return i}function qt(e,t){return(F-t-1)*R+e}function Nt(){B(),l.value=0;const e=[{x:7,y:9,txt:"",type:E.GUARD,bg:"#0ebeff"},{x:9,y:7,txt:"",type:E.GUARD,bg:"#0ebeff"},{x:7,y:5,txt:"",type:E.GUARD,bg:"#0ebeff"},{x:5,y:7,txt:"",type:E.GUARD,bg:"#0ebeff"},{x:8,y:6,txt:"",type:E.ATTACKER,bg:"#ff3c41"},{x:7,y:7,txt:"",type:E.SHEEP,bg:"#fcd000"}];for(const t of e){const v=p.value[qt(t.x,t.y)];v.data.actorId=++l.value,v.data.actorType=t.type,v.data.txt=t.txt,v.data.disabled=!1,v.style.bgcolor=t.bg}c.editor=4}const j=()=>{p.value.forEach(f=>f.style.opacity=1);const e=p.value.filter(f=>!f.data.disabled),t=e.filter(f=>f.data.actorType===E.ATTACKER)[0],v=e.filter(f=>f.data.actorType===E.SHEEP)[0],h=e.filter(f=>f.data.actorType===E.GUARD);if(!v||h.length===0){alert("\u7F3A\u5C11\u89D2\u8272\uFF0C\u5C06\u81EA\u52A8\u751F\u6210"),Nt(),j();return}const i=p.value.filter(f=>!f.data.disabled).filter(f=>f.data.actorType===E.NONE);for(const f of i){const _=bt(h,f,v);f.style.image=_.style.image,f.style.bgcolor=vt[_.data.actorId]||vt[0],_.style.image?f.data.sup="":f.data.sup=String(_.data.actorId),f.style.opacity=.6}if(t){const f=bt(h,t,v);f.data.guard=!0}},Pt=e=>{if(e.data.disabled=!e.data.disabled,c.editor===4){switch(e.data.actorType){case E.ATTACKER:case E.SHEEP:e.data.disabled=!1;break}j()}},Lt=e=>{!k.grid||!e.dataTransfer||k.action==="swap"&&(c.editor===4&&k.grid.data.actorType===E.SHEEP||e.preventDefault())},zt=e=>{if(!!k.grid&&!!e)switch(k.action){case"swap":e.data=a(),e.style=n(),e.state=m(),k.grid=void 0,k.action=void 0,c.editor===4&&j()}};return G(F,R),window.addEventListener("mouseup",pt,!1),Vt(()=>{window.removeEventListener("mouseup",pt,!1)}),(e,t)=>{const v=Yt("c-space"),h=jt("autofocus");return A(),I("div",pe,[s("div",ve,[s("div",me,[s("label",ye,[be,V(s("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>c.editor=i)},ke,512),[[J,c.editor,void 0,{number:!0}]])]),s("label",xe,[Be,V(s("input",{type:"number",min:"0","onUpdate:modelValue":t[1]||(t[1]=i=>c.selectRange=i),style:{width:"5em"}},null,512),[[M,c.selectRange]])]),s("label",Ee,[Ve,V(s("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>c.shape=i)},Ae,512),[[J,c.shape]])]),s("label",De,[Ge,V(s("select",{"onUpdate:modelValue":t[3]||(t[3]=i=>c.sortType=i)},Fe,512),[[J,c.sortType]])]),s("button",{class:"btn",onClick:Gt},"\u6E05\u7A7A"),s("button",{class:"btn",onClick:j},"\u8BA1\u7B97\u62A4\u536B")]),s("div",He,[U(v,null,{default:Q(()=>[s("label",Ue,[Te,U(x(L),{draggable:!1,style:H([`--color:${c.color};--bgcolor:${c.bgcolor}`])},{default:Q(()=>[qe]),_:1},8,["style"])]),s("label",Ne,[Pe,U(x(N),{modelValue:c.color,"onUpdate:modelValue":t[4]||(t[4]=i=>c.color=i)},null,8,["modelValue"])]),s("label",Le,[ze,U(x(N),{modelValue:c.bgcolor,"onUpdate:modelValue":t[5]||(t[5]=i=>c.bgcolor=i)},null,8,["modelValue"])]),Xe,s("div",Ke,[(A(!0),I(at,null,it(x(r),(i,f)=>(A(),tt(x(L),{key:f,selected:c.bgcolor===i.bgcolor,style:H([`--color:${i.color};--bgcolor:${i.bgcolor}`]),onClick:_=>$(i),onDragstart:_=>Ht(_,i)},{default:Q(()=>[Oe]),_:2},1032,["selected","style","onClick","onDragstart"]))),128))]),s("div",{class:"trush",onDragover:Lt,onDrop:t[6]||(t[6]=i=>zt(k.grid))},[(A(),I("svg",Ye,We))],32)]),_:1})]),s("div",Ze,[w.current?(A(),I("div",Je,[U(v,null,{default:Q(()=>[s("label",Qe,[to,U(x(L),{draggable:!1,style:H([`--color:${w.current.style.color};--bgcolor:${w.current.style.bgcolor}`]),item:w.current},null,8,["style","item"])]),s("label",eo,[oo,U(x(N),{modelValue:w.current.style.color,"onUpdate:modelValue":t[7]||(t[7]=i=>w.current.style.color=i)},null,8,["modelValue"])]),s("label",so,[no,U(x(N),{modelValue:w.current.style.bgcolor,"onUpdate:modelValue":t[8]||(t[8]=i=>w.current.style.bgcolor=i)},null,8,["modelValue"])]),s("label",lo,[ro,V(s("input",{type:"number",style:{width:"4em"},min:"12",step:"1","onUpdate:modelValue":t[9]||(t[9]=i=>w.current.data.size=i)},null,512),[[M,w.current.data.size]])]),s("label",ao,[io,V(s("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=i=>w.current.data.actorId=i),style:{width:"4em"}},null,512),[[M,w.current.data.actorId]])]),s("label",co,[uo,V(s("select",{"onUpdate:modelValue":t[11]||(t[11]=i=>w.current.data.actorType=i)},[s("option",{value:x(E).NONE},"\u65E0",8,fo),s("option",{value:x(E).GUARD},"\u62A4\u536B",8,po),s("option",{value:x(E).SHEEP},"\u9776\u5B50",8,vo),s("option",{value:x(E).ATTACKER},"\u653B\u51FB\u8005",8,mo)],512),[[J,w.current.data.actorType]])]),s("label",yo,[bo,V(s("input",{type:"text",ref_key:"txtInput",ref:C,"onUpdate:modelValue":t[12]||(t[12]=i=>w.current.data.txt=i)},null,512),[[h],[M,w.current.data.txt]])]),s("button",{class:"btn",onClick:Mt},"\u5B8C\u6210")]),_:1})])):et("",!0)])]),s("div",_o,[s("div",{class:"grids",style:H(x(T))},[(A(!0),I(at,null,it(x(p),(i,f)=>{var _,g;return A(),tt(x(L),{key:f,draggable:!0,selected:i.x===((_=w.current)==null?void 0:_.x)&&i.y===((g=w.current)==null?void 0:g.y),disabled:i.data.disabled,dot:i.data.guard,item:i,onDragstart:S=>Ft(S,i),onDragover:t[13]||(t[13]=z(()=>{},["prevent"])),onDrop:S=>Ut(S,i),onContextmenu:z(S=>Pt(i),["prevent"]),onClick:S=>$t(S,i),onMousedown:S=>It(S,i),onMouseenter:S=>Rt(S,i)},null,8,["selected","disabled","dot","item","onDragstart","onDrop","onContextmenu","onClick","onMousedown","onMouseenter"])}),128))],4),s("div",go,[U(x(L),{item:x(O),onDragstart:t[14]||(t[14]=i=>mt(i,x(O)))},null,8,["item"]),(A(!0),I(at,null,it(x(Y),(i,f)=>(A(),tt(x(L),{key:f,item:i,onDragstart:_=>mt(_,i)},null,8,["item","onDragstart"]))),128))])])])}}});const Bo=ut(wo,[["__scopeId","data-v-e1d622af"]]);export{Bo as default};
